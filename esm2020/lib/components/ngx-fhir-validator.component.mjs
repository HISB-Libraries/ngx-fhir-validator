import { Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { ValidatorConstants } from "../providers/validator-constants";
import { UntypedFormControl } from "@angular/forms";
import { MatTableDataSource } from "@angular/material/table";
import { animate, state, style, transition, trigger } from "@angular/animations";
import * as JSZip from 'jszip';
import * as autoTable from "jspdf-autotable";
import * as jspdf from "jspdf";
import * as i0 from "@angular/core";
import * as i1 from "../services/fhir-validator.service";
import * as i2 from "@angular/common";
import * as i3 from "@angular/material/button";
import * as i4 from "@angular/forms";
import * as i5 from "@angular/material/icon";
import * as i6 from "@angular/material/table";
import * as i7 from "@angular/material/progress-spinner";
import * as i8 from "@angular/material/radio";
import * as i9 from "@angular/material/card";
import * as i10 from "@angular/material/button-toggle";
import * as i11 from "@angular/material/checkbox";
import * as i12 from "@angular/material/tooltip";
export class NgxFhirValidatorComponent {
    constructor(fhirValidatorService) {
        this.fhirValidatorService = fhirValidatorService;
        this.validatorTitle = '';
        this.validationResultsExpanded = false; // Validation results details initial state
        this.resultDetailsExpandBtnShown = true; // Show/hide Expand Validation Results btn
        this.formatResourceBtnShown = false; // Show/hide Format Resource btn
        this.clearValidatorBtnShown = true; // Show/hide Clear Validator btn
        this.submitBtnShown = true; // Show/hide Submit btn
        this.exportResultsButtonShown = true;
        this.submitBtnTitle = 'Submit'; //The submit button title. "Submit" is generic name and other apps may want to change it
        this.validationInputFormat = { format: 'json', accepts: '.json' };
        this.maxFileSize = 250000; // Max allowed file size is 250KB
        this.submitBtnAlignment = 'right'; // The default location for the Submit btn
        this.cancelValidationBtnShown = true;
        this.buttonTxtColor = 'white';
        this.buttonBackgroundColor = '#4858B8';
        this.onValidation = new EventEmitter();
        this.onApiError = new EventEmitter();
        this.onResourceContentChanged = new EventEmitter();
        this.fhirResource = ''; // The Resource.
        this.resourceFormat = 'json'; // The resource format could be JSON or XML, with JSON being the default format.
        this.fileName = ''; // Name of the file uploaded by the user. We need this to render the filename in the UI.
        this.validationErrorStr = ''; // We use this value to store preliminary error messages or a generic error message.
        this.hasResponseData = false; // Indicates if the response generated any messages. If true, we render the report
        this.parsedFhirResource = ''; // We store value of the validator result in order to present it to the user.
        this.isLoading = false;
        this.allExpanded = true; // Used to render collapsed/expanded all icon as well as calculate if all results are expanded/collapsed
        this.severityLevels = ValidatorConstants.SEVERITY_LEVELS;
        this.validationFinished = false;
        this.isValidResource = false; // We use this to render the success message
        this.serverErrorDetected = false; // Tracks if the server has responded with an error (404, 500). Used to render the error in UI.
        this.serverErrorList = []; // Store the data from the OperationOutcome resource
        this.serverErrorStatus = ''; // We store the error response status here (i.e. 404, 500)
        this.lines = 1;
        this.width = 0;
        //TODO remove this code when the API returns a timeout error
        this.serverTimoutDetected = false;
        this.SERVER_TIMEOUT_INTERVAL = 240000; //four minutes
        this.displayedColumns = ValidatorConstants.DISPLAYED_COLUMNS;
        this.severityLevelsFormControl = new UntypedFormControl(this.severityLevels);
        this.dataSource = new MatTableDataSource();
        this.apiResponse = null;
    }
    formatFhirResource() {
        if (this.fhirResource) {
            if (this.resourceFormat === 'json' && this.fhirValidatorService.isJson(this.fhirResource)) {
                this.fhirResource = this.fhirValidatorService.beautifyJSON(this.fhirResource);
            }
            else if (this.resourceFormat === 'xml' && this.fhirValidatorService.isXmlString(this.fhirResource)) {
                this.fhirResource = this.fhirValidatorService.beautifyXML(this.fhirResource);
            }
        }
        this.lineNumbers();
    }
    lineNumbers() {
        const linedStrings = this.fhirResource.split(/[\n\r]/g);
        this.lines = linedStrings.length;
        this.width = this.inputRef.nativeElement.offsetWidth;
        const charInLines = this.width / ValidatorConstants.FONT_WIDTH;
        for (const line of linedStrings) {
            if (line.length > charInLines) {
                this.lines = this.lines + (line.length / charInLines);
            }
        }
    }
    getLineNumbers() {
        return Array.from({ length: this.lines }, (_, i) => (i + 1).toString());
    }
    // It is important the format is working with "best effort"
    // That is it may or may not format the text properly and require extensive testing to validate its operation.
    onFormatInput() {
        this.formatFhirResource();
        this.fhirValidatorService.showSuccessMessage("Formatting Attempted.");
    }
    clearUI() {
        this.fhirResource = '';
        this.fileName = '';
        this.clearValidationErrors();
        this.onResourceContentChanged.emit(this.fhirResource);
    }
    onClear() {
        this.clearUI();
    }
    onFileSelected(event) {
        const file = event.target.files[0];
        if (file) {
            if (file.size > this.maxFileSize) {
                console.error("File too big");
                this.fhirValidatorService.showErrorMessage("This file exceeds " + this.maxFileSize / 1000 + "kb and cannot be processed");
            }
            else {
                // auto toggle the file type radio buttons
                if (file.type === "text/xml") {
                    this.resourceFormat = 'xml';
                }
                else if ("application/json") {
                    this.resourceFormat = 'json';
                }
                // set the filename in the UI
                this.fileName = file.name;
                const reader = new FileReader();
                reader.readAsText(file, "UTF-8");
                reader.onload = () => {
                    this.fhirResource = reader.result;
                    this.onResourceContentChanged.emit(this.fhirResource);
                    this.formatFhirResource();
                };
                reader.onerror = () => {
                    this.fhirValidatorService.showErrorMessage("Unable to open the file.");
                };
            }
        }
        else {
            this.fhirValidatorService.showErrorMessage("Unable to open the file.");
        }
    }
    validateFhirResource(fhirResource, resourceFormat) {
        // Set the stage for the validation. Reset variables to default values.
        if (!fhirResource) {
            fhirResource = this.fhirResource;
        }
        if (!resourceFormat) {
            resourceFormat = this.resourceFormat;
        }
        if (!fhirResource || !(resourceFormat === 'json' || resourceFormat === 'xml')) {
            console.error("Invalid data passed to the validator.");
        }
        this.isValidResource = true;
        this.hasResponseData = false;
        this.serverErrorList = [];
        this.serverErrorStatus = '';
        this.serverErrorDetected = false;
        this.serverTimoutDetected = false;
        this.severityLevelsFormControl.patchValue(this.severityLevels);
        this.validationErrorStr = this.fhirValidatorService.getUiValidationMessages(fhirResource, resourceFormat);
        if (this.validationErrorStr) {
            //see if we can find any obvious issues with the resource here
            this.isValidResource = false;
            this.validationFinished = true;
            this.onValidation.emit({ hasBasicErrors: true, isValid: false, resource: fhirResource });
        }
        else {
            // The UI validation passed successfully, and we execute the backend validation.
            this.executeAPIValidation(fhirResource, resourceFormat);
        }
    }
    onPasteFhirResource(event) {
        this.fileName = '';
        if (!this.fhirResource) {
            this.clearUI();
        }
        let text = event.clipboardData?.getData('text') ?? '';
        if (this.fhirValidatorService.isJson(text)) {
            this.resourceFormat = 'json';
        }
        else if (this.fhirValidatorService.isXmlString(text)) {
            this.resourceFormat = 'xml';
        }
    }
    getLineNumbersBySeverity(apiResponse, severity) {
        if (!apiResponse || apiResponse.issue?.length === 0) {
            return [];
        }
        return apiResponse.issue
            .filter((element) => element.severity == severity)
            .map((element) => this.getLineNumberFromLocation(element.location[0]) - 1);
    }
    ;
    scrollToElement(location) {
        const element = document.querySelector(location);
        if (element)
            element.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    getLineNumberFromLocation(locationStr) {
        // Get the location from response
        return (locationStr?.length > 0) ? parseInt(locationStr.split(",")[0].replace(/^\D+/g, '')) : 0;
    }
    // When the user selects a location from the errors and warning results, we want to scroll the page to that location.
    onLocationSelected(response) {
        let locationId = ('#mark' + this.getLineNumberFromLocation(response.location[0])).toLowerCase();
        this.scrollToElement(locationId);
    }
    // Sends fhir resource to be validated, renders response
    executeAPIValidation(fhirResource, resourceFormat) {
        // Reset values to default state prior to validation.
        this.isLoading = true;
        this.parsedFhirResource = '';
        this.validationFinished = false;
        this.apiResponse = null;
        if (this.resourceFormat === "json") {
            fhirResource = JSON.parse(fhirResource);
        }
        else if (this.resourceFormat === "xml") {
            let fhirResourceXML = new DOMParser().parseFromString(fhirResource, 'text/xml');
            fhirResource = fhirResourceXML.documentElement.outerHTML;
        }
        this.fhirValidatorService.validateFhirResource(fhirResource, resourceFormat)
            .subscribe({
            next: (response) => {
                this.validationFinished = true;
                let issue = response.issue;
                if (issue.length === 1 && issue[0].severity === "Information" && issue[0]?.message.toLowerCase() === "ALL OK".toLowerCase()) {
                    this.isValidResource = true;
                    this.onValidation.emit({ isValid: true, resource: fhirResource });
                }
                else {
                    this.isValidResource = false;
                    this.validationErrorStr = "Please see the validation errors below.";
                    this.setValidatorResponse(response, fhirResource);
                }
                // Some strings produced by the validator are long and miss spaces. This could break the UI validation report.
                // Therefore, we insert a space after each coma found in the validation response text.
                issue.forEach((element) => {
                    element.diagnostics = element.diagnostics.replace(/,(?=[^\s])/g, ", ");
                });
                // sort by line numbers
                issue = issue.sort((a, b) => {
                    return this.getLineNumberFromLocation(a.location?.[0]) - this.getLineNumberFromLocation(b.location?.[0]);
                });
                // mat each item of the response to an object and make sure that the results are in expanded state in the
                // UI validation report.
                this.dataSource.data = issue.map((element) => {
                    let result = Object.assign({}, element);
                    result.expanded = true;
                    return result;
                });
                this.dataSource.filterPredicate = this.getFilterPredicate();
                this.apiResponse = response;
                this.apiResponse.formattedResource = response?.extension?.[0]?.valueString;
            },
            error: (err) => {
                this.isLoading = false;
                this.serverErrorDetected = true;
                this.serverErrorStatus = err.status;
                if (err?.error?.issue) {
                    this.serverErrorList = err.error.issue;
                }
                this.onApiError.emit(err);
                console.error(err);
            },
            complete: () => {
                this.isLoading = false;
            }
        });
        //TODO make sure to remove this function when the server side timeout is implemented.
        setTimeout(() => {
            if (this.isLoading) {
                this.isLoading = false;
                this.serverTimoutDetected = true;
            }
        }, this.SERVER_TIMEOUT_INTERVAL);
    }
    toggle() {
        this.allExpanded = !this.allExpanded;
        this.dataSource.data.forEach((item) => item.expanded = this.allExpanded);
    }
    onFilterResults() {
        this.dataSource.filter = this.severityLevelsFormControl.value.join(',');
    }
    getFilterPredicate() {
        return function (row, filters) {
            let matchFilter = false;
            const filterArray = filters.split(',');
            filterArray.forEach((filter) => {
                if (row.severity.toLowerCase().indexOf(filter.toLowerCase()) != -1) {
                    matchFilter = true;
                }
            });
            return matchFilter;
        };
    }
    onCancelValidation() {
        this.isLoading = false;
    }
    checkExpandCollapseAllStatus() {
        /*
        * When all elements are collapsed we want to change the expansion icon to render "expand all"
        * When all elements are expanded we want to change the expansion icon to "collapse all"
        * This will save extra unnecessary click for the user
        */
        const expandedElementsCount = this.dataSource.data.filter(element => element['expanded']).length;
        if (expandedElementsCount === this.dataSource.data.length) {
            this.allExpanded = true;
        }
        else if (expandedElementsCount === 0) {
            this.allExpanded = false;
        }
    }
    isFilterEnabled(severity) {
        return !!this.dataSource.data.find((element) => element.severity.toLowerCase() === severity.toLowerCase());
    }
    getCount(level) {
        return this.dataSource.data
            .filter((element) => element.severity.toLowerCase() === level.toLowerCase())
            .length;
    }
    onCloseServerErrorMessage() {
        this.serverErrorDetected = false;
        this.serverErrorList = [];
        this.serverErrorStatus = '';
    }
    setValidatorResponse(apiResponse, resource) {
        const errorsCount = apiResponse.issue.filter((element) => element.severity == 'error')?.length ?? 0;
        const warningsCount = apiResponse.issue.filter((element) => element.severity == 'warning')?.length ?? 0;
        const infoCount = apiResponse.issue.filter((element) => element.severity == 'information')?.length ?? 0;
        const notesCount = apiResponse.issue.filter((element) => element.severity == 'note')?.length ?? 0;
        let validationResult = {};
        validationResult.errorsCount = errorsCount;
        validationResult.warningsCount = warningsCount;
        validationResult.notesCount = notesCount;
        validationResult.infoCount = infoCount;
        validationResult.isValid = errorsCount <= 0;
        validationResult.resource = resource;
        this.onValidation.emit(validationResult);
    }
    clearValidationErrors() {
        this.validationErrorStr = '';
        this.isValidResource = false;
        this.parsedFhirResource = '';
        this.hasResponseData = false;
        this.validationFinished = false;
        this.isLoading = false;
        this.serverErrorDetected = false;
        this.serverErrorList = [];
        this.serverErrorStatus = '';
        this.serverTimoutDetected = false;
        this.apiResponse = null;
    }
    getLineItemClass(item, i) {
        if (this.getLineNumbersBySeverity(this.apiResponse, 'error').indexOf(i) != -1) {
            this.hasResponseData = true;
            return "error-mark";
        }
        else if (this.getLineNumbersBySeverity(this.apiResponse, 'warning').indexOf(i) != -1) {
            this.hasResponseData = true;
            return "warning-mark";
        }
        else if (this.getLineNumbersBySeverity(this.apiResponse, 'information').indexOf(i) != -1) {
            this.hasResponseData = true;
            return "info-mark";
        }
        else if (this.getLineNumbersBySeverity(this.apiResponse, 'note').indexOf(i) != -1) {
            this.hasResponseData = true;
            return "note-mark";
        }
        else
            return '';
    }
    generateAutoTablePDF(data) {
        let pdf = new jspdf.jsPDF();
        const reportTitle = "FHIR Validator Results";
        pdf.setFontSize(6);
        pdf.setTextColor(119, 119, 119);
        pdf.text(this.toInYyyyMmDdHhMmSs(new Date()), 170, 12);
        pdf.setFontSize(12);
        pdf.setTextColor(50, 50, 50);
        pdf.text(reportTitle, 14, 12);
        autoTable.default(pdf, {
            columnStyles: {
                severity: { halign: 'left', cellWidth: 25 },
                fhirPath: { halign: 'left', cellWidth: 50 },
                diagnostics: { halign: 'left' },
                location: { halign: 'left', cellWidth: 25 }
            },
            body: data,
            columns: [
                { header: 'Severity', dataKey: 'severity' },
                { header: 'Fhir Path', dataKey: 'fhirPath' },
                { header: 'Diagnostics', dataKey: 'diagnostics' },
                { header: 'Location', dataKey: 'location' },
            ],
            styles: { fontSize: 8, fontStyle: "normal" },
        });
        return new Blob([pdf.output('blob')], { type: 'application/pdf' });
    }
    onExportToPdf() {
        // Add the formatted resource form the validator response to a json file
        // This way the line numbers from the validator report will match the json file numbers
        const jsonResource = this?.apiResponse?.formattedResource || '';
        // Create a pdf report
        const pdfReportData = this.dataSource.data
            .map(element => { return { severity: element.severity, diagnostics: element.diagnostics, location: element.location, fhirPath: element?.expression?.[0] }; })
            .filter(item => this.severityLevelsFormControl.value.indexOf(item.severity) != -1);
        const pdfBlob = this.generateAutoTablePDF(pdfReportData);
        let zip = new JSZip();
        zip.file(`resource.json`, jsonResource);
        zip.file('fhir_validator_report.pdf', pdfBlob);
        // Create the zip and trigger download
        zip.generateAsync({ type: 'blob' }).then((content) => {
            // Create a blob for the zip content
            const blob = new Blob([content], { type: 'application/zip' });
            // Create a download link
            const downloadLink = document.createElement('a');
            downloadLink.href = window.URL.createObjectURL(blob);
            let date = new Date().toUTCString();
            downloadLink.download = `validator_results_${this.toInYyyyMmDdHhMmSs(new Date())}.zip`;
            // Trigger the download
            downloadLink.click();
            downloadLink.remove();
        });
    }
    /**
     * Helper function for formatting a date.
     * For more information see https://trymysolution.medium.com/javascript-date-as-in-yyyy-mm-dd-hh-mm-ss-format-or-mm-dd-yyyy-hh-mm-ss-a0c96e8fa888
     * @param date
     * @param dateDiveder
     */
    toInYyyyMmDdHhMmSs(date, dateDiveder = "-") {
        return ([
            date.getFullYear(),
            this.padTwoDigits(date.getMonth() + 1),
            this.padTwoDigits(date.getDate()),
        ].join(dateDiveder) +
            " " +
            [
                this.padTwoDigits(date.getHours()),
                this.padTwoDigits(date.getMinutes()),
                this.padTwoDigits(date.getSeconds()),
            ].join(":"));
    }
    /**
     * Helper function for toInYyyyMmDdHhMmSs function
     * @param num
     * @private
     */
    padTwoDigits(num) {
        return num.toString().padStart(2, "0");
    }
}
NgxFhirValidatorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.2", ngImport: i0, type: NgxFhirValidatorComponent, deps: [{ token: i1.FhirValidatorService }], target: i0.ɵɵFactoryTarget.Component });
NgxFhirValidatorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.2", type: NgxFhirValidatorComponent, selector: "lib-ngx-fhir-validator", inputs: { validatorTitle: "validatorTitle", validationResultsExpanded: "validationResultsExpanded", resultDetailsExpandBtnShown: "resultDetailsExpandBtnShown", formatResourceBtnShown: "formatResourceBtnShown", clearValidatorBtnShown: "clearValidatorBtnShown", submitBtnShown: "submitBtnShown", exportResultsButtonShown: "exportResultsButtonShown", submitBtnTitle: "submitBtnTitle", validationInputFormat: "validationInputFormat", maxFileSize: "maxFileSize", submitBtnAlignment: "submitBtnAlignment", cancelValidationBtnShown: "cancelValidationBtnShown", buttonTxtColor: "buttonTxtColor", buttonBackgroundColor: "buttonBackgroundColor" }, outputs: { onValidation: "onValidation", onApiError: "onApiError", onResourceContentChanged: "onResourceContentChanged" }, viewQueries: [{ propertyName: "inputRef", first: true, predicate: ["validatorInput"], descendants: true, read: ElementRef }], ngImport: i0, template: "<div class=\"spinner-container\" *ngIf=\"isLoading\">\n  <mat-spinner></mat-spinner>\n</div>\n\n<mat-card-header  *ngIf=\"validatorTitle\" id=\"validator-title\">\n  <mat-card-title>{{ validatorTitle }}</mat-card-title>\n</mat-card-header>\n\n\n<!-- The section below renders error messages returned by the validator.-->\n<div class=server-error-message-container *ngIf=\"serverErrorDetected\">\n  <button mat-button class=\"close-button\" color=\"accent\" aria-label=\"Close\" disableRipple\n          (click)=\"onCloseServerErrorMessage()\">\n    <mat-icon>close</mat-icon>\n  </button>\n  <div class=\"server-error-status\"><h2>Server Error Response Status: {{ serverErrorStatus }}</h2></div>\n  <div class=\"server-error-message-text\" *ngFor=\"let serverError of serverErrorList\"\n       [innerText]=\"serverError.diagnostics\"></div>\n</div>\n\n<!-- TODO remove this code when the API code is updated to return 408 on request timeout -->\n<div class=server-error-message-container *ngIf=\"serverTimoutDetected\">\n  <button mat-button class=\"close-button\" color=\"accent\" aria-label=\"Close\" disableRipple\n          (click)=\"serverTimoutDetected = false\">\n    <mat-icon>close</mat-icon>\n  </button>\n  <div class=\"server-error-status\"><h2>Server Timeout Error.</h2></div>\n</div>\n\n<!--Actions available above the FHIR validator input textarea-->\n<div class=\"row-button-wrapper\">\n\n  <!--Select JSON/XML radio group-->\n  <mat-radio-group [(ngModel)]=\"resourceFormat\" [disabled]=isLoading *ngIf=\"validationInputFormat.format == 'xml and json'\" >\n    <mat-radio-button\n      value=\"json\"\n      [checked]=\"resourceFormat =='json'\"\n      (select)=\"resourceFormat = 'json'\">\n      JSON\n    </mat-radio-button>\n    <mat-radio-button\n      value=\"xml\"\n      [checked]=\"resourceFormat =='xml'\"\n      (select)=\"resourceFormat = 'xml'\">\n      XML\n    </mat-radio-button>\n  </mat-radio-group>\n\n  <span class=\"content-spacer\" *ngIf=\"validationInputFormat?.format == 'xml and json'\"></span>\n\n  <!--File upload widget-->\n  <input type=\"file\" class=\"file-input\" (click)=\"fileUpload.value=null\"\n         [accept]=\"validationInputFormat?.accepts?.toString()\"\n         (change)=\"onFileSelected($event)\" #fileUpload>\n\n  <span class=\"filename\" *ngIf=\"validationInputFormat.format == 'xml and json'\">{{fileName}}</span>\n\n  <button mat-raised-button [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\"\n          class=\"upload-btn\"\n          (click)=\"clearUI(); fileUpload.click();\" [disabled]=isLoading>\n    <mat-icon>upload</mat-icon>\n    Upload\n  </button>\n\n  <span class=\"filename\" *ngIf=\"!(validationInputFormat.format == 'xml and json')\">{{fileName}}</span>\n</div>\n\n<!-- FHIR validator text editor-->\n<div class=\"textarea-wrapper\">\n      <div class=\"line-numbers\" #numbers>\n        <div *ngFor=\"let i of getLineNumbers();\"><div class=\"numbers\">{{i}}</div></div>\n      </div>\n      <textarea\n        #validatorInput\n        rows=\"30\"\n        [(ngModel)]=\"fhirResource\"\n        (ngModelChange)=\"onResourceContentChanged.emit(fhirResource)\"\n        [ngStyle]=\"{'border-color': (!!validationErrorStr) ? 'red': null }\"\n        (paste)=\"onPasteFhirResource($event)\"\n        [disabled]=\"isLoading\"\n        (input)=\"lineNumbers()\"\n        (scroll)=\"numbers.scrollTop = validatorInput.scrollTop\"\n      >\n      </textarea>\n</div>\n\n<!--Actions available below the FHIR validator input textarea-->\n<div class=\"row-button-wrapper\" *ngIf=\"formatResourceBtnShown || clearValidatorBtnShown || submitBtnShown || validationErrorStr\">\n\n  <span *ngIf=\"submitBtnShown && (submitBtnAlignment=='left') && !isLoading\">\n    <button mat-raised-button [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\" class=\"button\"\n            (click)=\"validateFhirResource(fhirResource, resourceFormat)\">\n      <mat-icon>send</mat-icon>\n      Submit\n    </button>\n  </span>\n\n  <button *ngIf=\"formatResourceBtnShown && !isLoading\" [ngClass]=\"{'left-margin-spacer': submitBtnAlignment=='left'}\" mat-raised-button\n          [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\"\n          (click)=\"onFormatInput();\"\n          [disabled]=\"!fhirResource\">\n    <mat-icon>code</mat-icon>\n    Format Input\n  </button>\n\n  <span class=\"content-spacer\"></span>\n  <span *ngIf=\"validationFinished\" id=\"error-response\">\n    <span class=\"danger-color\" *ngIf=\"!!validationErrorStr && !isValidResource\">{{validationErrorStr}}</span>\n    <span class=\"success-color\" *ngIf=\"isValidResource\"> This is a valid FHIR resource.</span>\n  </span>\n\n  <span class=\"content-spacer\"></span>\n\n  <button *ngIf=\"clearValidatorBtnShown && !isLoading\"\n    mat-raised-button color=\"success\" class=\"button\"\n    (click)=\"onClear()\">\n    <mat-icon>clear</mat-icon>\n    Clear Validator\n  </button>\n\n  <span class=\"left-margin-spacer\" *ngIf=\"submitBtnShown && (submitBtnAlignment =='right') && !isLoading\">\n    <button mat-raised-button color=\"accent\" class=\"button\"\n            (click)=\"validateFhirResource(fhirResource, resourceFormat)\">\n      <mat-icon>send</mat-icon>\n      {{ submitBtnTitle}}\n    </button>\n  </span>\n</div>\n\n<div class=\"row-button-wrapper top-padding\" *ngIf=\"isLoading && cancelValidationBtnShown\">\n  <span class=\"content-spacer\"></span>\n  <button mat-raised-button color=\"warn\" (click)=\"onCancelValidation()\">\n    <mat-icon>cancel</mat-icon>\n    Cancel Validation\n  </button>\n</div>\n\n<!-- Actions available after validator has processed data-->\n\n<div *ngIf=\"apiResponse?.issue && !isLoading\">\n  <div class=\"top-padding\">\n\n    <div (click)=\"onFilterResults()\">\n      <mat-button-toggle-group name=\"severity level filter\" [formControl]=\"severityLevelsFormControl\"\n                               aria-label=\"severity level filter\" multiple class=\"full-width\">\n        <mat-button-toggle\n          id=\"format-toggle-buttons\"\n          *ngFor=\"let level of severityLevels\"\n          [value]=\"level\"\n          [disabled]=\"!isFilterEnabled(level)\">\n          <!-- In order to synchronise the state of the button with the state of the checkbox, we simply show or hide\n          selected or deselected checkbox.-->\n          <mat-checkbox\n            *ngIf=\"severityLevelsFormControl?.value.indexOf(level) != -1\"\n            color=\"primary\"\n            [checked]=true\n            [disabled]=\"!isFilterEnabled(level)\"\n            [disableRipple]=\"true\"\n          >\n          </mat-checkbox>\n          <mat-checkbox\n            *ngIf=\"severityLevelsFormControl?.value.indexOf(level) === -1\"\n            color=\"primary\"\n            [checked]=false\n            [disabled]=\"!isFilterEnabled(level)\"\n            [disableRipple]=\"true\"\n          >\n          </mat-checkbox>\n          {{level | titlecase }} ({{getCount(level)}})\n        </mat-button-toggle>\n      </mat-button-toggle-group>\n    </div>\n\n    <div class=\"top-padding box\" *ngIf=\"validationResultsExpanded\">\n      <button mat-raised-button color=primary *ngIf=\"!resultDetailsExpandBtnShown\" (click)=\"resultDetailsExpandBtnShown = true\">\n        <mat-icon>expand_more</mat-icon> Expand Validation Results\n      </button>\n      <button mat-raised-button color=primary *ngIf=\"resultDetailsExpandBtnShown\" (click)=\"resultDetailsExpandBtnShown = false\">\n        <mat-icon>expand_less</mat-icon> Collapse Validation Results\n      </button>\n      <span class=\"content-spacer\"></span>\n      <button mat-raised-button (click)=\"onExportToPdf()\" *ngIf=\"exportResultsButtonShown\"\n              [disabled]=\"!(dataSource?.data?.length>0)\">\n        <mat-icon>folder_zip</mat-icon>\n        Export Results (.zip)\n      </button>\n    </div>\n\n    <div *ngIf=\"severityLevelsFormControl?.value?.length === 0\">\n      Please select severity level to see the result.\n    </div>\n\n    <div class=\"top-padding box\" *ngIf=\"(!validationResultsExpanded) && exportResultsButtonShown\">\n      <button mat-stroked-button (click)=\"onExportToPdf()\"\n              [disabled]=\"!(dataSource?.data?.length>0)\" class=\"left-margin-md\">\n        <mat-icon>folder_zip</mat-icon>\n        Export Results (.zip)\n      </button>\n    </div>\n\n    <table\n      mat-table [dataSource]=\"dataSource\" multiTemplateDataRows\n      *ngIf=\"severityLevelsFormControl?.value?.length > 0 && resultDetailsExpandBtnShown\">\n\n      <!-- First column contains expand/collapse widget. The user can chose to expand/collapse all rows,\n       as well as expand/collapse individual rows. Note that the expand/collapse all can be toggled automatically\n       based the state of the individual expand/collapse rows. For example if all rows are expanded and \"expand all\"\n       is rendered, we automatically hide it end render \"collapse all\" -->\n      <ng-container matColumnDef=\"toggle\">\n        <th mat-header-cell *matHeaderCellDef (click)=\"toggle()\">\n          <mat-icon *ngIf=\"!allExpanded\" class=\"pointer\" matTooltip=\"Expand All\" aria-label=\"expand all\">\n            expand_more\n          </mat-icon>\n          <mat-icon *ngIf=\"allExpanded\" class=\"pointer\" matTooltip=\"Collapse All\" aria-label=\"collapse all\">\n            expand_less\n          </mat-icon>\n        </th>\n        <td mat-cell *matCellDef=\"let validationResultItem\" class=\"pointer\"\n            (click)=\"validationResultItem.expanded = !validationResultItem.expanded; checkExpandCollapseAllStatus()\">\n          <mat-icon *ngIf=\"!validationResultItem.expanded\" aria-label=\"expand\">\n            expand_more\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.expanded\" aria-label=\"collapse\">\n            expand_less\n          </mat-icon>\n        </td>\n      </ng-container>\n\n      <!-- Severity level icons -->\n      <ng-container matColumnDef=\"icon\">\n        <th mat-header-cell *matHeaderCellDef></th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Error'\"\n                    class=\"danger-color\">error\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Warning'\"\n                    class=\"warning-color\">warning\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Information'\"\n                    class=\"success-color\">info\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Note'\"\n                    class=\"md-primary-color\">edit_note\n          </mat-icon>\n        </td>\n      </ng-container>\n\n      <!-- Severity level string -->\n      <ng-container matColumnDef=\"severity\">\n        <th mat-header-cell *matHeaderCellDef>Severity</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          {{validationResultItem.severity}}\n        </td>\n      </ng-container>\n\n      <!-- Severity level string -->\n      <ng-container matColumnDef=\"fhirPath\">\n        <th mat-header-cell *matHeaderCellDef>FHIR path</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          {{validationResultItem?.expression?.[0]}}\n        </td>\n      </ng-container>\n\n      <!-- The location as returned by the server. Note that the resource returned by the  response could be\n      formatted differently then the request resource. What this means is the the line numbers in the response\n      resource many not match those in the request.-->\n      <ng-container matColumnDef=\"location\">\n        <th mat-header-cell *matHeaderCellDef id=\"location-column-header\"> Location</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\" (click)=\"onLocationSelected(validationResultItem)\">\n          <span class=\"location-data\"> {{validationResultItem.location}}</span>\n        </td>\n      </ng-container>\n\n      <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->\n      <ng-container matColumnDef=\"expandedDetail\">\n        <td mat-cell *matCellDef=\"let validationResultItem\" [attr.colspan]=\"displayedColumns?.length\">\n          <div class=\"validation-result-detail\"\n               [@detailExpand]=\"validationResultItem.expanded ? 'expanded' : 'collapsed'\">\n            <div class=\"validation-result-text-value\">\n              {{validationResultItem.diagnostics}}\n            </div>\n          </div>\n        </td>\n      </ng-container>\n\n      <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n      <tr mat-row *matRowDef=\"let validationResultItem; columns: displayedColumns;\"\n          class=\"table-row\"\n          [class.expanded-row]=\"validationResultItem.expanded\">\n      <tr mat-row *matRowDef=\"let row; columns: ['expandedDetail']\" class=\"text-value-row\"></tr>\n\n    </table>\n\n  </div>\n\n  <!-- Resource as returned from the validator. Note that the resource returned from the validator may be\n   formatted differently then the resource we sent to the validator. -->\n  <div class=\"top-padding\" *ngIf=\"resultDetailsExpandBtnShown && apiResponse?.formattedResource\">\n    <div class=\"line-numbers-response\" #numbers>\n      <div *ngFor=\"let item of apiResponse?.formattedResource?.split('\\n'); let i = index\"><div class=\"numbers-response\">{{i + 1}}</div></div>\n    </div>\n    <div class=\"validator-response\">\n      <span *ngFor=\"let item of apiResponse?.formattedResource?.split('\\n'); let i = index\">\n        <pre [ngClass]=\"getLineItemClass(item, i)\" class=\"line-item\" [id]=\"'mark'+ (i+1)\">{{item}}</pre>\n      </span>\n    </div>\n  </div>\n\n</div>\n", styles: ["textarea{display:inline-block;border-color:#ccc;font-size:13px;line-height:16px;width:95%;padding-left:36px;height:50vh;white-space:nowrap;resize:none}.textarea-wrapper{margin-top:10px}.line-numbers{display:inline-block;position:absolute;text-align:-webkit-center;font-family:monospace;width:36px;line-height:16px;padding-top:3px;height:50.2vh;overflow:hidden;background:rgba(0,0,0,.1);border-radius:3px}.box{display:flex}.line-numbers-response{display:inline-block;position:absolute;text-align:-webkit-center;font-family:monospace;width:36px;line-height:16px;overflow:hidden;background:#E8E8E8;border-radius:3px}.numbers{font-size:13px}.validator-response{font-size:13px;line-height:16px;margin-left:36px;width:96%;font-family:monospace;background-color:#f8f8f8;overflow-x:scroll}.mat-radio-button{margin-right:16px;margin-bottom:10px}.file-input{display:none}.close-icon{float:right;color:#5f6368}#spaced-content{display:flex;flex-flow:row wrap}pre{white-space:pre-wrap}td.mat-cell{font-size:13px;font-family:monospace}.location-data{cursor:pointer;color:#3f51b5}.spinner-container{position:absolute;height:100px;width:100px;top:40%;left:50%;margin-left:-50px;margin-top:-50px}td,th{white-space:normal;word-wrap:break-word}#location-column-header{min-width:200px}#severity-column-header{min-width:300px}.left-margin-spacer{margin-left:16px}#error-response{font-size:large;font-weight:700}#validator-title{padding-left:0}table{width:100%}tr.text-value-row{height:0}.validation-result-row td{border-bottom-width:0}.validation-result-detail{overflow:hidden;display:flex}.validation-result-text-value{padding:16px}.expanded-row{background-color:#fafaff}.table-row{font-weight:700}.mat-button-toggle-checked{color:#303f9f;background-color:#e8eaf6;border:1px solid #7986cb}.row-button-wrapper{display:flex;align-items:center}mat-button-toggle{font-weight:700}.mat-button-toggle-disabled{background-color:#f5f5f5;color:#252525;border:1px solid whitesmoke}.mat-column-toggle,.mat-column-icon{width:5%!important}.mat-column-severity{width:10%!important}.mat-column-fhirPath{width:70%!important}.mat-column-location{width:10%!important}.close-button{float:right;right:-8px}.server-error-message-container{border-style:solid;border-width:1px;margin-top:16px;margin-bottom:16px;border-color:#d32f2f}.server-error-status{color:#d32f2f;margin-left:1em;margin-top:1em}.server-error-message-text{margin-left:16px;margin-bottom:16px;font-family:monospace}.filename{font-family:monospace;margin:0 16px}#format-toggle-buttons{width:25%}.content-spacer{flex:1 1 auto}.full-width{width:100%}.warning-mark{background-color:#fff2cc}.error-mark{background-color:#fcc}.info-mark{background-color:#dcedc8}.note-mark{background-color:#e3f2fd}.success-color{color:#28a745}.danger-color{color:#dc3549}.warning-color{color:#ffc107}.top-padding{padding-top:16px}.right-margin-md{margin-right:16px}.left-margin-md{margin-left:16px}.line-item{margin:0;white-space:pre}.right-aligned{display:flex;flex-direction:column;align-items:flex-end}\n"], dependencies: [{ kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { kind: "component", type: i3.MatButton, selector: "    button[mat-button], button[mat-raised-button], button[mat-flat-button],    button[mat-stroked-button]  ", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { kind: "directive", type: i4.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i4.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "component", type: i5.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i6.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { kind: "directive", type: i6.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { kind: "directive", type: i6.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { kind: "directive", type: i6.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { kind: "directive", type: i6.MatCellDef, selector: "[matCellDef]" }, { kind: "directive", type: i6.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }, { kind: "directive", type: i6.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { kind: "directive", type: i6.MatCell, selector: "mat-cell, td[mat-cell]" }, { kind: "component", type: i6.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { kind: "component", type: i6.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { kind: "component", type: i7.MatProgressSpinner, selector: "mat-progress-spinner, mat-spinner", inputs: ["color", "mode", "value", "diameter", "strokeWidth"], exportAs: ["matProgressSpinner"] }, { kind: "directive", type: i8.MatRadioGroup, selector: "mat-radio-group", exportAs: ["matRadioGroup"] }, { kind: "component", type: i8.MatRadioButton, selector: "mat-radio-button", inputs: ["disableRipple", "tabIndex"], exportAs: ["matRadioButton"] }, { kind: "directive", type: i4.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i9.MatCardHeader, selector: "mat-card-header" }, { kind: "directive", type: i9.MatCardTitle, selector: "mat-card-title, [mat-card-title], [matCardTitle]" }, { kind: "directive", type: i10.MatButtonToggleGroup, selector: "mat-button-toggle-group", inputs: ["appearance", "name", "vertical", "value", "multiple", "disabled"], outputs: ["valueChange", "change"], exportAs: ["matButtonToggleGroup"] }, { kind: "component", type: i10.MatButtonToggle, selector: "mat-button-toggle", inputs: ["disableRipple", "aria-label", "aria-labelledby", "id", "name", "value", "tabIndex", "appearance", "checked", "disabled"], outputs: ["change"], exportAs: ["matButtonToggle"] }, { kind: "component", type: i11.MatCheckbox, selector: "mat-checkbox", inputs: ["disableRipple", "color", "tabIndex"], exportAs: ["matCheckbox"] }, { kind: "directive", type: i12.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { kind: "pipe", type: i2.TitleCasePipe, name: "titlecase" }], animations: [
        trigger('detailExpand', [
            state('collapsed', style({ height: '0px', minHeight: '0' })),
            state('expanded', style({ height: '*' })),
            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),
        ]),
    ] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.2", ngImport: i0, type: NgxFhirValidatorComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-ngx-fhir-validator', animations: [
                        trigger('detailExpand', [
                            state('collapsed', style({ height: '0px', minHeight: '0' })),
                            state('expanded', style({ height: '*' })),
                            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),
                        ]),
                    ], template: "<div class=\"spinner-container\" *ngIf=\"isLoading\">\n  <mat-spinner></mat-spinner>\n</div>\n\n<mat-card-header  *ngIf=\"validatorTitle\" id=\"validator-title\">\n  <mat-card-title>{{ validatorTitle }}</mat-card-title>\n</mat-card-header>\n\n\n<!-- The section below renders error messages returned by the validator.-->\n<div class=server-error-message-container *ngIf=\"serverErrorDetected\">\n  <button mat-button class=\"close-button\" color=\"accent\" aria-label=\"Close\" disableRipple\n          (click)=\"onCloseServerErrorMessage()\">\n    <mat-icon>close</mat-icon>\n  </button>\n  <div class=\"server-error-status\"><h2>Server Error Response Status: {{ serverErrorStatus }}</h2></div>\n  <div class=\"server-error-message-text\" *ngFor=\"let serverError of serverErrorList\"\n       [innerText]=\"serverError.diagnostics\"></div>\n</div>\n\n<!-- TODO remove this code when the API code is updated to return 408 on request timeout -->\n<div class=server-error-message-container *ngIf=\"serverTimoutDetected\">\n  <button mat-button class=\"close-button\" color=\"accent\" aria-label=\"Close\" disableRipple\n          (click)=\"serverTimoutDetected = false\">\n    <mat-icon>close</mat-icon>\n  </button>\n  <div class=\"server-error-status\"><h2>Server Timeout Error.</h2></div>\n</div>\n\n<!--Actions available above the FHIR validator input textarea-->\n<div class=\"row-button-wrapper\">\n\n  <!--Select JSON/XML radio group-->\n  <mat-radio-group [(ngModel)]=\"resourceFormat\" [disabled]=isLoading *ngIf=\"validationInputFormat.format == 'xml and json'\" >\n    <mat-radio-button\n      value=\"json\"\n      [checked]=\"resourceFormat =='json'\"\n      (select)=\"resourceFormat = 'json'\">\n      JSON\n    </mat-radio-button>\n    <mat-radio-button\n      value=\"xml\"\n      [checked]=\"resourceFormat =='xml'\"\n      (select)=\"resourceFormat = 'xml'\">\n      XML\n    </mat-radio-button>\n  </mat-radio-group>\n\n  <span class=\"content-spacer\" *ngIf=\"validationInputFormat?.format == 'xml and json'\"></span>\n\n  <!--File upload widget-->\n  <input type=\"file\" class=\"file-input\" (click)=\"fileUpload.value=null\"\n         [accept]=\"validationInputFormat?.accepts?.toString()\"\n         (change)=\"onFileSelected($event)\" #fileUpload>\n\n  <span class=\"filename\" *ngIf=\"validationInputFormat.format == 'xml and json'\">{{fileName}}</span>\n\n  <button mat-raised-button [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\"\n          class=\"upload-btn\"\n          (click)=\"clearUI(); fileUpload.click();\" [disabled]=isLoading>\n    <mat-icon>upload</mat-icon>\n    Upload\n  </button>\n\n  <span class=\"filename\" *ngIf=\"!(validationInputFormat.format == 'xml and json')\">{{fileName}}</span>\n</div>\n\n<!-- FHIR validator text editor-->\n<div class=\"textarea-wrapper\">\n      <div class=\"line-numbers\" #numbers>\n        <div *ngFor=\"let i of getLineNumbers();\"><div class=\"numbers\">{{i}}</div></div>\n      </div>\n      <textarea\n        #validatorInput\n        rows=\"30\"\n        [(ngModel)]=\"fhirResource\"\n        (ngModelChange)=\"onResourceContentChanged.emit(fhirResource)\"\n        [ngStyle]=\"{'border-color': (!!validationErrorStr) ? 'red': null }\"\n        (paste)=\"onPasteFhirResource($event)\"\n        [disabled]=\"isLoading\"\n        (input)=\"lineNumbers()\"\n        (scroll)=\"numbers.scrollTop = validatorInput.scrollTop\"\n      >\n      </textarea>\n</div>\n\n<!--Actions available below the FHIR validator input textarea-->\n<div class=\"row-button-wrapper\" *ngIf=\"formatResourceBtnShown || clearValidatorBtnShown || submitBtnShown || validationErrorStr\">\n\n  <span *ngIf=\"submitBtnShown && (submitBtnAlignment=='left') && !isLoading\">\n    <button mat-raised-button [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\" class=\"button\"\n            (click)=\"validateFhirResource(fhirResource, resourceFormat)\">\n      <mat-icon>send</mat-icon>\n      Submit\n    </button>\n  </span>\n\n  <button *ngIf=\"formatResourceBtnShown && !isLoading\" [ngClass]=\"{'left-margin-spacer': submitBtnAlignment=='left'}\" mat-raised-button\n          [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\"\n          (click)=\"onFormatInput();\"\n          [disabled]=\"!fhirResource\">\n    <mat-icon>code</mat-icon>\n    Format Input\n  </button>\n\n  <span class=\"content-spacer\"></span>\n  <span *ngIf=\"validationFinished\" id=\"error-response\">\n    <span class=\"danger-color\" *ngIf=\"!!validationErrorStr && !isValidResource\">{{validationErrorStr}}</span>\n    <span class=\"success-color\" *ngIf=\"isValidResource\"> This is a valid FHIR resource.</span>\n  </span>\n\n  <span class=\"content-spacer\"></span>\n\n  <button *ngIf=\"clearValidatorBtnShown && !isLoading\"\n    mat-raised-button color=\"success\" class=\"button\"\n    (click)=\"onClear()\">\n    <mat-icon>clear</mat-icon>\n    Clear Validator\n  </button>\n\n  <span class=\"left-margin-spacer\" *ngIf=\"submitBtnShown && (submitBtnAlignment =='right') && !isLoading\">\n    <button mat-raised-button color=\"accent\" class=\"button\"\n            (click)=\"validateFhirResource(fhirResource, resourceFormat)\">\n      <mat-icon>send</mat-icon>\n      {{ submitBtnTitle}}\n    </button>\n  </span>\n</div>\n\n<div class=\"row-button-wrapper top-padding\" *ngIf=\"isLoading && cancelValidationBtnShown\">\n  <span class=\"content-spacer\"></span>\n  <button mat-raised-button color=\"warn\" (click)=\"onCancelValidation()\">\n    <mat-icon>cancel</mat-icon>\n    Cancel Validation\n  </button>\n</div>\n\n<!-- Actions available after validator has processed data-->\n\n<div *ngIf=\"apiResponse?.issue && !isLoading\">\n  <div class=\"top-padding\">\n\n    <div (click)=\"onFilterResults()\">\n      <mat-button-toggle-group name=\"severity level filter\" [formControl]=\"severityLevelsFormControl\"\n                               aria-label=\"severity level filter\" multiple class=\"full-width\">\n        <mat-button-toggle\n          id=\"format-toggle-buttons\"\n          *ngFor=\"let level of severityLevels\"\n          [value]=\"level\"\n          [disabled]=\"!isFilterEnabled(level)\">\n          <!-- In order to synchronise the state of the button with the state of the checkbox, we simply show or hide\n          selected or deselected checkbox.-->\n          <mat-checkbox\n            *ngIf=\"severityLevelsFormControl?.value.indexOf(level) != -1\"\n            color=\"primary\"\n            [checked]=true\n            [disabled]=\"!isFilterEnabled(level)\"\n            [disableRipple]=\"true\"\n          >\n          </mat-checkbox>\n          <mat-checkbox\n            *ngIf=\"severityLevelsFormControl?.value.indexOf(level) === -1\"\n            color=\"primary\"\n            [checked]=false\n            [disabled]=\"!isFilterEnabled(level)\"\n            [disableRipple]=\"true\"\n          >\n          </mat-checkbox>\n          {{level | titlecase }} ({{getCount(level)}})\n        </mat-button-toggle>\n      </mat-button-toggle-group>\n    </div>\n\n    <div class=\"top-padding box\" *ngIf=\"validationResultsExpanded\">\n      <button mat-raised-button color=primary *ngIf=\"!resultDetailsExpandBtnShown\" (click)=\"resultDetailsExpandBtnShown = true\">\n        <mat-icon>expand_more</mat-icon> Expand Validation Results\n      </button>\n      <button mat-raised-button color=primary *ngIf=\"resultDetailsExpandBtnShown\" (click)=\"resultDetailsExpandBtnShown = false\">\n        <mat-icon>expand_less</mat-icon> Collapse Validation Results\n      </button>\n      <span class=\"content-spacer\"></span>\n      <button mat-raised-button (click)=\"onExportToPdf()\" *ngIf=\"exportResultsButtonShown\"\n              [disabled]=\"!(dataSource?.data?.length>0)\">\n        <mat-icon>folder_zip</mat-icon>\n        Export Results (.zip)\n      </button>\n    </div>\n\n    <div *ngIf=\"severityLevelsFormControl?.value?.length === 0\">\n      Please select severity level to see the result.\n    </div>\n\n    <div class=\"top-padding box\" *ngIf=\"(!validationResultsExpanded) && exportResultsButtonShown\">\n      <button mat-stroked-button (click)=\"onExportToPdf()\"\n              [disabled]=\"!(dataSource?.data?.length>0)\" class=\"left-margin-md\">\n        <mat-icon>folder_zip</mat-icon>\n        Export Results (.zip)\n      </button>\n    </div>\n\n    <table\n      mat-table [dataSource]=\"dataSource\" multiTemplateDataRows\n      *ngIf=\"severityLevelsFormControl?.value?.length > 0 && resultDetailsExpandBtnShown\">\n\n      <!-- First column contains expand/collapse widget. The user can chose to expand/collapse all rows,\n       as well as expand/collapse individual rows. Note that the expand/collapse all can be toggled automatically\n       based the state of the individual expand/collapse rows. For example if all rows are expanded and \"expand all\"\n       is rendered, we automatically hide it end render \"collapse all\" -->\n      <ng-container matColumnDef=\"toggle\">\n        <th mat-header-cell *matHeaderCellDef (click)=\"toggle()\">\n          <mat-icon *ngIf=\"!allExpanded\" class=\"pointer\" matTooltip=\"Expand All\" aria-label=\"expand all\">\n            expand_more\n          </mat-icon>\n          <mat-icon *ngIf=\"allExpanded\" class=\"pointer\" matTooltip=\"Collapse All\" aria-label=\"collapse all\">\n            expand_less\n          </mat-icon>\n        </th>\n        <td mat-cell *matCellDef=\"let validationResultItem\" class=\"pointer\"\n            (click)=\"validationResultItem.expanded = !validationResultItem.expanded; checkExpandCollapseAllStatus()\">\n          <mat-icon *ngIf=\"!validationResultItem.expanded\" aria-label=\"expand\">\n            expand_more\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.expanded\" aria-label=\"collapse\">\n            expand_less\n          </mat-icon>\n        </td>\n      </ng-container>\n\n      <!-- Severity level icons -->\n      <ng-container matColumnDef=\"icon\">\n        <th mat-header-cell *matHeaderCellDef></th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Error'\"\n                    class=\"danger-color\">error\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Warning'\"\n                    class=\"warning-color\">warning\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Information'\"\n                    class=\"success-color\">info\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Note'\"\n                    class=\"md-primary-color\">edit_note\n          </mat-icon>\n        </td>\n      </ng-container>\n\n      <!-- Severity level string -->\n      <ng-container matColumnDef=\"severity\">\n        <th mat-header-cell *matHeaderCellDef>Severity</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          {{validationResultItem.severity}}\n        </td>\n      </ng-container>\n\n      <!-- Severity level string -->\n      <ng-container matColumnDef=\"fhirPath\">\n        <th mat-header-cell *matHeaderCellDef>FHIR path</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          {{validationResultItem?.expression?.[0]}}\n        </td>\n      </ng-container>\n\n      <!-- The location as returned by the server. Note that the resource returned by the  response could be\n      formatted differently then the request resource. What this means is the the line numbers in the response\n      resource many not match those in the request.-->\n      <ng-container matColumnDef=\"location\">\n        <th mat-header-cell *matHeaderCellDef id=\"location-column-header\"> Location</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\" (click)=\"onLocationSelected(validationResultItem)\">\n          <span class=\"location-data\"> {{validationResultItem.location}}</span>\n        </td>\n      </ng-container>\n\n      <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->\n      <ng-container matColumnDef=\"expandedDetail\">\n        <td mat-cell *matCellDef=\"let validationResultItem\" [attr.colspan]=\"displayedColumns?.length\">\n          <div class=\"validation-result-detail\"\n               [@detailExpand]=\"validationResultItem.expanded ? 'expanded' : 'collapsed'\">\n            <div class=\"validation-result-text-value\">\n              {{validationResultItem.diagnostics}}\n            </div>\n          </div>\n        </td>\n      </ng-container>\n\n      <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n      <tr mat-row *matRowDef=\"let validationResultItem; columns: displayedColumns;\"\n          class=\"table-row\"\n          [class.expanded-row]=\"validationResultItem.expanded\">\n      <tr mat-row *matRowDef=\"let row; columns: ['expandedDetail']\" class=\"text-value-row\"></tr>\n\n    </table>\n\n  </div>\n\n  <!-- Resource as returned from the validator. Note that the resource returned from the validator may be\n   formatted differently then the resource we sent to the validator. -->\n  <div class=\"top-padding\" *ngIf=\"resultDetailsExpandBtnShown && apiResponse?.formattedResource\">\n    <div class=\"line-numbers-response\" #numbers>\n      <div *ngFor=\"let item of apiResponse?.formattedResource?.split('\\n'); let i = index\"><div class=\"numbers-response\">{{i + 1}}</div></div>\n    </div>\n    <div class=\"validator-response\">\n      <span *ngFor=\"let item of apiResponse?.formattedResource?.split('\\n'); let i = index\">\n        <pre [ngClass]=\"getLineItemClass(item, i)\" class=\"line-item\" [id]=\"'mark'+ (i+1)\">{{item}}</pre>\n      </span>\n    </div>\n  </div>\n\n</div>\n", styles: ["textarea{display:inline-block;border-color:#ccc;font-size:13px;line-height:16px;width:95%;padding-left:36px;height:50vh;white-space:nowrap;resize:none}.textarea-wrapper{margin-top:10px}.line-numbers{display:inline-block;position:absolute;text-align:-webkit-center;font-family:monospace;width:36px;line-height:16px;padding-top:3px;height:50.2vh;overflow:hidden;background:rgba(0,0,0,.1);border-radius:3px}.box{display:flex}.line-numbers-response{display:inline-block;position:absolute;text-align:-webkit-center;font-family:monospace;width:36px;line-height:16px;overflow:hidden;background:#E8E8E8;border-radius:3px}.numbers{font-size:13px}.validator-response{font-size:13px;line-height:16px;margin-left:36px;width:96%;font-family:monospace;background-color:#f8f8f8;overflow-x:scroll}.mat-radio-button{margin-right:16px;margin-bottom:10px}.file-input{display:none}.close-icon{float:right;color:#5f6368}#spaced-content{display:flex;flex-flow:row wrap}pre{white-space:pre-wrap}td.mat-cell{font-size:13px;font-family:monospace}.location-data{cursor:pointer;color:#3f51b5}.spinner-container{position:absolute;height:100px;width:100px;top:40%;left:50%;margin-left:-50px;margin-top:-50px}td,th{white-space:normal;word-wrap:break-word}#location-column-header{min-width:200px}#severity-column-header{min-width:300px}.left-margin-spacer{margin-left:16px}#error-response{font-size:large;font-weight:700}#validator-title{padding-left:0}table{width:100%}tr.text-value-row{height:0}.validation-result-row td{border-bottom-width:0}.validation-result-detail{overflow:hidden;display:flex}.validation-result-text-value{padding:16px}.expanded-row{background-color:#fafaff}.table-row{font-weight:700}.mat-button-toggle-checked{color:#303f9f;background-color:#e8eaf6;border:1px solid #7986cb}.row-button-wrapper{display:flex;align-items:center}mat-button-toggle{font-weight:700}.mat-button-toggle-disabled{background-color:#f5f5f5;color:#252525;border:1px solid whitesmoke}.mat-column-toggle,.mat-column-icon{width:5%!important}.mat-column-severity{width:10%!important}.mat-column-fhirPath{width:70%!important}.mat-column-location{width:10%!important}.close-button{float:right;right:-8px}.server-error-message-container{border-style:solid;border-width:1px;margin-top:16px;margin-bottom:16px;border-color:#d32f2f}.server-error-status{color:#d32f2f;margin-left:1em;margin-top:1em}.server-error-message-text{margin-left:16px;margin-bottom:16px;font-family:monospace}.filename{font-family:monospace;margin:0 16px}#format-toggle-buttons{width:25%}.content-spacer{flex:1 1 auto}.full-width{width:100%}.warning-mark{background-color:#fff2cc}.error-mark{background-color:#fcc}.info-mark{background-color:#dcedc8}.note-mark{background-color:#e3f2fd}.success-color{color:#28a745}.danger-color{color:#dc3549}.warning-color{color:#ffc107}.top-padding{padding-top:16px}.right-margin-md{margin-right:16px}.left-margin-md{margin-left:16px}.line-item{margin:0;white-space:pre}.right-aligned{display:flex;flex-direction:column;align-items:flex-end}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.FhirValidatorService }]; }, propDecorators: { validatorTitle: [{
                type: Input
            }], validationResultsExpanded: [{
                type: Input
            }], resultDetailsExpandBtnShown: [{
                type: Input
            }], formatResourceBtnShown: [{
                type: Input
            }], clearValidatorBtnShown: [{
                type: Input
            }], submitBtnShown: [{
                type: Input
            }], exportResultsButtonShown: [{
                type: Input
            }], submitBtnTitle: [{
                type: Input
            }], validationInputFormat: [{
                type: Input
            }], maxFileSize: [{
                type: Input
            }], submitBtnAlignment: [{
                type: Input
            }], cancelValidationBtnShown: [{
                type: Input
            }], buttonTxtColor: [{
                type: Input
            }], buttonBackgroundColor: [{
                type: Input
            }], onValidation: [{
                type: Output
            }], onApiError: [{
                type: Output
            }], onResourceContentChanged: [{
                type: Output
            }], inputRef: [{
                type: ViewChild,
                args: ['validatorInput', { static: false, read: ElementRef }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWZoaXItdmFsaWRhdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1maGlyLXZhbGlkYXRvci9zcmMvbGliL2NvbXBvbmVudHMvbmd4LWZoaXItdmFsaWRhdG9yLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1maGlyLXZhbGlkYXRvci9zcmMvbGliL2NvbXBvbmVudHMvbmd4LWZoaXItdmFsaWRhdG9yLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBQ0wsTUFBTSxFQUNOLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUMsa0JBQWtCLEVBQUMsTUFBTSxrQ0FBa0MsQ0FBQztBQUNwRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUNuRCxPQUFPLEVBQUMsa0JBQWtCLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUkzRCxPQUFPLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBQyxNQUFNLHFCQUFxQixDQUFDO0FBRy9FLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sS0FBSyxTQUFTLE1BQU0saUJBQWlCLENBQUM7QUFFN0MsT0FBTyxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7O0FBa0IvQixNQUFNLE9BQU8seUJBQXlCO0lBK0NwQyxZQUNVLG9CQUEwQztRQUExQyx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXNCO1FBL0MzQyxtQkFBYyxHQUFXLEVBQUUsQ0FBQztRQUM1Qiw4QkFBeUIsR0FBWSxLQUFLLENBQUMsQ0FBQywyQ0FBMkM7UUFDdkYsZ0NBQTJCLEdBQVksSUFBSSxDQUFD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dkMsVUFBVSxDQUFDLHdCQUF3QixFQUFFLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDO3lCQUN0RixDQUFDO3FCQUNIOzJHQUtRLGNBQWM7c0JBQXRCLEtBQUs7Z0JBQ0cseUJBQXlCO3NCQUFqQyxLQUFLO2dCQUNHLDJCQUEyQjtzQkFBbkMsS0FBSztnQkFDRyxzQkFBc0I7c0JBQTlCLEtBQUs7Z0JBQ0csc0JBQXNCO3NCQUE5QixLQUFLO2dCQUNHLGNBQWM7c0JBQXRCLEtBQUs7Z0JBQ0csd0JBQXdCO3NCQUFoQyxLQUFLO2dCQUNHLGNBQWM7c0JBQXRCLEtBQUs7Z0JBQ0cscUJBQXFCO3NCQUE3QixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csa0JBQWtCO3NCQUExQixLQUFLO2dCQUNHLHdCQUF3QjtzQkFBaEMsS0FBSztnQkFDRyxjQUFjO3NCQUF0QixLQUFLO2dCQUNHLHFCQUFxQjtzQkFBN0IsS0FBSztnQkFFSSxZQUFZO3NCQUFyQixNQUFNO2dCQUNHLFVBQVU7c0JBQW5CLE1BQU07Z0JBQ0csd0JBQXdCO3NCQUFqQyxNQUFNO2dCQUV1RCxRQUFRO3NCQUFyRSxTQUFTO3VCQUFDLGdCQUFnQixFQUFDLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIFZpZXdDaGlsZFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7VmFsaWRhdG9yQ29uc3RhbnRzfSBmcm9tIFwiLi4vcHJvdmlkZXJzL3ZhbGlkYXRvci1jb25zdGFudHNcIjtcbmltcG9ydCB7IFVudHlwZWRGb3JtQ29udHJvbH0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XG5pbXBvcnQge01hdFRhYmxlRGF0YVNvdXJjZX0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsL3RhYmxlXCI7XG5pbXBvcnQge0ZoaXJWYWxpZGF0b3JTZXJ2aWNlfSBmcm9tIFwiLi4vc2VydmljZXMvZmhpci12YWxpZGF0b3Iuc2VydmljZVwiO1xuaW1wb3J0IHtSZXNwb25zZUl0ZW19IGZyb20gXCIuLi9tb2RhbC9yZXNwb25zZS1pdGVtXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25SZXN1bHRzfSBmcm9tIFwiLi4vbW9kYWwvdmFsaWRhdGlvbi1yZXN1bHRzXCI7XG5pbXBvcnQge2FuaW1hdGUsIHN0YXRlLCBzdHlsZSwgdHJhbnNpdGlvbiwgdHJpZ2dlcn0gZnJvbSBcIkBhbmd1bGFyL2FuaW1hdGlvbnNcIjtcbmltcG9ydCB7QXBpUmVzcG9uc2V9IGZyb20gXCIuLi9tb2RhbC9hcGktcmVzcG9uc2VcIjtcbmltcG9ydCB7VmFsaWRhdG9ySW5wdXR9IGZyb20gXCIuLi9tb2RhbC92YWxpZGF0b3ItaW5wdXQtZm9ybWF0XCI7XG5pbXBvcnQgKiBhcyBKU1ppcCBmcm9tICdqc3ppcCc7XG5pbXBvcnQgKiBhcyBhdXRvVGFibGUgZnJvbSBcImpzcGRmLWF1dG90YWJsZVwiO1xuaW1wb3J0ICogYXMganNQREYgZnJvbSBcImpzcGRmXCI7XG5pbXBvcnQgKiBhcyBqc3BkZiBmcm9tIFwianNwZGZcIjtcblxuXG5leHBvcnQgdHlwZSBTdWJtaXRCdXR0b25BbGlnbm1lbnQgPSAnbGVmdCcgfCAncmlnaHQnO1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbGliLW5neC1maGlyLXZhbGlkYXRvcicsXG4gIHRlbXBsYXRlVXJsOiAnbmd4LWZoaXItdmFsaWRhdG9yLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJ25neC1maGlyLXZhbGlkYXRvci5jb21wb25lbnQuY3NzJ10sXG4gIGFuaW1hdGlvbnM6IFtcbiAgICB0cmlnZ2VyKCdkZXRhaWxFeHBhbmQnLCBbXG4gICAgICBzdGF0ZSgnY29sbGFwc2VkJywgc3R5bGUoe2hlaWdodDogJzBweCcsIG1pbkhlaWdodDogJzAnfSkpLFxuICAgICAgc3RhdGUoJ2V4cGFuZGVkJywgc3R5bGUoe2hlaWdodDogJyonfSkpLFxuICAgICAgdHJhbnNpdGlvbignZXhwYW5kZWQgPD0+IGNvbGxhcHNlZCcsIGFuaW1hdGUoJzIyNW1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKScpKSxcbiAgICBdKSxcbiAgXSxcbn0pXG5cblxuZXhwb3J0IGNsYXNzIE5neEZoaXJWYWxpZGF0b3JDb21wb25lbnQge1xuICBASW5wdXQoKSB2YWxpZGF0b3JUaXRsZTogc3RyaW5nID0gJyc7XG4gIEBJbnB1dCgpIHZhbGlkYXRpb25SZXN1bHRzRXhwYW5kZWQ6IGJvb2xlYW4gPSBmYWxzZTsgLy8gVmFsaWRhdGlvbiByZXN1bHRzIGRldGFpbHMgaW5pdGlhbCBzdGF0ZVxuICBASW5wdXQoKSByZXN1bHREZXRhaWxzRXhwYW5kQnRuU2hvd246IGJvb2xlYW4gPSB0cnVlOyAvLyBTaG93L2hpZGUgRXhwYW5kIFZhbGlkYXRpb24gUmVzdWx0cyBidG5cbiAgQElucHV0KCkgZm9ybWF0UmVzb3VyY2VCdG5TaG93bjogYm9vbGVhbiA9IGZhbHNlOyAvLyBTaG93L2hpZGUgRm9ybWF0IFJlc291cmNlIGJ0blxuICBASW5wdXQoKSBjbGVhclZhbGlkYXRvckJ0blNob3duOiBib29sZWFuID0gdHJ1ZTsgLy8gU2hvdy9oaWRlIENsZWFyIFZhbGlkYXRvciBidG5cbiAgQElucHV0KCkgc3VibWl0QnRuU2hvd246IGJvb2xlYW4gPSB0cnVlOyAvLyBTaG93L2hpZGUgU3VibWl0IGJ0blxuICBASW5wdXQoKSBleHBvcnRSZXN1bHRzQnV0dG9uU2hvd24gPSB0cnVlO1xuICBASW5wdXQoKSBzdWJtaXRCdG5UaXRsZTogc3RyaW5nID0gJ1N1Ym1pdCc7IC8vVGhlIHN1Ym1pdCBidXR0b24gdGl0bGUuIFwiU3VibWl0XCIgaXMgZ2VuZXJpYyBuYW1lIGFuZCBvdGhlciBhcHBzIG1heSB3YW50IHRvIGNoYW5nZSBpdFxuICBASW5wdXQoKSB2YWxpZGF0aW9uSW5wdXRGb3JtYXQ6IFZhbGlkYXRvcklucHV0ID0ge2Zvcm1hdDogJ2pzb24nLCBhY2NlcHRzOiAnLmpzb24nfTtcbiAgQElucHV0KCkgbWF4RmlsZVNpemUgPSAyNTAwMDAgLy8gTWF4IGFsbG93ZWQgZmlsZSBzaXplIGlzIDI1MEtCXG4gIEBJbnB1dCgpIHN1Ym1pdEJ0bkFsaWdubWVudDogU3VibWl0QnV0dG9uQWxpZ25tZW50ID0gJ3JpZ2h0JzsgLy8gVGhlIGRlZmF1bHQgbG9jYXRpb24gZm9yIHRoZSBTdWJtaXQgYnRuXG4gIEBJbnB1dCgpIGNhbmNlbFZhbGlkYXRpb25CdG5TaG93bjogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIGJ1dHRvblR4dENvbG9yOiBzdHJpbmcgID0gJ3doaXRlJztcbiAgQElucHV0KCkgYnV0dG9uQmFja2dyb3VuZENvbG9yPScjNDg1OEI4J1xuXG4gIEBPdXRwdXQoKSBvblZhbGlkYXRpb24gPSBuZXcgRXZlbnRFbWl0dGVyPFZhbGlkYXRpb25SZXN1bHRzPigpO1xuICBAT3V0cHV0KCkgb25BcGlFcnJvciA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgb25SZXNvdXJjZUNvbnRlbnRDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgQFZpZXdDaGlsZCgndmFsaWRhdG9ySW5wdXQnLHtzdGF0aWM6ZmFsc2UsIHJlYWQ6IEVsZW1lbnRSZWZ9KSBpbnB1dFJlZjogYW55O1xuXG4gIGFwaVJlc3BvbnNlOiBBcGlSZXNwb25zZSB8IG51bGw7XG4gIGZoaXJSZXNvdXJjZTogc3RyaW5nID0gJycvLyBUaGUgUmVzb3VyY2UuXG4gIHJlc291cmNlRm9ybWF0ID0gJ2pzb24nOyAvLyBUaGUgcmVzb3VyY2UgZm9ybWF0IGNvdWxkIGJlIEpTT04gb3IgWE1MLCB3aXRoIEpTT04gYmVpbmcgdGhlIGRlZmF1bHQgZm9ybWF0LlxuICBmaWxlTmFtZTogc3RyaW5nID0gJyc7IC8vIE5hbWUgb2YgdGhlIGZpbGUgdXBsb2FkZWQgYnkgdGhlIHVzZXIuIFdlIG5lZWQgdGhpcyB0byByZW5kZXIgdGhlIGZpbGVuYW1lIGluIHRoZSBVSS5cbiAgdmFsaWRhdGlvbkVycm9yU3RyOiBzdHJpbmcgPSAnJzsgLy8gV2UgdXNlIHRoaXMgdmFsdWUgdG8gc3RvcmUgcHJlbGltaW5hcnkgZXJyb3IgbWVzc2FnZXMgb3IgYSBnZW5lcmljIGVycm9yIG1lc3NhZ2UuXG4gIGhhc1Jlc3BvbnNlRGF0YSA9IGZhbHNlOyAgLy8gSW5kaWNhdGVzIGlmIHRoZSByZXNwb25zZSBnZW5lcmF0ZWQgYW55IG1lc3NhZ2VzLiBJZiB0cnVlLCB3ZSByZW5kZXIgdGhlIHJlcG9ydFxuICBwYXJzZWRGaGlyUmVzb3VyY2U6IHN0cmluZyA9ICcnOyAvLyBXZSBzdG9yZSB2YWx1ZSBvZiB0aGUgdmFsaWRhdG9yIHJlc3VsdCBpbiBvcmRlciB0byBwcmVzZW50IGl0IHRvIHRoZSB1c2VyLlxuICBkaXNwbGF5ZWRDb2x1bW5zOiBzdHJpbmdbXTtcbiAgaXNMb2FkaW5nID0gZmFsc2U7XG4gIGFsbEV4cGFuZGVkID0gdHJ1ZTsgLy8gVXNlZCB0byByZW5kZXIgY29sbGFwc2VkL2V4cGFuZGVkIGFsbCBpY29uIGFzIHdlbGwgYXMgY2FsY3VsYXRlIGlmIGFsbCByZXN1bHRzIGFyZSBleHBhbmRlZC9jb2xsYXBzZWRcbiAgc2V2ZXJpdHlMZXZlbHMgPSBWYWxpZGF0b3JDb25zdGFudHMuU0VWRVJJVFlfTEVWRUxTO1xuICBzZXZlcml0eUxldmVsc0Zvcm1Db250cm9sOiBVbnR5cGVkRm9ybUNvbnRyb2w7IC8vIEEgc2ltcGxlIGZvcm0gY29udHJvbCB1c2VkIGZvciBmaWx0ZXJpbmcgdGhlIHJlc3VsdHMuXG4gIGRhdGFTb3VyY2U6IE1hdFRhYmxlRGF0YVNvdXJjZTxhbnk+Oy8vIERhdGEgc291cmNlIGZvciB0aGUgcmVwb3J0IHRhYmxlLlxuICB2YWxpZGF0aW9uRmluaXNoZWQgPSBmYWxzZTtcbiAgaXNWYWxpZFJlc291cmNlID0gZmFsc2U7IC8vIFdlIHVzZSB0aGlzIHRvIHJlbmRlciB0aGUgc3VjY2VzcyBtZXNzYWdlXG4gIHNlcnZlckVycm9yRGV0ZWN0ZWQgPSBmYWxzZTsgLy8gVHJhY2tzIGlmIHRoZSBzZXJ2ZXIgaGFzIHJlc3BvbmRlZCB3aXRoIGFuIGVycm9yICg0MDQsIDUwMCkuIFVzZWQgdG8gcmVuZGVyIHRoZSBlcnJvciBpbiBVSS5cbiAgc2VydmVyRXJyb3JMaXN0OiBhbnkgW10gPSBbXTsgLy8gU3RvcmUgdGhlIGRhdGEgZnJvbSB0aGUgT3BlcmF0aW9uT3V0Y29tZSByZXNvdXJjZVxuICBzZXJ2ZXJFcnJvclN0YXR1czogc3RyaW5nID0gJyc7IC8vIFdlIHN0b3JlIHRoZSBlcnJvciByZXNwb25zZSBzdGF0dXMgaGVyZSAoaS5lLiA0MDQsIDUwMClcbiAgbGluZXMgOiBudW1iZXIgPSAxO1xuICB3aWR0aCA6IG51bWJlciA9IDA7XG5cbiAgLy9UT0RPIHJlbW92ZSB0aGlzIGNvZGUgd2hlbiB0aGUgQVBJIHJldHVybnMgYSB0aW1lb3V0IGVycm9yXG4gIHNlcnZlclRpbW91dERldGVjdGVkID0gZmFsc2U7XG4gIFNFUlZFUl9USU1FT1VUX0lOVEVSVkFMID0gMjQwMDAwOyAvL2ZvdXIgbWludXRlc1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZmhpclZhbGlkYXRvclNlcnZpY2U6IEZoaXJWYWxpZGF0b3JTZXJ2aWNlLFxuICApIHtcbiAgICB0aGlzLmRpc3BsYXllZENvbHVtbnMgPSBWYWxpZGF0b3JDb25zdGFudHMuRElTUExBWUVEX0NPTFVNTlM7XG4gICAgdGhpcy5zZXZlcml0eUxldmVsc0Zvcm1Db250cm9sID0gbmV3IFVudHlwZWRGb3JtQ29udHJvbCh0aGlzLnNldmVyaXR5TGV2ZWxzKTtcbiAgICB0aGlzLmRhdGFTb3VyY2UgPSBuZXcgTWF0VGFibGVEYXRhU291cmNlPGFueVtdPigpO1xuICAgIHRoaXMuYXBpUmVzcG9uc2UgPSBudWxsO1xuICB9XG5cbiAgZm9ybWF0RmhpclJlc291cmNlKCl7XG4gICAgaWYodGhpcy5maGlyUmVzb3VyY2Upe1xuICAgICAgaWYodGhpcy5yZXNvdXJjZUZvcm1hdCA9PT0gJ2pzb24nICYmIHRoaXMuZmhpclZhbGlkYXRvclNlcnZpY2UuaXNKc29uKHRoaXMuZmhpclJlc291cmNlKSl7XG4gICAgICAgIHRoaXMuZmhpclJlc291cmNlID0gdGhpcy5maGlyVmFsaWRhdG9yU2VydmljZS5iZWF1dGlmeUpTT04odGhpcy5maGlyUmVzb3VyY2UpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZih0aGlzLnJlc291cmNlRm9ybWF0ID09PSAneG1sJyAmJiB0aGlzLmZoaXJWYWxpZGF0b3JTZXJ2aWNlLmlzWG1sU3RyaW5nKHRoaXMuZmhpclJlc291cmNlKSl7XG4gICAgICAgIHRoaXMuZmhpclJlc291cmNlID0gdGhpcy5maGlyVmFsaWRhdG9yU2VydmljZS5iZWF1dGlmeVhNTCh0aGlzLmZoaXJSZXNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGluZU51bWJlcnMoKVxuICB9XG5cbiAgbGluZU51bWJlcnMoKSB7XG4gICAgY29uc3QgbGluZWRTdHJpbmdzID0gdGhpcy5maGlyUmVzb3VyY2Uuc3BsaXQoL1tcXG5cXHJdL2cpO1xuICAgIHRoaXMubGluZXMgPSBsaW5lZFN0cmluZ3MubGVuZ3RoO1xuICAgIHRoaXMud2lkdGggPSB0aGlzLmlucHV0UmVmLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgY29uc3QgY2hhckluTGluZXMgPSB0aGlzLndpZHRoIC8gVmFsaWRhdG9yQ29uc3RhbnRzLkZPTlRfV0lEVEg7XG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZWRTdHJpbmdzKSB7XG4gICAgICBpZiAobGluZS5sZW5ndGggPiBjaGFySW5MaW5lcykge1xuICAgICAgICB0aGlzLmxpbmVzID0gdGhpcy5saW5lcyArIChsaW5lLmxlbmd0aCAvIGNoYXJJbkxpbmVzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldExpbmVOdW1iZXJzKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHtsZW5ndGg6IHRoaXMubGluZXN9LCAoXywgaSkgPT4gKGkgKyAxKS50b1N0cmluZygpKTtcbiAgfVxuXG4gIC8vIEl0IGlzIGltcG9ydGFudCB0aGUgZm9ybWF0IGlzIHdvcmtpbmcgd2l0aCBcImJlc3QgZWZmb3J0XCJcbiAgLy8gVGhhdCBpcyBpdCBtYXkgb3IgbWF5IG5vdCBmb3JtYXQgdGhlIHRleHQgcHJvcGVybHkgYW5kIHJlcXVpcmUgZXh0ZW5zaXZlIHRlc3RpbmcgdG8gdmFsaWRhdGUgaXRzIG9wZXJhdGlvbi5cbiAgb25Gb3JtYXRJbnB1dCgpIHtcbiAgICB0aGlzLmZvcm1hdEZoaXJSZXNvdXJjZSgpXG4gICAgdGhpcy5maGlyVmFsaWRhdG9yU2VydmljZS5zaG93U3VjY2Vzc01lc3NhZ2UoXCJGb3JtYXR0aW5nIEF0dGVtcHRlZC5cIik7XG4gIH1cblxuICBjbGVhclVJKCl7XG4gICAgdGhpcy5maGlyUmVzb3VyY2U9Jyc7XG4gICAgdGhpcy5maWxlTmFtZT0nJ1xuICAgIHRoaXMuY2xlYXJWYWxpZGF0aW9uRXJyb3JzKCk7XG4gICAgdGhpcy5vblJlc291cmNlQ29udGVudENoYW5nZWQuZW1pdCh0aGlzLmZoaXJSZXNvdXJjZSk7XG4gIH1cblxuICBvbkNsZWFyKCl7XG4gICAgdGhpcy5jbGVhclVJKCk7XG4gIH1cblxuICBvbkZpbGVTZWxlY3RlZChldmVudDogYW55KSB7XG5cbiAgICBjb25zdCBmaWxlOiBGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuXG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIGlmKGZpbGUuc2l6ZSA+IHRoaXMubWF4RmlsZVNpemUpe1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmlsZSB0b28gYmlnXCIpXG4gICAgICAgIHRoaXMuZmhpclZhbGlkYXRvclNlcnZpY2Uuc2hvd0Vycm9yTWVzc2FnZShcIlRoaXMgZmlsZSBleGNlZWRzIFwiICsgdGhpcy5tYXhGaWxlU2l6ZSAvICAxMDAwICsgXCJrYiBhbmQgY2Fubm90IGJlIHByb2Nlc3NlZFwiKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBhdXRvIHRvZ2dsZSB0aGUgZmlsZSB0eXBlIHJhZGlvIGJ1dHRvbnNcbiAgICAgICAgaWYgKGZpbGUudHlwZSA9PT0gXCJ0ZXh0L3htbFwiKSB7XG4gICAgICAgICAgdGhpcy5yZXNvdXJjZUZvcm1hdCA9ICd4bWwnO1xuICAgICAgICB9IGVsc2UgaWYgKFwiYXBwbGljYXRpb24vanNvblwiKSB7XG4gICAgICAgICAgdGhpcy5yZXNvdXJjZUZvcm1hdCA9ICdqc29uJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldCB0aGUgZmlsZW5hbWUgaW4gdGhlIFVJXG4gICAgICAgIHRoaXMuZmlsZU5hbWUgPSBmaWxlLm5hbWU7XG5cbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSwgXCJVVEYtOFwiKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmZoaXJSZXNvdXJjZSA9IHJlYWRlci5yZXN1bHQgYXMgc3RyaW5nO1xuICAgICAgICAgIHRoaXMub25SZXNvdXJjZUNvbnRlbnRDaGFuZ2VkLmVtaXQodGhpcy5maGlyUmVzb3VyY2UpO1xuICAgICAgICAgIHRoaXMuZm9ybWF0RmhpclJlc291cmNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5maGlyVmFsaWRhdG9yU2VydmljZS5zaG93RXJyb3JNZXNzYWdlKFwiVW5hYmxlIHRvIG9wZW4gdGhlIGZpbGUuXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmZoaXJWYWxpZGF0b3JTZXJ2aWNlLnNob3dFcnJvck1lc3NhZ2UoXCJVbmFibGUgdG8gb3BlbiB0aGUgZmlsZS5cIik7XG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGVGaGlyUmVzb3VyY2UoZmhpclJlc291cmNlPzogYW55LCByZXNvdXJjZUZvcm1hdD86IHN0cmluZykge1xuICAgIC8vIFNldCB0aGUgc3RhZ2UgZm9yIHRoZSB2YWxpZGF0aW9uLiBSZXNldCB2YXJpYWJsZXMgdG8gZGVmYXVsdCB2YWx1ZXMuXG4gICAgaWYoIWZoaXJSZXNvdXJjZSl7XG4gICAgICBmaGlyUmVzb3VyY2UgPSB0aGlzLmZoaXJSZXNvdXJjZVxuICAgIH1cbiAgICBpZighcmVzb3VyY2VGb3JtYXQpe1xuICAgICAgcmVzb3VyY2VGb3JtYXQgPSB0aGlzLnJlc291cmNlRm9ybWF0XG4gICAgfVxuXG4gICAgaWYoIWZoaXJSZXNvdXJjZSB8fCAhKHJlc291cmNlRm9ybWF0ID09PSAnanNvbicgfHwgcmVzb3VyY2VGb3JtYXQgPT09ICd4bWwnKSl7XG4gICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBkYXRhIHBhc3NlZCB0byB0aGUgdmFsaWRhdG9yLlwiKTtcbiAgICB9XG4gICAgdGhpcy5pc1ZhbGlkUmVzb3VyY2UgPSB0cnVlO1xuICAgIHRoaXMuaGFzUmVzcG9uc2VEYXRhID0gZmFsc2U7XG4gICAgdGhpcy5zZXJ2ZXJFcnJvckxpc3QgPSBbXTtcbiAgICB0aGlzLnNlcnZlckVycm9yU3RhdHVzID0gJyc7XG4gICAgdGhpcy5zZXJ2ZXJFcnJvckRldGVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5zZXJ2ZXJUaW1vdXREZXRlY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2V2ZXJpdHlMZXZlbHNGb3JtQ29udHJvbC5wYXRjaFZhbHVlKHRoaXMuc2V2ZXJpdHlMZXZlbHMpO1xuXG4gICAgdGhpcy52YWxpZGF0aW9uRXJyb3JTdHIgPSB0aGlzLmZoaXJWYWxpZGF0b3JTZXJ2aWNlLmdldFVpVmFsaWRhdGlvbk1lc3NhZ2VzKGZoaXJSZXNvdXJjZSwgcmVzb3VyY2VGb3JtYXQpO1xuICAgIGlmKHRoaXMudmFsaWRhdGlvbkVycm9yU3RyKXtcbiAgICAgIC8vc2VlIGlmIHdlIGNhbiBmaW5kIGFueSBvYnZpb3VzIGlzc3VlcyB3aXRoIHRoZSByZXNvdXJjZSBoZXJlXG4gICAgICB0aGlzLmlzVmFsaWRSZXNvdXJjZSA9IGZhbHNlO1xuICAgICAgdGhpcy52YWxpZGF0aW9uRmluaXNoZWQgPSB0cnVlO1xuICAgICAgdGhpcy5vblZhbGlkYXRpb24uZW1pdCh7aGFzQmFzaWNFcnJvcnM6IHRydWUsIGlzVmFsaWQ6IGZhbHNlLCByZXNvdXJjZTogZmhpclJlc291cmNlfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gVGhlIFVJIHZhbGlkYXRpb24gcGFzc2VkIHN1Y2Nlc3NmdWxseSwgYW5kIHdlIGV4ZWN1dGUgdGhlIGJhY2tlbmQgdmFsaWRhdGlvbi5cbiAgICAgIHRoaXMuZXhlY3V0ZUFQSVZhbGlkYXRpb24oZmhpclJlc291cmNlLCByZXNvdXJjZUZvcm1hdCk7XG4gICAgfVxuICB9XG5cbiAgb25QYXN0ZUZoaXJSZXNvdXJjZShldmVudDogQ2xpcGJvYXJkRXZlbnQpIHtcbiAgICB0aGlzLmZpbGVOYW1lID0gJyc7XG4gICAgaWYoIXRoaXMuZmhpclJlc291cmNlKSB7XG4gICAgICB0aGlzLmNsZWFyVUkoKTtcbiAgICB9XG4gICAgbGV0IHRleHQgPSBldmVudC5jbGlwYm9hcmREYXRhPy5nZXREYXRhKCd0ZXh0JykgPz8gJyc7XG4gICAgaWYgKHRoaXMuZmhpclZhbGlkYXRvclNlcnZpY2UuaXNKc29uKHRleHQpKSB7XG4gICAgICB0aGlzLnJlc291cmNlRm9ybWF0ID0gJ2pzb24nO1xuICAgIH0gZWxzZSBpZiAodGhpcy5maGlyVmFsaWRhdG9yU2VydmljZS5pc1htbFN0cmluZyh0ZXh0KSkge1xuICAgICAgdGhpcy5yZXNvdXJjZUZvcm1hdCA9ICd4bWwnO1xuICAgIH1cbiAgfVxuXG4gIGdldExpbmVOdW1iZXJzQnlTZXZlcml0eShhcGlSZXNwb25zZTogQXBpUmVzcG9uc2UgfCBudWxsLCBzZXZlcml0eTogc3RyaW5nKTogbnVtYmVyW117XG4gICAgaWYoIWFwaVJlc3BvbnNlIHx8IGFwaVJlc3BvbnNlLmlzc3VlPy5sZW5ndGggPT09IDApe1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gYXBpUmVzcG9uc2UuaXNzdWVcbiAgICAgIC5maWx0ZXIoKGVsZW1lbnQ6IGFueSkgPT4gZWxlbWVudC5zZXZlcml0eSA9PSBzZXZlcml0eSlcbiAgICAgIC5tYXAoKGVsZW1lbnQ6IGFueSkgPT4gdGhpcy5nZXRMaW5lTnVtYmVyRnJvbUxvY2F0aW9uKGVsZW1lbnQubG9jYXRpb25bMF0pIC0gMSk7XG4gIH07XG5cbiAgc2Nyb2xsVG9FbGVtZW50KGxvY2F0aW9uOiBzdHJpbmcgKTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobG9jYXRpb24pO1xuICAgIGlmIChlbGVtZW50KSBlbGVtZW50LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KVxuICB9XG5cbiAgZ2V0TGluZU51bWJlckZyb21Mb2NhdGlvbihsb2NhdGlvblN0cjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAvLyBHZXQgdGhlIGxvY2F0aW9uIGZyb20gcmVzcG9uc2VcbiAgICByZXR1cm4gKGxvY2F0aW9uU3RyPy5sZW5ndGggPiAwKSA/IHBhcnNlSW50IChsb2NhdGlvblN0ci5zcGxpdChcIixcIilbMF0ucmVwbGFjZSggL15cXEQrL2csICcnKSkgOiAwO1xuICB9XG5cbiAgLy8gV2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbG9jYXRpb24gZnJvbSB0aGUgZXJyb3JzIGFuZCB3YXJuaW5nIHJlc3VsdHMsIHdlIHdhbnQgdG8gc2Nyb2xsIHRoZSBwYWdlIHRvIHRoYXQgbG9jYXRpb24uXG4gIG9uTG9jYXRpb25TZWxlY3RlZChyZXNwb25zZTogYW55KTogdm9pZCB7XG4gICAgbGV0IGxvY2F0aW9uSWQgPSAoJyNtYXJrJyArIHRoaXMuZ2V0TGluZU51bWJlckZyb21Mb2NhdGlvbihyZXNwb25zZS5sb2NhdGlvblswXSkpLnRvTG93ZXJDYXNlKCk7XG4gICAgdGhpcy5zY3JvbGxUb0VsZW1lbnQobG9jYXRpb25JZCk7XG4gIH1cblxuICAvLyBTZW5kcyBmaGlyIHJlc291cmNlIHRvIGJlIHZhbGlkYXRlZCwgcmVuZGVycyByZXNwb25zZVxuXG4gIHByaXZhdGUgZXhlY3V0ZUFQSVZhbGlkYXRpb24oZmhpclJlc291cmNlOiBhbnksIHJlc291cmNlRm9ybWF0OiBzdHJpbmcpIHtcblxuICAgIC8vIFJlc2V0IHZhbHVlcyB0byBkZWZhdWx0IHN0YXRlIHByaW9yIHRvIHZhbGlkYXRpb24uXG4gICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgIHRoaXMucGFyc2VkRmhpclJlc291cmNlID0gJyc7XG4gICAgdGhpcy52YWxpZGF0aW9uRmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmFwaVJlc3BvbnNlID0gbnVsbDtcblxuICAgIGlmKHRoaXMucmVzb3VyY2VGb3JtYXQgPT09IFwianNvblwiKXtcbiAgICAgIGZoaXJSZXNvdXJjZSA9IEpTT04ucGFyc2UoZmhpclJlc291cmNlKTtcbiAgICB9XG4gICAgZWxzZSBpZih0aGlzLnJlc291cmNlRm9ybWF0ID09PSBcInhtbFwiKXtcbiAgICAgIGxldCBmaGlyUmVzb3VyY2VYTUwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGZoaXJSZXNvdXJjZSwgJ3RleHQveG1sJyk7XG4gICAgICBmaGlyUmVzb3VyY2UgPSBmaGlyUmVzb3VyY2VYTUwuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAgICB9XG5cbiAgIHRoaXMuZmhpclZhbGlkYXRvclNlcnZpY2UudmFsaWRhdGVGaGlyUmVzb3VyY2UoZmhpclJlc291cmNlLCByZXNvdXJjZUZvcm1hdClcbiAgICAgIC5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICB0aGlzLnZhbGlkYXRpb25GaW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgbGV0IGlzc3VlID0gcmVzcG9uc2UuaXNzdWU7XG4gICAgICAgICAgaWYoaXNzdWUubGVuZ3RoID09PSAxICYmIGlzc3VlWzBdLnNldmVyaXR5ID09PSBcIkluZm9ybWF0aW9uXCIgJiYgaXNzdWVbMF0/Lm1lc3NhZ2UudG9Mb3dlckNhc2UoKSA9PT0gXCJBTEwgT0tcIi50b0xvd2VyQ2FzZSgpKXtcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZFJlc291cmNlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMub25WYWxpZGF0aW9uLmVtaXQoe2lzVmFsaWQ6IHRydWUsIHJlc291cmNlOiBmaGlyUmVzb3VyY2V9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzVmFsaWRSZXNvdXJjZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9uRXJyb3JTdHIgPSBcIlBsZWFzZSBzZWUgdGhlIHZhbGlkYXRpb24gZXJyb3JzIGJlbG93LlwiO1xuICAgICAgICAgICAgdGhpcy5zZXRWYWxpZGF0b3JSZXNwb25zZShyZXNwb25zZSwgZmhpclJlc291cmNlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTb21lIHN0cmluZ3MgcHJvZHVjZWQgYnkgdGhlIHZhbGlkYXRvciBhcmUgbG9uZyBhbmQgbWlzcyBzcGFjZXMuIFRoaXMgY291bGQgYnJlYWsgdGhlIFVJIHZhbGlkYXRpb24gcmVwb3J0LlxuICAgICAgICAgIC8vIFRoZXJlZm9yZSwgd2UgaW5zZXJ0IGEgc3BhY2UgYWZ0ZXIgZWFjaCBjb21hIGZvdW5kIGluIHRoZSB2YWxpZGF0aW9uIHJlc3BvbnNlIHRleHQuXG4gICAgICAgICAgaXNzdWUuZm9yRWFjaCgoZWxlbWVudDogYW55KSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmRpYWdub3N0aWNzID0gZWxlbWVudC5kaWFnbm9zdGljcy5yZXBsYWNlKC8sKD89W15cXHNdKS9nLCBcIiwgXCIpXG4gICAgICAgICAgfSlcblxuXG4gICAgICAgICAgLy8gc29ydCBieSBsaW5lIG51bWJlcnNcbiAgICAgICAgICBpc3N1ZSA9IGlzc3VlLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRMaW5lTnVtYmVyRnJvbUxvY2F0aW9uKGEubG9jYXRpb24/LlswXSkgLSB0aGlzLmdldExpbmVOdW1iZXJGcm9tTG9jYXRpb24oYi5sb2NhdGlvbj8uWzBdKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIG1hdCBlYWNoIGl0ZW0gb2YgdGhlIHJlc3BvbnNlIHRvIGFuIG9iamVjdCBhbmQgbWFrZSBzdXJlIHRoYXQgdGhlIHJlc3VsdHMgYXJlIGluIGV4cGFuZGVkIHN0YXRlIGluIHRoZVxuICAgICAgICAgIC8vIFVJIHZhbGlkYXRpb24gcmVwb3J0LlxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5kYXRhID0gaXNzdWUubWFwKChlbGVtZW50OiBhbnkpID0+IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ6IFJlc3BvbnNlSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGVsZW1lbnQpO1xuICAgICAgICAgICAgcmVzdWx0LmV4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXJQcmVkaWNhdGUgPSB0aGlzLmdldEZpbHRlclByZWRpY2F0ZSgpO1xuICAgICAgICAgIHRoaXMuYXBpUmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgICB0aGlzLmFwaVJlc3BvbnNlIS5mb3JtYXR0ZWRSZXNvdXJjZSA9IHJlc3BvbnNlPy5leHRlbnNpb24/LlswXT8udmFsdWVTdHJpbmc7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiAoZXJyKSA9PiB7XG4gICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnNlcnZlckVycm9yRGV0ZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuc2VydmVyRXJyb3JTdGF0dXMgPSBlcnIuc3RhdHVzO1xuICAgICAgICAgIGlmKGVycj8uZXJyb3I/Lmlzc3VlKXtcbiAgICAgICAgICAgIHRoaXMuc2VydmVyRXJyb3JMaXN0ID0gZXJyLmVycm9yLmlzc3VlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm9uQXBpRXJyb3IuZW1pdChlcnIpO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIC8vVE9ETyBtYWtlIHN1cmUgdG8gcmVtb3ZlIHRoaXMgZnVuY3Rpb24gd2hlbiB0aGUgc2VydmVyIHNpZGUgdGltZW91dCBpcyBpbXBsZW1lbnRlZC5cbiAgICBzZXRUaW1lb3V0KFxuICAgICAgKCkgPT4ge1xuICAgICAgICBpZih0aGlzLmlzTG9hZGluZykge1xuICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zZXJ2ZXJUaW1vdXREZXRlY3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMuU0VSVkVSX1RJTUVPVVRfSU5URVJWQUxcbiAgICApO1xuXG4gIH1cblxuICB0b2dnbGUoKSB7XG4gICAgdGhpcy5hbGxFeHBhbmRlZCA9ICF0aGlzLmFsbEV4cGFuZGVkO1xuICAgIHRoaXMuZGF0YVNvdXJjZS5kYXRhLmZvckVhY2goKGl0ZW06IGFueSkgPT4gaXRlbS5leHBhbmRlZCA9IHRoaXMuYWxsRXhwYW5kZWQpO1xuICB9XG5cbiAgb25GaWx0ZXJSZXN1bHRzKCkge1xuICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXIgPSB0aGlzLnNldmVyaXR5TGV2ZWxzRm9ybUNvbnRyb2wudmFsdWUuam9pbignLCcpO1xuICB9XG5cbiAgZ2V0RmlsdGVyUHJlZGljYXRlKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocm93OiBhbnksIGZpbHRlcnM6IHN0cmluZykge1xuICAgICAgbGV0IG1hdGNoRmlsdGVyOiBib29sZWFuID0gZmFsc2U7XG4gICAgICBjb25zdCBmaWx0ZXJBcnJheSA9IGZpbHRlcnMuc3BsaXQoJywnKTtcbiAgICAgIGZpbHRlckFycmF5LmZvckVhY2goKGZpbHRlcjogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgaWYocm93LnNldmVyaXR5LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIudG9Mb3dlckNhc2UoKSkhPSAtMSl7XG4gICAgICAgICAgICBtYXRjaEZpbHRlciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApXG4gICAgICByZXR1cm4gbWF0Y2hGaWx0ZXI7XG4gICAgfTtcbiAgfVxuXG4gIG9uQ2FuY2VsVmFsaWRhdGlvbiAoKXtcbiAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICB9XG5cbiAgY2hlY2tFeHBhbmRDb2xsYXBzZUFsbFN0YXR1cygpIHtcbiAgICAvKlxuICAgICogV2hlbiBhbGwgZWxlbWVudHMgYXJlIGNvbGxhcHNlZCB3ZSB3YW50IHRvIGNoYW5nZSB0aGUgZXhwYW5zaW9uIGljb24gdG8gcmVuZGVyIFwiZXhwYW5kIGFsbFwiXG4gICAgKiBXaGVuIGFsbCBlbGVtZW50cyBhcmUgZXhwYW5kZWQgd2Ugd2FudCB0byBjaGFuZ2UgdGhlIGV4cGFuc2lvbiBpY29uIHRvIFwiY29sbGFwc2UgYWxsXCJcbiAgICAqIFRoaXMgd2lsbCBzYXZlIGV4dHJhIHVubmVjZXNzYXJ5IGNsaWNrIGZvciB0aGUgdXNlclxuICAgICovXG4gICAgY29uc3QgZXhwYW5kZWRFbGVtZW50c0NvdW50ID0gdGhpcy5kYXRhU291cmNlLmRhdGEuZmlsdGVyKGVsZW1lbnQgPT4gZWxlbWVudFsnZXhwYW5kZWQnXSkubGVuZ3RoO1xuICAgIGlmKGV4cGFuZGVkRWxlbWVudHNDb3VudCA9PT0gdGhpcy5kYXRhU291cmNlLmRhdGEubGVuZ3RoKXtcbiAgICAgIHRoaXMuYWxsRXhwYW5kZWQgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmKGV4cGFuZGVkRWxlbWVudHNDb3VudCA9PT0gMCl7XG4gICAgICB0aGlzLmFsbEV4cGFuZGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgaXNGaWx0ZXJFbmFibGVkKHNldmVyaXR5OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gISF0aGlzLmRhdGFTb3VyY2UuZGF0YS5maW5kKChlbGVtZW50OiBhbnkpID0+IGVsZW1lbnQuc2V2ZXJpdHkudG9Mb3dlckNhc2UoKSA9PT0gc2V2ZXJpdHkudG9Mb3dlckNhc2UoKSk7XG4gIH1cblxuICBnZXRDb3VudChsZXZlbDogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5kYXRhXG4gICAgICAuZmlsdGVyKChlbGVtZW50OiBhbnkpID0+IGVsZW1lbnQuc2V2ZXJpdHkudG9Mb3dlckNhc2UoKSA9PT0gbGV2ZWwudG9Mb3dlckNhc2UoKSlcbiAgICAgIC5sZW5ndGg7XG4gIH1cblxuICBvbkNsb3NlU2VydmVyRXJyb3JNZXNzYWdlKCkge1xuICAgIHRoaXMuc2VydmVyRXJyb3JEZXRlY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2VydmVyRXJyb3JMaXN0ID0gW107XG4gICAgdGhpcy5zZXJ2ZXJFcnJvclN0YXR1cyA9ICcnO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRWYWxpZGF0b3JSZXNwb25zZShhcGlSZXNwb25zZTogYW55LCByZXNvdXJjZTogc3RyaW5nKSB7XG4gICAgY29uc3QgZXJyb3JzQ291bnQgPSBhcGlSZXNwb25zZS5pc3N1ZS5maWx0ZXIoKGVsZW1lbnQ6IGFueSkgPT4gZWxlbWVudC5zZXZlcml0eSA9PSAnZXJyb3InKT8ubGVuZ3RoID8/IDA7XG4gICAgY29uc3Qgd2FybmluZ3NDb3VudCA9IGFwaVJlc3BvbnNlLmlzc3VlLmZpbHRlcigoZWxlbWVudDogYW55KSA9PiBlbGVtZW50LnNldmVyaXR5ID09ICd3YXJuaW5nJyk/Lmxlbmd0aCA/PyAwO1xuICAgIGNvbnN0IGluZm9Db3VudCA9IGFwaVJlc3BvbnNlLmlzc3VlLmZpbHRlcigoZWxlbWVudDogYW55KSA9PiBlbGVtZW50LnNldmVyaXR5ID09ICdpbmZvcm1hdGlvbicpPy5sZW5ndGggPz8gMDtcbiAgICBjb25zdCBub3Rlc0NvdW50ID0gYXBpUmVzcG9uc2UuaXNzdWUuZmlsdGVyKChlbGVtZW50OiBhbnkpID0+IGVsZW1lbnQuc2V2ZXJpdHkgPT0gJ25vdGUnKT8ubGVuZ3RoID8/IDA7XG5cbiAgICBsZXQgdmFsaWRhdGlvblJlc3VsdDogVmFsaWRhdGlvblJlc3VsdHMgPSB7fTtcbiAgICB2YWxpZGF0aW9uUmVzdWx0LmVycm9yc0NvdW50ID0gZXJyb3JzQ291bnQ7XG4gICAgdmFsaWRhdGlvblJlc3VsdC53YXJuaW5nc0NvdW50ID0gd2FybmluZ3NDb3VudDtcbiAgICB2YWxpZGF0aW9uUmVzdWx0Lm5vdGVzQ291bnQgPSBub3Rlc0NvdW50O1xuICAgIHZhbGlkYXRpb25SZXN1bHQuaW5mb0NvdW50ID0gaW5mb0NvdW50O1xuXG4gICAgdmFsaWRhdGlvblJlc3VsdC5pc1ZhbGlkID0gZXJyb3JzQ291bnQgPD0gMDtcbiAgICB2YWxpZGF0aW9uUmVzdWx0LnJlc291cmNlID0gcmVzb3VyY2U7XG4gICAgdGhpcy5vblZhbGlkYXRpb24uZW1pdCh2YWxpZGF0aW9uUmVzdWx0KTtcbiAgfVxuXG4gIGNsZWFyVmFsaWRhdGlvbkVycm9ycygpe1xuICAgIHRoaXMudmFsaWRhdGlvbkVycm9yU3RyID0gJyc7XG4gICAgdGhpcy5pc1ZhbGlkUmVzb3VyY2UgPSBmYWxzZTtcbiAgICB0aGlzLnBhcnNlZEZoaXJSZXNvdXJjZSA9ICcnO1xuICAgIHRoaXMuaGFzUmVzcG9uc2VEYXRhID0gZmFsc2U7XG4gICAgdGhpcy52YWxpZGF0aW9uRmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuc2VydmVyRXJyb3JEZXRlY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2VydmVyRXJyb3JMaXN0ID0gW107XG4gICAgdGhpcy5zZXJ2ZXJFcnJvclN0YXR1cyA9ICcnO1xuICAgIHRoaXMuc2VydmVyVGltb3V0RGV0ZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmFwaVJlc3BvbnNlID0gbnVsbDtcbiAgfVxuXG4gIGdldExpbmVJdGVtQ2xhc3MoaXRlbTogc3RyaW5nLCBpOiBudW1iZXIpIHtcblxuICAgIGlmKHRoaXMuZ2V0TGluZU51bWJlcnNCeVNldmVyaXR5KHRoaXMuYXBpUmVzcG9uc2UsICdlcnJvcicpLmluZGV4T2YoaSkgIT0gLTEpe1xuICAgICAgdGhpcy5oYXNSZXNwb25zZURhdGEgPSB0cnVlO1xuICAgICAgcmV0dXJuIFwiZXJyb3ItbWFya1wiO1xuICAgIH1cbiAgICBlbHNlIGlmKHRoaXMuZ2V0TGluZU51bWJlcnNCeVNldmVyaXR5KHRoaXMuYXBpUmVzcG9uc2UsICd3YXJuaW5nJykuaW5kZXhPZihpKSAhPSAtMSl7XG4gICAgICB0aGlzLmhhc1Jlc3BvbnNlRGF0YSA9IHRydWU7XG4gICAgICByZXR1cm4gXCJ3YXJuaW5nLW1hcmtcIjtcbiAgICB9XG4gICAgZWxzZSBpZih0aGlzLmdldExpbmVOdW1iZXJzQnlTZXZlcml0eSh0aGlzLmFwaVJlc3BvbnNlLCAnaW5mb3JtYXRpb24nKS5pbmRleE9mKGkpICE9IC0xKXtcbiAgICAgIHRoaXMuaGFzUmVzcG9uc2VEYXRhID0gdHJ1ZTtcbiAgICAgIHJldHVybiBcImluZm8tbWFya1wiO1xuICAgIH1cbiAgICBlbHNlIGlmKHRoaXMuZ2V0TGluZU51bWJlcnNCeVNldmVyaXR5KHRoaXMuYXBpUmVzcG9uc2UsICdub3RlJykuaW5kZXhPZihpKSAhPSAtMSl7XG4gICAgICB0aGlzLmhhc1Jlc3BvbnNlRGF0YSA9IHRydWU7XG4gICAgICByZXR1cm4gXCJub3RlLW1hcmtcIjtcbiAgICB9XG5cbiAgICBlbHNlIHJldHVybicnO1xuICB9XG5cbiAgZ2VuZXJhdGVBdXRvVGFibGVQREYoZGF0YTogYW55KSB7XG4gICAgbGV0IHBkZiA9IG5ldyBqc3BkZi5qc1BERigpO1xuICAgIGNvbnN0IHJlcG9ydFRpdGxlID0gXCJGSElSIFZhbGlkYXRvciBSZXN1bHRzXCI7XG4gICAgcGRmLnNldEZvbnRTaXplKDYpO1xuICAgIHBkZi5zZXRUZXh0Q29sb3IoMTE5LCAxMTksIDExOSk7XG4gICAgcGRmLnRleHQodGhpcy50b0luWXl5eU1tRGRIaE1tU3MobmV3IERhdGUoKSksIDE3MCwgMTIpO1xuICAgIHBkZi5zZXRGb250U2l6ZSgxMik7XG4gICAgcGRmLnNldFRleHRDb2xvcig1MCwgNTAsIDUwKTtcbiAgICBwZGYudGV4dChyZXBvcnRUaXRsZSwgMTQsIDEyKTtcblxuXG4gICAgYXV0b1RhYmxlLmRlZmF1bHQocGRmLCB7XG4gICAgICBjb2x1bW5TdHlsZXM6IHtcbiAgICAgICAgc2V2ZXJpdHk6IHtoYWxpZ246ICdsZWZ0JywgY2VsbFdpZHRoOiAyNX0sXG4gICAgICAgIGZoaXJQYXRoOiB7aGFsaWduOiAnbGVmdCcsIGNlbGxXaWR0aDogNTB9LFxuICAgICAgICBkaWFnbm9zdGljczoge2hhbGlnbjogJ2xlZnQnfSxcbiAgICAgICAgbG9jYXRpb246IHtoYWxpZ246ICdsZWZ0JywgY2VsbFdpZHRoOiAyNX1cbiAgICAgIH0sIC8vIEV1cm9wZWFuIGNvdW50cmllcyBjZW50ZXJlZFxuICAgICAgYm9keTogZGF0YSxcbiAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAge2hlYWRlcjogJ1NldmVyaXR5JywgZGF0YUtleTogJ3NldmVyaXR5J30sXG4gICAgICAgIHtoZWFkZXI6ICdGaGlyIFBhdGgnLCBkYXRhS2V5OiAnZmhpclBhdGgnfSxcbiAgICAgICAge2hlYWRlcjogJ0RpYWdub3N0aWNzJywgZGF0YUtleTogJ2RpYWdub3N0aWNzJ30sXG4gICAgICAgIHtoZWFkZXI6ICdMb2NhdGlvbicsIGRhdGFLZXk6ICdsb2NhdGlvbid9LFxuICAgICAgXSxcbiAgICAgIHN0eWxlczoge2ZvbnRTaXplOiA4LCBmb250U3R5bGU6IFwibm9ybWFsXCJ9LFxuICAgIH0pO1xuICAgIHJldHVybiBuZXcgQmxvYihbcGRmLm91dHB1dCgnYmxvYicpXSwge3R5cGU6ICdhcHBsaWNhdGlvbi9wZGYnfSk7XG4gIH1cblxuICBvbkV4cG9ydFRvUGRmKCkge1xuXG5cbiAgICAvLyBBZGQgdGhlIGZvcm1hdHRlZCByZXNvdXJjZSBmb3JtIHRoZSB2YWxpZGF0b3IgcmVzcG9uc2UgdG8gYSBqc29uIGZpbGVcbiAgICAvLyBUaGlzIHdheSB0aGUgbGluZSBudW1iZXJzIGZyb20gdGhlIHZhbGlkYXRvciByZXBvcnQgd2lsbCBtYXRjaCB0aGUganNvbiBmaWxlIG51bWJlcnNcbiAgICBjb25zdCBqc29uUmVzb3VyY2UgPSB0aGlzPy5hcGlSZXNwb25zZT8uZm9ybWF0dGVkUmVzb3VyY2UgfHwgJyc7XG5cbiAgICAvLyBDcmVhdGUgYSBwZGYgcmVwb3J0XG4gICAgY29uc3QgcGRmUmVwb3J0RGF0YSA9IHRoaXMuZGF0YVNvdXJjZS5kYXRhXG4gICAgICAubWFwKGVsZW1lbnQ9PiB7IHJldHVybiB7c2V2ZXJpdHk6IGVsZW1lbnQuc2V2ZXJpdHksIGRpYWdub3N0aWNzOiBlbGVtZW50LmRpYWdub3N0aWNzLCBsb2NhdGlvbjogZWxlbWVudC5sb2NhdGlvbiwgZmhpclBhdGg6IGVsZW1lbnQ/LmV4cHJlc3Npb24/LlswXX19KVxuICAgICAgLmZpbHRlcihpdGVtID0+IHRoaXMuc2V2ZXJpdHlMZXZlbHNGb3JtQ29udHJvbC52YWx1ZS5pbmRleE9mKGl0ZW0uc2V2ZXJpdHkpICE9IC0xKTtcbiAgICBjb25zdCBwZGZCbG9iID0gdGhpcy5nZW5lcmF0ZUF1dG9UYWJsZVBERihwZGZSZXBvcnREYXRhKTtcblxuICAgIGxldCB6aXAgPSBuZXcgSlNaaXAoKTtcbiAgICB6aXAuZmlsZShgcmVzb3VyY2UuanNvbmAsIGpzb25SZXNvdXJjZSk7XG5cbiAgICB6aXAuZmlsZSgnZmhpcl92YWxpZGF0b3JfcmVwb3J0LnBkZicsIHBkZkJsb2IpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSB6aXAgYW5kIHRyaWdnZXIgZG93bmxvYWRcbiAgICB6aXAuZ2VuZXJhdGVBc3luYyh7IHR5cGU6ICdibG9iJyB9KS50aGVuKChjb250ZW50KSA9PiB7XG4gICAgICAvLyBDcmVhdGUgYSBibG9iIGZvciB0aGUgemlwIGNvbnRlbnRcbiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL3ppcCcgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBhIGRvd25sb2FkIGxpbmtcbiAgICAgIGNvbnN0IGRvd25sb2FkTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIGRvd25sb2FkTGluay5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCkudG9VVENTdHJpbmcoKTtcbiAgICAgIGRvd25sb2FkTGluay5kb3dubG9hZCA9IGB2YWxpZGF0b3JfcmVzdWx0c18ke3RoaXMudG9Jbll5eXlNbURkSGhNbVNzKG5ldyBEYXRlKCkpfS56aXBgO1xuXG4gICAgICAvLyBUcmlnZ2VyIHRoZSBkb3dubG9hZFxuICAgICAgZG93bmxvYWRMaW5rLmNsaWNrKCk7XG4gICAgICBkb3dubG9hZExpbmsucmVtb3ZlKClcbiAgICB9KTtcblxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgZm9ybWF0dGluZyBhIGRhdGUuXG4gICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSBodHRwczovL3RyeW15c29sdXRpb24ubWVkaXVtLmNvbS9qYXZhc2NyaXB0LWRhdGUtYXMtaW4teXl5eS1tbS1kZC1oaC1tbS1zcy1mb3JtYXQtb3ItbW0tZGQteXl5eS1oaC1tbS1zcy1hMGM5NmU4ZmE4ODhcbiAgICogQHBhcmFtIGRhdGVcbiAgICogQHBhcmFtIGRhdGVEaXZlZGVyXG4gICAqL1xuICBwcml2YXRlIHRvSW5ZeXl5TW1EZEhoTW1TcyhkYXRlOiBEYXRlLCBkYXRlRGl2ZWRlcjogc3RyaW5nID0gXCItXCIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgW1xuICAgICAgICBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgIHRoaXMucGFkVHdvRGlnaXRzKGRhdGUuZ2V0TW9udGgoKSArIDEpLFxuICAgICAgICB0aGlzLnBhZFR3b0RpZ2l0cyhkYXRlLmdldERhdGUoKSksXG4gICAgICBdLmpvaW4oZGF0ZURpdmVkZXIpICtcbiAgICAgIFwiIFwiICtcbiAgICAgIFtcbiAgICAgICAgdGhpcy5wYWRUd29EaWdpdHMoZGF0ZS5nZXRIb3VycygpKSxcbiAgICAgICAgdGhpcy5wYWRUd29EaWdpdHMoZGF0ZS5nZXRNaW51dGVzKCkpLFxuICAgICAgICB0aGlzLnBhZFR3b0RpZ2l0cyhkYXRlLmdldFNlY29uZHMoKSksXG4gICAgICBdLmpvaW4oXCI6XCIpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIHRvSW5ZeXl5TW1EZEhoTW1TcyBmdW5jdGlvblxuICAgKiBAcGFyYW0gbnVtXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHBhZFR3b0RpZ2l0cyhudW06IG51bWJlcikge1xuICAgIHJldHVybiBudW0udG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gIH1cblxufVxuIiwiPGRpdiBjbGFzcz1cInNwaW5uZXItY29udGFpbmVyXCIgKm5nSWY9XCJpc0xvYWRpbmdcIj5cbiAgPG1hdC1zcGlubmVyPjwvbWF0LXNwaW5uZXI+XG48L2Rpdj5cblxuPG1hdC1jYXJkLWhlYWRlciAgKm5nSWY9XCJ2YWxpZGF0b3JUaXRsZVwiIGlkPVwidmFsaWRhdG9yLXRpdGxlXCI+XG4gIDxtYXQtY2FyZC10aXRsZT57eyB2YWxpZGF0b3JUaXRsZSB9fTwvbWF0LWNhcmQtdGl0bGU+XG48L21hdC1jYXJkLWhlYWRlcj5cblxuXG48IS0tIFRoZSBzZWN0aW9uIGJlbG93IHJlbmRlcnMgZXJyb3IgbWVzc2FnZXMgcmV0dXJuZWQgYnkgdGhlIHZhbGlkYXRvci4tLT5cbjxkaXYgY2xhc3M9c2VydmVyLWVycm9yLW1lc3NhZ2UtY29udGFpbmVyICpuZ0lmPVwic2VydmVyRXJyb3JEZXRlY3RlZFwiPlxuICA8YnV0dG9uIG1hdC1idXR0b24gY2xhc3M9XCJjbG9zZS1idXR0b25cIiBjb2xvcj1cImFjY2VudFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiIGRpc2FibGVSaXBwbGVcbiAgICAgICAgICAoY2xpY2spPVwib25DbG9zZVNlcnZlckVycm9yTWVzc2FnZSgpXCI+XG4gICAgPG1hdC1pY29uPmNsb3NlPC9tYXQtaWNvbj5cbiAgPC9idXR0b24+XG4gIDxkaXYgY2xhc3M9XCJzZXJ2ZXItZXJyb3Itc3RhdHVzXCI+PGgyPlNlcnZlciBFcnJvciBSZXNwb25zZSBTdGF0dXM6IHt7IHNlcnZlckVycm9yU3RhdHVzIH19PC9oMj48L2Rpdj5cbiAgPGRpdiBjbGFzcz1cInNlcnZlci1lcnJvci1tZXNzYWdlLXRleHRcIiAqbmdGb3I9XCJsZXQgc2VydmVyRXJyb3Igb2Ygc2VydmVyRXJyb3JMaXN0XCJcbiAgICAgICBbaW5uZXJUZXh0XT1cInNlcnZlckVycm9yLmRpYWdub3N0aWNzXCI+PC9kaXY+XG48L2Rpdj5cblxuPCEtLSBUT0RPIHJlbW92ZSB0aGlzIGNvZGUgd2hlbiB0aGUgQVBJIGNvZGUgaXMgdXBkYXRlZCB0byByZXR1cm4gNDA4IG9uIHJlcXVlc3QgdGltZW91dCAtLT5cbjxkaXYgY2xhc3M9c2VydmVyLWVycm9yLW1lc3NhZ2UtY29udGFpbmVyICpuZ0lmPVwic2VydmVyVGltb3V0RGV0ZWN0ZWRcIj5cbiAgPGJ1dHRvbiBtYXQtYnV0dG9uIGNsYXNzPVwiY2xvc2UtYnV0dG9uXCIgY29sb3I9XCJhY2NlbnRcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIiBkaXNhYmxlUmlwcGxlXG4gICAgICAgICAgKGNsaWNrKT1cInNlcnZlclRpbW91dERldGVjdGVkID0gZmFsc2VcIj5cbiAgICA8bWF0LWljb24+Y2xvc2U8L21hdC1pY29uPlxuICA8L2J1dHRvbj5cbiAgPGRpdiBjbGFzcz1cInNlcnZlci1lcnJvci1zdGF0dXNcIj48aDI+U2VydmVyIFRpbWVvdXQgRXJyb3IuPC9oMj48L2Rpdj5cbjwvZGl2PlxuXG48IS0tQWN0aW9ucyBhdmFpbGFibGUgYWJvdmUgdGhlIEZISVIgdmFsaWRhdG9yIGlucHV0IHRleHRhcmVhLS0+XG48ZGl2IGNsYXNzPVwicm93LWJ1dHRvbi13cmFwcGVyXCI+XG5cbiAgPCEtLVNlbGVjdCBKU09OL1hNTCByYWRpbyBncm91cC0tPlxuICA8bWF0LXJhZGlvLWdyb3VwIFsobmdNb2RlbCldPVwicmVzb3VyY2VGb3JtYXRcIiBbZGlzYWJsZWRdPWlzTG9hZGluZyAqbmdJZj1cInZhbGlkYXRpb25JbnB1dEZvcm1hdC5mb3JtYXQgPT0gJ3htbCBhbmQganNvbidcIiA+XG4gICAgPG1hdC1yYWRpby1idXR0b25cbiAgICAgIHZhbHVlPVwianNvblwiXG4gICAgICBbY2hlY2tlZF09XCJyZXNvdXJjZUZvcm1hdCA9PSdqc29uJ1wiXG4gICAgICAoc2VsZWN0KT1cInJlc291cmNlRm9ybWF0ID0gJ2pzb24nXCI+XG4gICAgICBKU09OXG4gICAgPC9tYXQtcmFkaW8tYnV0dG9uPlxuICAgIDxtYXQtcmFkaW8tYnV0dG9uXG4gICAgICB2YWx1ZT1cInhtbFwiXG4gICAgICBbY2hlY2tlZF09XCJyZXNvdXJjZUZvcm1hdCA9PSd4bWwnXCJcbiAgICAgIChzZWxlY3QpPVwicmVzb3VyY2VGb3JtYXQgPSAneG1sJ1wiPlxuICAgICAgWE1MXG4gICAgPC9tYXQtcmFkaW8tYnV0dG9uPlxuICA8L21hdC1yYWRpby1ncm91cD5cblxuICA8c3BhbiBjbGFzcz1cImNvbnRlbnQtc3BhY2VyXCIgKm5nSWY9XCJ2YWxpZGF0aW9uSW5wdXRGb3JtYXQ/LmZvcm1hdCA9PSAneG1sIGFuZCBqc29uJ1wiPjwvc3Bhbj5cblxuICA8IS0tRmlsZSB1cGxvYWQgd2lkZ2V0LS0+XG4gIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGNsYXNzPVwiZmlsZS1pbnB1dFwiIChjbGljayk9XCJmaWxlVXBsb2FkLnZhbHVlPW51bGxcIlxuICAgICAgICAgW2FjY2VwdF09XCJ2YWxpZGF0aW9uSW5wdXRGb3JtYXQ/LmFjY2VwdHM/LnRvU3RyaW5nKClcIlxuICAgICAgICAgKGNoYW5nZSk9XCJvbkZpbGVTZWxlY3RlZCgkZXZlbnQpXCIgI2ZpbGVVcGxvYWQ+XG5cbiAgPHNwYW4gY2xhc3M9XCJmaWxlbmFtZVwiICpuZ0lmPVwidmFsaWRhdGlvbklucHV0Rm9ybWF0LmZvcm1hdCA9PSAneG1sIGFuZCBqc29uJ1wiPnt7ZmlsZU5hbWV9fTwvc3Bhbj5cblxuICA8YnV0dG9uIG1hdC1yYWlzZWQtYnV0dG9uIFtzdHlsZS5iYWNrZ3JvdW5kLWNvbG9yXT1cImJ1dHRvbkJhY2tncm91bmRDb2xvclwiIFtzdHlsZS5jb2xvcl09XCJidXR0b25UeHRDb2xvclwiXG4gICAgICAgICAgY2xhc3M9XCJ1cGxvYWQtYnRuXCJcbiAgICAgICAgICAoY2xpY2spPVwiY2xlYXJVSSgpOyBmaWxlVXBsb2FkLmNsaWNrKCk7XCIgW2Rpc2FibGVkXT1pc0xvYWRpbmc+XG4gICAgPG1hdC1pY29uPnVwbG9hZDwvbWF0LWljb24+XG4gICAgVXBsb2FkXG4gIDwvYnV0dG9uPlxuXG4gIDxzcGFuIGNsYXNzPVwiZmlsZW5hbWVcIiAqbmdJZj1cIiEodmFsaWRhdGlvbklucHV0Rm9ybWF0LmZvcm1hdCA9PSAneG1sIGFuZCBqc29uJylcIj57e2ZpbGVOYW1lfX08L3NwYW4+XG48L2Rpdj5cblxuPCEtLSBGSElSIHZhbGlkYXRvciB0ZXh0IGVkaXRvci0tPlxuPGRpdiBjbGFzcz1cInRleHRhcmVhLXdyYXBwZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJsaW5lLW51bWJlcnNcIiAjbnVtYmVycz5cbiAgICAgICAgPGRpdiAqbmdGb3I9XCJsZXQgaSBvZiBnZXRMaW5lTnVtYmVycygpO1wiPjxkaXYgY2xhc3M9XCJudW1iZXJzXCI+e3tpfX08L2Rpdj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPHRleHRhcmVhXG4gICAgICAgICN2YWxpZGF0b3JJbnB1dFxuICAgICAgICByb3dzPVwiMzBcIlxuICAgICAgICBbKG5nTW9kZWwpXT1cImZoaXJSZXNvdXJjZVwiXG4gICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cIm9uUmVzb3VyY2VDb250ZW50Q2hhbmdlZC5lbWl0KGZoaXJSZXNvdXJjZSlcIlxuICAgICAgICBbbmdTdHlsZV09XCJ7J2JvcmRlci1jb2xvcic6ICghIXZhbGlkYXRpb25FcnJvclN0cikgPyAncmVkJzogbnVsbCB9XCJcbiAgICAgICAgKHBhc3RlKT1cIm9uUGFzdGVGaGlyUmVzb3VyY2UoJGV2ZW50KVwiXG4gICAgICAgIFtkaXNhYmxlZF09XCJpc0xvYWRpbmdcIlxuICAgICAgICAoaW5wdXQpPVwibGluZU51bWJlcnMoKVwiXG4gICAgICAgIChzY3JvbGwpPVwibnVtYmVycy5zY3JvbGxUb3AgPSB2YWxpZGF0b3JJbnB1dC5zY3JvbGxUb3BcIlxuICAgICAgPlxuICAgICAgPC90ZXh0YXJlYT5cbjwvZGl2PlxuXG48IS0tQWN0aW9ucyBhdmFpbGFibGUgYmVsb3cgdGhlIEZISVIgdmFsaWRhdG9yIGlucHV0IHRleHRhcmVhLS0+XG48ZGl2IGNsYXNzPVwicm93LWJ1dHRvbi13cmFwcGVyXCIgKm5nSWY9XCJmb3JtYXRSZXNvdXJjZUJ0blNob3duIHx8IGNsZWFyVmFsaWRhdG9yQnRuU2hvd24gfHwgc3VibWl0QnRuU2hvd24gfHwgdmFsaWRhdGlvbkVycm9yU3RyXCI+XG5cbiAgPHNwYW4gKm5nSWY9XCJzdWJtaXRCdG5TaG93biAmJiAoc3VibWl0QnRuQWxpZ25tZW50PT0nbGVmdCcpICYmICFpc0xvYWRpbmdcIj5cbiAgICA8YnV0dG9uIG1hdC1yYWlzZWQtYnV0dG9uIFtzdHlsZS5iYWNrZ3JvdW5kLWNvbG9yXT1cImJ1dHRvbkJhY2tncm91bmRDb2xvclwiIFtzdHlsZS5jb2xvcl09XCJidXR0b25UeHRDb2xvclwiIGNsYXNzPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIChjbGljayk9XCJ2YWxpZGF0ZUZoaXJSZXNvdXJjZShmaGlyUmVzb3VyY2UsIHJlc291cmNlRm9ybWF0KVwiPlxuICAgICAgPG1hdC1pY29uPnNlbmQ8L21hdC1pY29uPlxuICAgICAgU3VibWl0XG4gICAgPC9idXR0b24+XG4gIDwvc3Bhbj5cblxuICA8YnV0dG9uICpuZ0lmPVwiZm9ybWF0UmVzb3VyY2VCdG5TaG93biAmJiAhaXNMb2FkaW5nXCIgW25nQ2xhc3NdPVwieydsZWZ0LW1hcmdpbi1zcGFjZXInOiBzdWJtaXRCdG5BbGlnbm1lbnQ9PSdsZWZ0J31cIiBtYXQtcmFpc2VkLWJ1dHRvblxuICAgICAgICAgIFtzdHlsZS5iYWNrZ3JvdW5kLWNvbG9yXT1cImJ1dHRvbkJhY2tncm91bmRDb2xvclwiIFtzdHlsZS5jb2xvcl09XCJidXR0b25UeHRDb2xvclwiXG4gICAgICAgICAgKGNsaWNrKT1cIm9uRm9ybWF0SW5wdXQoKTtcIlxuICAgICAgICAgIFtkaXNhYmxlZF09XCIhZmhpclJlc291cmNlXCI+XG4gICAgPG1hdC1pY29uPmNvZGU8L21hdC1pY29uPlxuICAgIEZvcm1hdCBJbnB1dFxuICA8L2J1dHRvbj5cblxuICA8c3BhbiBjbGFzcz1cImNvbnRlbnQtc3BhY2VyXCI+PC9zcGFuPlxuICA8c3BhbiAqbmdJZj1cInZhbGlkYXRpb25GaW5pc2hlZFwiIGlkPVwiZXJyb3ItcmVzcG9uc2VcIj5cbiAgICA8c3BhbiBjbGFzcz1cImRhbmdlci1jb2xvclwiICpuZ0lmPVwiISF2YWxpZGF0aW9uRXJyb3JTdHIgJiYgIWlzVmFsaWRSZXNvdXJjZVwiPnt7dmFsaWRhdGlvbkVycm9yU3RyfX08L3NwYW4+XG4gICAgPHNwYW4gY2xhc3M9XCJzdWNjZXNzLWNvbG9yXCIgKm5nSWY9XCJpc1ZhbGlkUmVzb3VyY2VcIj4gVGhpcyBpcyBhIHZhbGlkIEZISVIgcmVzb3VyY2UuPC9zcGFuPlxuICA8L3NwYW4+XG5cbiAgPHNwYW4gY2xhc3M9XCJjb250ZW50LXNwYWNlclwiPjwvc3Bhbj5cblxuICA8YnV0dG9uICpuZ0lmPVwiY2xlYXJWYWxpZGF0b3JCdG5TaG93biAmJiAhaXNMb2FkaW5nXCJcbiAgICBtYXQtcmFpc2VkLWJ1dHRvbiBjb2xvcj1cInN1Y2Nlc3NcIiBjbGFzcz1cImJ1dHRvblwiXG4gICAgKGNsaWNrKT1cIm9uQ2xlYXIoKVwiPlxuICAgIDxtYXQtaWNvbj5jbGVhcjwvbWF0LWljb24+XG4gICAgQ2xlYXIgVmFsaWRhdG9yXG4gIDwvYnV0dG9uPlxuXG4gIDxzcGFuIGNsYXNzPVwibGVmdC1tYXJnaW4tc3BhY2VyXCIgKm5nSWY9XCJzdWJtaXRCdG5TaG93biAmJiAoc3VibWl0QnRuQWxpZ25tZW50ID09J3JpZ2h0JykgJiYgIWlzTG9hZGluZ1wiPlxuICAgIDxidXR0b24gbWF0LXJhaXNlZC1idXR0b24gY29sb3I9XCJhY2NlbnRcIiBjbGFzcz1cImJ1dHRvblwiXG4gICAgICAgICAgICAoY2xpY2spPVwidmFsaWRhdGVGaGlyUmVzb3VyY2UoZmhpclJlc291cmNlLCByZXNvdXJjZUZvcm1hdClcIj5cbiAgICAgIDxtYXQtaWNvbj5zZW5kPC9tYXQtaWNvbj5cbiAgICAgIHt7IHN1Ym1pdEJ0blRpdGxlfX1cbiAgICA8L2J1dHRvbj5cbiAgPC9zcGFuPlxuPC9kaXY+XG5cbjxkaXYgY2xhc3M9XCJyb3ctYnV0dG9uLXdyYXBwZXIgdG9wLXBhZGRpbmdcIiAqbmdJZj1cImlzTG9hZGluZyAmJiBjYW5jZWxWYWxpZGF0aW9uQnRuU2hvd25cIj5cbiAgPHNwYW4gY2xhc3M9XCJjb250ZW50LXNwYWNlclwiPjwvc3Bhbj5cbiAgPGJ1dHRvbiBtYXQtcmFpc2VkLWJ1dHRvbiBjb2xvcj1cIndhcm5cIiAoY2xpY2spPVwib25DYW5jZWxWYWxpZGF0aW9uKClcIj5cbiAgICA8bWF0LWljb24+Y2FuY2VsPC9tYXQtaWNvbj5cbiAgICBDYW5jZWwgVmFsaWRhdGlvblxuICA8L2J1dHRvbj5cbjwvZGl2PlxuXG48IS0tIEFjdGlvbnMgYXZhaWxhYmxlIGFmdGVyIHZhbGlkYXRvciBoYXMgcHJvY2Vzc2VkIGRhdGEtLT5cblxuPGRpdiAqbmdJZj1cImFwaVJlc3BvbnNlPy5pc3N1ZSAmJiAhaXNMb2FkaW5nXCI+XG4gIDxkaXYgY2xhc3M9XCJ0b3AtcGFkZGluZ1wiPlxuXG4gICAgPGRpdiAoY2xpY2spPVwib25GaWx0ZXJSZXN1bHRzKClcIj5cbiAgICAgIDxtYXQtYnV0dG9uLXRvZ2dsZS1ncm91cCBuYW1lPVwic2V2ZXJpdHkgbGV2ZWwgZmlsdGVyXCIgW2Zvcm1Db250cm9sXT1cInNldmVyaXR5TGV2ZWxzRm9ybUNvbnRyb2xcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJzZXZlcml0eSBsZXZlbCBmaWx0ZXJcIiBtdWx0aXBsZSBjbGFzcz1cImZ1bGwtd2lkdGhcIj5cbiAgICAgICAgPG1hdC1idXR0b24tdG9nZ2xlXG4gICAgICAgICAgaWQ9XCJmb3JtYXQtdG9nZ2xlLWJ1dHRvbnNcIlxuICAgICAgICAgICpuZ0Zvcj1cImxldCBsZXZlbCBvZiBzZXZlcml0eUxldmVsc1wiXG4gICAgICAgICAgW3ZhbHVlXT1cImxldmVsXCJcbiAgICAgICAgICBbZGlzYWJsZWRdPVwiIWlzRmlsdGVyRW5hYmxlZChsZXZlbClcIj5cbiAgICAgICAgICA8IS0tIEluIG9yZGVyIHRvIHN5bmNocm9uaXNlIHRoZSBzdGF0ZSBvZiB0aGUgYnV0dG9uIHdpdGggdGhlIHN0YXRlIG9mIHRoZSBjaGVja2JveCwgd2Ugc2ltcGx5IHNob3cgb3IgaGlkZVxuICAgICAgICAgIHNlbGVjdGVkIG9yIGRlc2VsZWN0ZWQgY2hlY2tib3guLS0+XG4gICAgICAgICAgPG1hdC1jaGVja2JveFxuICAgICAgICAgICAgKm5nSWY9XCJzZXZlcml0eUxldmVsc0Zvcm1Db250cm9sPy52YWx1ZS5pbmRleE9mKGxldmVsKSAhPSAtMVwiXG4gICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgW2NoZWNrZWRdPXRydWVcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCIhaXNGaWx0ZXJFbmFibGVkKGxldmVsKVwiXG4gICAgICAgICAgICBbZGlzYWJsZVJpcHBsZV09XCJ0cnVlXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgPC9tYXQtY2hlY2tib3g+XG4gICAgICAgICAgPG1hdC1jaGVja2JveFxuICAgICAgICAgICAgKm5nSWY9XCJzZXZlcml0eUxldmVsc0Zvcm1Db250cm9sPy52YWx1ZS5pbmRleE9mKGxldmVsKSA9PT0gLTFcIlxuICAgICAgICAgICAgY29sb3I9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIFtjaGVja2VkXT1mYWxzZVxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cIiFpc0ZpbHRlckVuYWJsZWQobGV2ZWwpXCJcbiAgICAgICAgICAgIFtkaXNhYmxlUmlwcGxlXT1cInRydWVcIlxuICAgICAgICAgID5cbiAgICAgICAgICA8L21hdC1jaGVja2JveD5cbiAgICAgICAgICB7e2xldmVsIHwgdGl0bGVjYXNlIH19ICh7e2dldENvdW50KGxldmVsKX19KVxuICAgICAgICA8L21hdC1idXR0b24tdG9nZ2xlPlxuICAgICAgPC9tYXQtYnV0dG9uLXRvZ2dsZS1ncm91cD5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJ0b3AtcGFkZGluZyBib3hcIiAqbmdJZj1cInZhbGlkYXRpb25SZXN1bHRzRXhwYW5kZWRcIj5cbiAgICAgIDxidXR0b24gbWF0LXJhaXNlZC1idXR0b24gY29sb3I9cHJpbWFyeSAqbmdJZj1cIiFyZXN1bHREZXRhaWxzRXhwYW5kQnRuU2hvd25cIiAoY2xpY2spPVwicmVzdWx0RGV0YWlsc0V4cGFuZEJ0blNob3duID0gdHJ1ZVwiPlxuICAgICAgICA8bWF0LWljb24+ZXhwYW5kX21vcmU8L21hdC1pY29uPiBFeHBhbmQgVmFsaWRhdGlvbiBSZXN1bHRzXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxidXR0b24gbWF0LXJhaXNlZC1idXR0b24gY29sb3I9cHJpbWFyeSAqbmdJZj1cInJlc3VsdERldGFpbHNFeHBhbmRCdG5TaG93blwiIChjbGljayk9XCJyZXN1bHREZXRhaWxzRXhwYW5kQnRuU2hvd24gPSBmYWxzZVwiPlxuICAgICAgICA8bWF0LWljb24+ZXhwYW5kX2xlc3M8L21hdC1pY29uPiBDb2xsYXBzZSBWYWxpZGF0aW9uIFJlc3VsdHNcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPHNwYW4gY2xhc3M9XCJjb250ZW50LXNwYWNlclwiPjwvc3Bhbj5cbiAgICAgIDxidXR0b24gbWF0LXJhaXNlZC1idXR0b24gKGNsaWNrKT1cIm9uRXhwb3J0VG9QZGYoKVwiICpuZ0lmPVwiZXhwb3J0UmVzdWx0c0J1dHRvblNob3duXCJcbiAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cIiEoZGF0YVNvdXJjZT8uZGF0YT8ubGVuZ3RoPjApXCI+XG4gICAgICAgIDxtYXQtaWNvbj5mb2xkZXJfemlwPC9tYXQtaWNvbj5cbiAgICAgICAgRXhwb3J0IFJlc3VsdHMgKC56aXApXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgKm5nSWY9XCJzZXZlcml0eUxldmVsc0Zvcm1Db250cm9sPy52YWx1ZT8ubGVuZ3RoID09PSAwXCI+XG4gICAgICBQbGVhc2Ugc2VsZWN0IHNldmVyaXR5IGxldmVsIHRvIHNlZSB0aGUgcmVzdWx0LlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cInRvcC1wYWRkaW5nIGJveFwiICpuZ0lmPVwiKCF2YWxpZGF0aW9uUmVzdWx0c0V4cGFuZGVkKSAmJiBleHBvcnRSZXN1bHRzQnV0dG9uU2hvd25cIj5cbiAgICAgIDxidXR0b24gbWF0LXN0cm9rZWQtYnV0dG9uIChjbGljayk9XCJvbkV4cG9ydFRvUGRmKClcIlxuICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiIShkYXRhU291cmNlPy5kYXRhPy5sZW5ndGg+MClcIiBjbGFzcz1cImxlZnQtbWFyZ2luLW1kXCI+XG4gICAgICAgIDxtYXQtaWNvbj5mb2xkZXJfemlwPC9tYXQtaWNvbj5cbiAgICAgICAgRXhwb3J0IFJlc3VsdHMgKC56aXApXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cblxuICAgIDx0YWJsZVxuICAgICAgbWF0LXRhYmxlIFtkYXRhU291cmNlXT1cImRhdGFTb3VyY2VcIiBtdWx0aVRlbXBsYXRlRGF0YVJvd3NcbiAgICAgICpuZ0lmPVwic2V2ZXJpdHlMZXZlbHNGb3JtQ29udHJvbD8udmFsdWU/Lmxlbmd0aCA+IDAgJiYgcmVzdWx0RGV0YWlsc0V4cGFuZEJ0blNob3duXCI+XG5cbiAgICAgIDwhLS0gRmlyc3QgY29sdW1uIGNvbnRhaW5zIGV4cGFuZC9jb2xsYXBzZSB3aWRnZXQuIFRoZSB1c2VyIGNhbiBjaG9zZSB0byBleHBhbmQvY29sbGFwc2UgYWxsIHJvd3MsXG4gICAgICAgYXMgd2VsbCBhcyBleHBhbmQvY29sbGFwc2UgaW5kaXZpZHVhbCByb3dzLiBOb3RlIHRoYXQgdGhlIGV4cGFuZC9jb2xsYXBzZSBhbGwgY2FuIGJlIHRvZ2dsZWQgYXV0b21hdGljYWxseVxuICAgICAgIGJhc2VkIHRoZSBzdGF0ZSBvZiB0aGUgaW5kaXZpZHVhbCBleHBhbmQvY29sbGFwc2Ugcm93cy4gRm9yIGV4YW1wbGUgaWYgYWxsIHJvd3MgYXJlIGV4cGFuZGVkIGFuZCBcImV4cGFuZCBhbGxcIlxuICAgICAgIGlzIHJlbmRlcmVkLCB3ZSBhdXRvbWF0aWNhbGx5IGhpZGUgaXQgZW5kIHJlbmRlciBcImNvbGxhcHNlIGFsbFwiIC0tPlxuICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJ0b2dnbGVcIj5cbiAgICAgICAgPHRoIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZiAoY2xpY2spPVwidG9nZ2xlKClcIj5cbiAgICAgICAgICA8bWF0LWljb24gKm5nSWY9XCIhYWxsRXhwYW5kZWRcIiBjbGFzcz1cInBvaW50ZXJcIiBtYXRUb29sdGlwPVwiRXhwYW5kIEFsbFwiIGFyaWEtbGFiZWw9XCJleHBhbmQgYWxsXCI+XG4gICAgICAgICAgICBleHBhbmRfbW9yZVxuICAgICAgICAgIDwvbWF0LWljb24+XG4gICAgICAgICAgPG1hdC1pY29uICpuZ0lmPVwiYWxsRXhwYW5kZWRcIiBjbGFzcz1cInBvaW50ZXJcIiBtYXRUb29sdGlwPVwiQ29sbGFwc2UgQWxsXCIgYXJpYS1sYWJlbD1cImNvbGxhcHNlIGFsbFwiPlxuICAgICAgICAgICAgZXhwYW5kX2xlc3NcbiAgICAgICAgICA8L21hdC1pY29uPlxuICAgICAgICA8L3RoPlxuICAgICAgICA8dGQgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgdmFsaWRhdGlvblJlc3VsdEl0ZW1cIiBjbGFzcz1cInBvaW50ZXJcIlxuICAgICAgICAgICAgKGNsaWNrKT1cInZhbGlkYXRpb25SZXN1bHRJdGVtLmV4cGFuZGVkID0gIXZhbGlkYXRpb25SZXN1bHRJdGVtLmV4cGFuZGVkOyBjaGVja0V4cGFuZENvbGxhcHNlQWxsU3RhdHVzKClcIj5cbiAgICAgICAgICA8bWF0LWljb24gKm5nSWY9XCIhdmFsaWRhdGlvblJlc3VsdEl0ZW0uZXhwYW5kZWRcIiBhcmlhLWxhYmVsPVwiZXhwYW5kXCI+XG4gICAgICAgICAgICBleHBhbmRfbW9yZVxuICAgICAgICAgIDwvbWF0LWljb24+XG4gICAgICAgICAgPG1hdC1pY29uICpuZ0lmPVwidmFsaWRhdGlvblJlc3VsdEl0ZW0uZXhwYW5kZWRcIiBhcmlhLWxhYmVsPVwiY29sbGFwc2VcIj5cbiAgICAgICAgICAgIGV4cGFuZF9sZXNzXG4gICAgICAgICAgPC9tYXQtaWNvbj5cbiAgICAgICAgPC90ZD5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICA8IS0tIFNldmVyaXR5IGxldmVsIGljb25zIC0tPlxuICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJpY29uXCI+XG4gICAgICAgIDx0aCBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+PC90aD5cbiAgICAgICAgPHRkIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHZhbGlkYXRpb25SZXN1bHRJdGVtXCI+XG4gICAgICAgICAgPG1hdC1pY29uICpuZ0lmPVwidmFsaWRhdGlvblJlc3VsdEl0ZW0uc2V2ZXJpdHkgPT09ICdFcnJvcidcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRhbmdlci1jb2xvclwiPmVycm9yXG4gICAgICAgICAgPC9tYXQtaWNvbj5cbiAgICAgICAgICA8bWF0LWljb24gKm5nSWY9XCJ2YWxpZGF0aW9uUmVzdWx0SXRlbS5zZXZlcml0eSA9PT0gJ1dhcm5pbmcnXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ3YXJuaW5nLWNvbG9yXCI+d2FybmluZ1xuICAgICAgICAgIDwvbWF0LWljb24+XG4gICAgICAgICAgPG1hdC1pY29uICpuZ0lmPVwidmFsaWRhdGlvblJlc3VsdEl0ZW0uc2V2ZXJpdHkgPT09ICdJbmZvcm1hdGlvbidcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInN1Y2Nlc3MtY29sb3JcIj5pbmZvXG4gICAgICAgICAgPC9tYXQtaWNvbj5cbiAgICAgICAgICA8bWF0LWljb24gKm5nSWY9XCJ2YWxpZGF0aW9uUmVzdWx0SXRlbS5zZXZlcml0eSA9PT0gJ05vdGUnXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJtZC1wcmltYXJ5LWNvbG9yXCI+ZWRpdF9ub3RlXG4gICAgICAgICAgPC9tYXQtaWNvbj5cbiAgICAgICAgPC90ZD5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICA8IS0tIFNldmVyaXR5IGxldmVsIHN0cmluZyAtLT5cbiAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwic2V2ZXJpdHlcIj5cbiAgICAgICAgPHRoIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZj5TZXZlcml0eTwvdGg+XG4gICAgICAgIDx0ZCBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCB2YWxpZGF0aW9uUmVzdWx0SXRlbVwiPlxuICAgICAgICAgIHt7dmFsaWRhdGlvblJlc3VsdEl0ZW0uc2V2ZXJpdHl9fVxuICAgICAgICA8L3RkPlxuICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgIDwhLS0gU2V2ZXJpdHkgbGV2ZWwgc3RyaW5nIC0tPlxuICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJmaGlyUGF0aFwiPlxuICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPkZISVIgcGF0aDwvdGg+XG4gICAgICAgIDx0ZCBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCB2YWxpZGF0aW9uUmVzdWx0SXRlbVwiPlxuICAgICAgICAgIHt7dmFsaWRhdGlvblJlc3VsdEl0ZW0/LmV4cHJlc3Npb24/LlswXX19XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgPCEtLSBUaGUgbG9jYXRpb24gYXMgcmV0dXJuZWQgYnkgdGhlIHNlcnZlci4gTm90ZSB0aGF0IHRoZSByZXNvdXJjZSByZXR1cm5lZCBieSB0aGUgIHJlc3BvbnNlIGNvdWxkIGJlXG4gICAgICBmb3JtYXR0ZWQgZGlmZmVyZW50bHkgdGhlbiB0aGUgcmVxdWVzdCByZXNvdXJjZS4gV2hhdCB0aGlzIG1lYW5zIGlzIHRoZSB0aGUgbGluZSBudW1iZXJzIGluIHRoZSByZXNwb25zZVxuICAgICAgcmVzb3VyY2UgbWFueSBub3QgbWF0Y2ggdGhvc2UgaW4gdGhlIHJlcXVlc3QuLS0+XG4gICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cImxvY2F0aW9uXCI+XG4gICAgICAgIDx0aCBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWYgaWQ9XCJsb2NhdGlvbi1jb2x1bW4taGVhZGVyXCI+IExvY2F0aW9uPC90aD5cbiAgICAgICAgPHRkIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHZhbGlkYXRpb25SZXN1bHRJdGVtXCIgKGNsaWNrKT1cIm9uTG9jYXRpb25TZWxlY3RlZCh2YWxpZGF0aW9uUmVzdWx0SXRlbSlcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImxvY2F0aW9uLWRhdGFcIj4ge3t2YWxpZGF0aW9uUmVzdWx0SXRlbS5sb2NhdGlvbn19PC9zcGFuPlxuICAgICAgICA8L3RkPlxuICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgIDwhLS0gRXhwYW5kZWQgQ29udGVudCBDb2x1bW4gLSBUaGUgZGV0YWlsIHJvdyBpcyBtYWRlIHVwIG9mIHRoaXMgb25lIGNvbHVtbiB0aGF0IHNwYW5zIGFjcm9zcyBhbGwgY29sdW1ucyAtLT5cbiAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwiZXhwYW5kZWREZXRhaWxcIj5cbiAgICAgICAgPHRkIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHZhbGlkYXRpb25SZXN1bHRJdGVtXCIgW2F0dHIuY29sc3Bhbl09XCJkaXNwbGF5ZWRDb2x1bW5zPy5sZW5ndGhcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidmFsaWRhdGlvbi1yZXN1bHQtZGV0YWlsXCJcbiAgICAgICAgICAgICAgIFtAZGV0YWlsRXhwYW5kXT1cInZhbGlkYXRpb25SZXN1bHRJdGVtLmV4cGFuZGVkID8gJ2V4cGFuZGVkJyA6ICdjb2xsYXBzZWQnXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidmFsaWRhdGlvbi1yZXN1bHQtdGV4dC12YWx1ZVwiPlxuICAgICAgICAgICAgICB7e3ZhbGlkYXRpb25SZXN1bHRJdGVtLmRpYWdub3N0aWNzfX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3RkPlxuICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgIDx0ciBtYXQtaGVhZGVyLXJvdyAqbWF0SGVhZGVyUm93RGVmPVwiZGlzcGxheWVkQ29sdW1uc1wiPjwvdHI+XG4gICAgICA8dHIgbWF0LXJvdyAqbWF0Um93RGVmPVwibGV0IHZhbGlkYXRpb25SZXN1bHRJdGVtOyBjb2x1bW5zOiBkaXNwbGF5ZWRDb2x1bW5zO1wiXG4gICAgICAgICAgY2xhc3M9XCJ0YWJsZS1yb3dcIlxuICAgICAgICAgIFtjbGFzcy5leHBhbmRlZC1yb3ddPVwidmFsaWRhdGlvblJlc3VsdEl0ZW0uZXhwYW5kZWRcIj5cbiAgICAgIDx0ciBtYXQtcm93ICptYXRSb3dEZWY9XCJsZXQgcm93OyBjb2x1bW5zOiBbJ2V4cGFuZGVkRGV0YWlsJ11cIiBjbGFzcz1cInRleHQtdmFsdWUtcm93XCI+PC90cj5cblxuICAgIDwvdGFibGU+XG5cbiAgPC9kaXY+XG5cbiAgPCEtLSBSZXNvdXJjZSBhcyByZXR1cm5lZCBmcm9tIHRoZSB2YWxpZGF0b3IuIE5vdGUgdGhhdCB0aGUgcmVzb3VyY2UgcmV0dXJuZWQgZnJvbSB0aGUgdmFsaWRhdG9yIG1heSBiZVxuICAgZm9ybWF0dGVkIGRpZmZlcmVudGx5IHRoZW4gdGhlIHJlc291cmNlIHdlIHNlbnQgdG8gdGhlIHZhbGlkYXRvci4gLS0+XG4gIDxkaXYgY2xhc3M9XCJ0b3AtcGFkZGluZ1wiICpuZ0lmPVwicmVzdWx0RGV0YWlsc0V4cGFuZEJ0blNob3duICYmIGFwaVJlc3BvbnNlPy5mb3JtYXR0ZWRSZXNvdXJjZVwiPlxuICAgIDxkaXYgY2xhc3M9XCJsaW5lLW51bWJlcnMtcmVzcG9uc2VcIiAjbnVtYmVycz5cbiAgICAgIDxkaXYgKm5nRm9yPVwibGV0IGl0ZW0gb2YgYXBpUmVzcG9uc2U/LmZvcm1hdHRlZFJlc291cmNlPy5zcGxpdCgnXFxuJyk7IGxldCBpID0gaW5kZXhcIj48ZGl2IGNsYXNzPVwibnVtYmVycy1yZXNwb25zZVwiPnt7aSArIDF9fTwvZGl2PjwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJ2YWxpZGF0b3ItcmVzcG9uc2VcIj5cbiAgICAgIDxzcGFuICpuZ0Zvcj1cImxldCBpdGVtIG9mIGFwaVJlc3BvbnNlPy5mb3JtYXR0ZWRSZXNvdXJjZT8uc3BsaXQoJ1xcbicpOyBsZXQgaSA9IGluZGV4XCI+XG4gICAgICAgIDxwcmUgW25nQ2xhc3NdPVwiZ2V0TGluZUl0ZW1DbGFzcyhpdGVtLCBpKVwiIGNsYXNzPVwibGluZS1pdGVtXCIgW2lkXT1cIidtYXJrJysgKGkrMSlcIj57e2l0ZW19fTwvcHJlPlxuICAgICAgPC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuPC9kaXY+XG4iXX0=