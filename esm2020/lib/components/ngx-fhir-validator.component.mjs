import { Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { ValidatorConstants } from "../providers/validator-constants";
import { UntypedFormControl } from "@angular/forms";
import { MatTableDataSource } from "@angular/material/table";
import { animate, state, style, transition, trigger } from "@angular/animations";
import * as i0 from "@angular/core";
import * as i1 from "../services/fhir-validator.service";
import * as i2 from "@angular/common";
import * as i3 from "@angular/material/button";
import * as i4 from "@angular/forms";
import * as i5 from "@angular/material/icon";
import * as i6 from "@angular/material/table";
import * as i7 from "@angular/material/progress-spinner";
import * as i8 from "@angular/material/radio";
import * as i9 from "@angular/material/card";
import * as i10 from "@angular/material/button-toggle";
import * as i11 from "@angular/material/checkbox";
import * as i12 from "@angular/material/tooltip";
export class NgxFhirValidatorComponent {
    constructor(fhirValidatorService) {
        this.fhirValidatorService = fhirValidatorService;
        this.validatorTitle = '';
        this.validationResultsExpanded = false; // Validation results details initial state
        this.resultDetailsExpandBtnShown = true; // Show/hide Expand Validation Results btn
        this.formatResourceBtnShown = false; // Show/hide Format Resource btn
        this.clearValidatorBtnShown = true; // Show/hide Clear Validator btn
        this.submitBtnShown = true; // Show/hide Submit btn
        this.exportResultsButtonShown = true;
        this.submitBtnTitle = 'Submit'; //The submit button title. "Submit" is generic name and other apps may want to change it
        this.validationInputFormat = { format: 'json', accepts: '.json' };
        this.maxFileSize = 250000; // Max allowed file size is 250KB
        this.submitBtnAlignment = 'right'; // The default location for the Submit btn
        this.cancelValidationBtnShown = true;
        this.buttonTxtColor = 'white';
        this.buttonBackgroundColor = '#4858B8';
        this.exportValidationResultsBtnVisible = false;
        this.exportValidationResultsBtnName = 'Export Results (.zip)';
        this.onValidation = new EventEmitter();
        this.onApiError = new EventEmitter();
        this.onResourceContentChanged = new EventEmitter();
        this.onExportValidationResults = new EventEmitter();
        this.fhirResource = ''; // The Resource.
        this.resourceFormat = 'json'; // The resource format could be JSON or XML, with JSON being the default format.
        this.fileName = ''; // Name of the file uploaded by the user. We need this to render the filename in the UI.
        this.validationErrorStr = ''; // We use this value to store preliminary error messages or a generic error message.
        this.hasResponseData = false; // Indicates if the response generated any messages. If true, we render the report
        this.parsedFhirResource = ''; // We store value of the validator result in order to present it to the user.
        this.isLoading = false;
        this.allExpanded = true; // Used to render collapsed/expanded all icon as well as calculate if all results are expanded/collapsed
        this.severityLevels = ValidatorConstants.SEVERITY_LEVELS;
        this.validationFinished = false;
        this.isValidResource = false; // We use this to render the success message
        this.serverErrorDetected = false; // Tracks if the server has responded with an error (404, 500). Used to render the error in UI.
        this.serverErrorList = []; // Store the data from the OperationOutcome resource
        this.serverErrorStatus = ''; // We store the error response status here (i.e. 404, 500)
        this.lines = 1;
        this.width = 0;
        //TODO remove this code when the API returns a timeout error
        this.serverTimoutDetected = false;
        this.SERVER_TIMEOUT_INTERVAL = 240000; //four minutes
        this.displayedColumns = ValidatorConstants.DISPLAYED_COLUMNS;
        this.severityLevelsFormControl = new UntypedFormControl(this.severityLevels);
        this.dataSource = new MatTableDataSource();
        this.apiResponse = null;
    }
    formatFhirResource() {
        if (this.fhirResource) {
            if (this.resourceFormat === 'json' && this.fhirValidatorService.isJson(this.fhirResource)) {
                this.fhirResource = this.fhirValidatorService.beautifyJSON(this.fhirResource);
            }
            else if (this.resourceFormat === 'xml' && this.fhirValidatorService.isXmlString(this.fhirResource)) {
                this.fhirResource = this.fhirValidatorService.beautifyXML(this.fhirResource);
            }
        }
        this.lineNumbers();
    }
    lineNumbers() {
        const linedStrings = this.fhirResource.split(/[\n\r]/g);
        this.lines = linedStrings.length;
        this.width = this.inputRef.nativeElement.offsetWidth;
        const charInLines = this.width / ValidatorConstants.FONT_WIDTH;
        for (const line of linedStrings) {
            if (line.length > charInLines) {
                this.lines = this.lines + (line.length / charInLines);
            }
        }
    }
    getLineNumbers() {
        return Array.from({ length: this.lines }, (_, i) => (i + 1).toString());
    }
    // It is important the format is working with "best effort"
    // That is it may or may not format the text properly and require extensive testing to validate its operation.
    onFormatInput() {
        this.formatFhirResource();
        this.fhirValidatorService.showSuccessMessage("Formatting Attempted.");
    }
    clearUI() {
        this.fhirResource = '';
        this.fileName = '';
        this.clearValidationErrors();
        this.onResourceContentChanged.emit(this.fhirResource);
    }
    onClear() {
        this.clearUI();
    }
    onFileSelected(event) {
        const file = event.target.files[0];
        if (file) {
            if (file.size > this.maxFileSize) {
                console.error("File too big");
                this.fhirValidatorService.showErrorMessage("This file exceeds " + this.maxFileSize / 1000 + "kb and cannot be processed");
            }
            else {
                // auto toggle the file type radio buttons
                if (file.type === "text/xml") {
                    this.resourceFormat = 'xml';
                }
                else if ("application/json") {
                    this.resourceFormat = 'json';
                }
                // set the filename in the UI
                this.fileName = file.name;
                const reader = new FileReader();
                reader.readAsText(file, "UTF-8");
                reader.onload = () => {
                    this.fhirResource = reader.result;
                    this.onResourceContentChanged.emit(this.fhirResource);
                    this.formatFhirResource();
                };
                reader.onerror = () => {
                    this.fhirValidatorService.showErrorMessage("Unable to open the file.");
                };
            }
        }
        else {
            this.fhirValidatorService.showErrorMessage("Unable to open the file.");
        }
    }
    validateFhirResource(fhirResource, resourceFormat) {
        // Set the stage for the validation. Reset variables to default values.
        if (!fhirResource) {
            fhirResource = this.fhirResource;
        }
        if (!resourceFormat) {
            resourceFormat = this.resourceFormat;
        }
        if (!fhirResource || !(resourceFormat === 'json' || resourceFormat === 'xml')) {
            console.error("Invalid data passed to the validator.");
        }
        this.isValidResource = true;
        this.hasResponseData = false;
        this.serverErrorList = [];
        this.serverErrorStatus = '';
        this.serverErrorDetected = false;
        this.serverTimoutDetected = false;
        this.severityLevelsFormControl.patchValue(this.severityLevels);
        this.validationErrorStr = this.fhirValidatorService.getUiValidationMessages(fhirResource, resourceFormat);
        if (this.validationErrorStr) {
            //see if we can find any obvious issues with the resource here
            this.isValidResource = false;
            this.validationFinished = true;
            this.onValidation.emit({ hasBasicErrors: true, isValid: false, resource: fhirResource });
        }
        else {
            // The UI validation passed successfully, and we execute the backend validation.
            this.executeAPIValidation(fhirResource, resourceFormat);
        }
    }
    onPasteFhirResource(event) {
        this.fileName = '';
        if (!this.fhirResource) {
            this.clearUI();
        }
        let text = event.clipboardData?.getData('text') ?? '';
        if (this.fhirValidatorService.isJson(text)) {
            this.resourceFormat = 'json';
        }
        else if (this.fhirValidatorService.isXmlString(text)) {
            this.resourceFormat = 'xml';
        }
    }
    getLineNumbersBySeverity(apiResponse, severity) {
        if (!apiResponse || apiResponse.issue?.length === 0) {
            return [];
        }
        return apiResponse.issue
            .filter((element) => element.severity == severity)
            .map((element) => this.getLineNumberFromLocation(element.location[0]) - 1);
    }
    ;
    scrollToElement(location) {
        const element = document.querySelector(location);
        if (element)
            element.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    getLineNumberFromLocation(locationStr) {
        // Get the location from response
        return (locationStr?.length > 0) ? parseInt(locationStr.split(",")[0].replace(/^\D+/g, '')) : 0;
    }
    // When the user selects a location from the errors and warning results, we want to scroll the page to that location.
    onLocationSelected(response) {
        let locationId = ('#mark' + this.getLineNumberFromLocation(response.location[0])).toLowerCase();
        this.scrollToElement(locationId);
    }
    // Sends fhir resource to be validated, renders response
    executeAPIValidation(fhirResource, resourceFormat) {
        // Reset values to default state prior to validation.
        this.isLoading = true;
        this.parsedFhirResource = '';
        this.validationFinished = false;
        this.apiResponse = null;
        if (this.resourceFormat === "json") {
            fhirResource = JSON.parse(fhirResource);
        }
        else if (this.resourceFormat === "xml") {
            let fhirResourceXML = new DOMParser().parseFromString(fhirResource, 'text/xml');
            fhirResource = fhirResourceXML.documentElement.outerHTML;
        }
        this.fhirValidatorService.validateFhirResource(fhirResource, resourceFormat)
            .subscribe({
            next: (response) => {
                this.validationFinished = true;
                let issue = response.issue;
                if (issue.length === 1 && issue[0].severity === "Information" && issue[0]?.message.toLowerCase() === "ALL OK".toLowerCase()) {
                    this.isValidResource = true;
                    this.onValidation.emit({ isValid: true, resource: fhirResource });
                }
                else {
                    this.isValidResource = false;
                    this.validationErrorStr = "Please see the validation errors below.";
                    this.setValidatorResponse(response, fhirResource);
                }
                // Some strings produced by the validator are long and miss spaces. This could break the UI validation report.
                // Therefore, we insert a space after each coma found in the validation response text.
                issue.forEach((element) => {
                    element.diagnostics = element.diagnostics.replace(/,(?=[^\s])/g, ", ");
                });
                // sort by line numbers
                issue = issue.sort((a, b) => {
                    return this.getLineNumberFromLocation(a.location?.[0]) - this.getLineNumberFromLocation(b.location?.[0]);
                });
                // mat each item of the response to an object and make sure that the results are in expanded state in the
                // UI validation report.
                this.dataSource.data = issue.map((element) => {
                    let result = Object.assign({}, element);
                    result.expanded = true;
                    return result;
                });
                this.dataSource.filterPredicate = this.getFilterPredicate();
                this.apiResponse = response;
                this.apiResponse.formattedResource = response?.extension?.[0]?.valueString;
            },
            error: (err) => {
                this.isLoading = false;
                this.serverErrorDetected = true;
                this.serverErrorStatus = err.status;
                if (err?.error?.issue) {
                    this.serverErrorList = err.error.issue;
                }
                this.onApiError.emit(err);
                console.error(err);
            },
            complete: () => {
                this.isLoading = false;
            }
        });
        //TODO make sure to remove this function when the server side timeout is implemented.
        setTimeout(() => {
            if (this.isLoading) {
                this.isLoading = false;
                this.serverTimoutDetected = true;
            }
        }, this.SERVER_TIMEOUT_INTERVAL);
    }
    toggle() {
        this.allExpanded = !this.allExpanded;
        this.dataSource.data.forEach((item) => item.expanded = this.allExpanded);
    }
    onFilterResults() {
        this.dataSource.filter = this.severityLevelsFormControl.value.join(',');
    }
    getFilterPredicate() {
        return function (row, filters) {
            let matchFilter = false;
            const filterArray = filters.split(',');
            filterArray.forEach((filter) => {
                if (row.severity.toLowerCase().indexOf(filter.toLowerCase()) != -1) {
                    matchFilter = true;
                }
            });
            return matchFilter;
        };
    }
    onCancelValidation() {
        this.isLoading = false;
    }
    checkExpandCollapseAllStatus() {
        /*
        * When all elements are collapsed we want to change the expansion icon to render "expand all"
        * When all elements are expanded we want to change the expansion icon to "collapse all"
        * This will save extra unnecessary click for the user
        */
        const expandedElementsCount = this.dataSource.data.filter(element => element['expanded']).length;
        if (expandedElementsCount === this.dataSource.data.length) {
            this.allExpanded = true;
        }
        else if (expandedElementsCount === 0) {
            this.allExpanded = false;
        }
    }
    isFilterEnabled(severity) {
        return !!this.dataSource.data.find((element) => element.severity.toLowerCase() === severity.toLowerCase());
    }
    getCount(level) {
        return this.dataSource.data
            .filter((element) => element.severity.toLowerCase() === level.toLowerCase())
            .length;
    }
    onCloseServerErrorMessage() {
        this.serverErrorDetected = false;
        this.serverErrorList = [];
        this.serverErrorStatus = '';
    }
    setValidatorResponse(apiResponse, resource) {
        const errorsCount = apiResponse.issue.filter((element) => element.severity == 'error')?.length ?? 0;
        const warningsCount = apiResponse.issue.filter((element) => element.severity == 'warning')?.length ?? 0;
        const infoCount = apiResponse.issue.filter((element) => element.severity == 'information')?.length ?? 0;
        const notesCount = apiResponse.issue.filter((element) => element.severity == 'note')?.length ?? 0;
        let validationResult = {};
        validationResult.errorsCount = errorsCount;
        validationResult.warningsCount = warningsCount;
        validationResult.notesCount = notesCount;
        validationResult.infoCount = infoCount;
        validationResult.isValid = errorsCount <= 0;
        validationResult.resource = resource;
        this.onValidation.emit(validationResult);
    }
    clearValidationErrors() {
        this.validationErrorStr = '';
        this.isValidResource = false;
        this.parsedFhirResource = '';
        this.hasResponseData = false;
        this.validationFinished = false;
        this.isLoading = false;
        this.serverErrorDetected = false;
        this.serverErrorList = [];
        this.serverErrorStatus = '';
        this.serverTimoutDetected = false;
        this.apiResponse = null;
    }
    getLineItemClass(item, i) {
        if (this.getLineNumbersBySeverity(this.apiResponse, 'error').indexOf(i) != -1) {
            this.hasResponseData = true;
            return "error-mark";
        }
        else if (this.getLineNumbersBySeverity(this.apiResponse, 'warning').indexOf(i) != -1) {
            this.hasResponseData = true;
            return "warning-mark";
        }
        else if (this.getLineNumbersBySeverity(this.apiResponse, 'information').indexOf(i) != -1) {
            this.hasResponseData = true;
            return "info-mark";
        }
        else if (this.getLineNumbersBySeverity(this.apiResponse, 'note').indexOf(i) != -1) {
            this.hasResponseData = true;
            return "note-mark";
        }
        else
            return '';
    }
    exportValidationResults() {
        // Add the formatted resource form the validator response to a json file
        // This way the line numbers from the validator report will match the json file numbers
        const jsonResource = this?.apiResponse?.formattedResource || '';
        // Create a pdf report
        const resultsData = this.dataSource.data
            .map(element => { return { severity: element.severity, diagnostics: element.diagnostics, location: element.location, fhirPath: element?.expression?.[0] }; })
            .filter(item => this.severityLevelsFormControl.value.indexOf(item.severity) != -1);
        this.onExportValidationResults.emit({ jsonResource: jsonResource, resultsData: resultsData });
    }
}
NgxFhirValidatorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.2", ngImport: i0, type: NgxFhirValidatorComponent, deps: [{ token: i1.FhirValidatorService }], target: i0.ɵɵFactoryTarget.Component });
NgxFhirValidatorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.2", type: NgxFhirValidatorComponent, selector: "lib-ngx-fhir-validator", inputs: { validatorTitle: "validatorTitle", validationResultsExpanded: "validationResultsExpanded", resultDetailsExpandBtnShown: "resultDetailsExpandBtnShown", formatResourceBtnShown: "formatResourceBtnShown", clearValidatorBtnShown: "clearValidatorBtnShown", submitBtnShown: "submitBtnShown", exportResultsButtonShown: "exportResultsButtonShown", submitBtnTitle: "submitBtnTitle", validationInputFormat: "validationInputFormat", maxFileSize: "maxFileSize", submitBtnAlignment: "submitBtnAlignment", cancelValidationBtnShown: "cancelValidationBtnShown", buttonTxtColor: "buttonTxtColor", buttonBackgroundColor: "buttonBackgroundColor", exportValidationResultsBtnVisible: "exportValidationResultsBtnVisible", exportValidationResultsBtnName: "exportValidationResultsBtnName" }, outputs: { onValidation: "onValidation", onApiError: "onApiError", onResourceContentChanged: "onResourceContentChanged", onExportValidationResults: "onExportValidationResults" }, viewQueries: [{ propertyName: "inputRef", first: true, predicate: ["validatorInput"], descendants: true, read: ElementRef }], ngImport: i0, template: "<div class=\"spinner-container\" *ngIf=\"isLoading\">\n  <mat-spinner></mat-spinner>\n</div>\n\n<mat-card-header  *ngIf=\"validatorTitle\" id=\"validator-title\">\n  <mat-card-title>{{ validatorTitle }}</mat-card-title>\n</mat-card-header>\n\n\n<!-- The section below renders error messages returned by the validator.-->\n<div class=server-error-message-container *ngIf=\"serverErrorDetected\">\n  <button mat-button class=\"close-button\" color=\"accent\" aria-label=\"Close\" disableRipple\n          (click)=\"onCloseServerErrorMessage()\">\n    <mat-icon>close</mat-icon>\n  </button>\n  <div class=\"server-error-status\"><h2>Server Error Response Status: {{ serverErrorStatus }}</h2></div>\n  <div class=\"server-error-message-text\" *ngFor=\"let serverError of serverErrorList\"\n       [innerText]=\"serverError.diagnostics\"></div>\n</div>\n\n<!-- TODO remove this code when the API code is updated to return 408 on request timeout -->\n<div class=server-error-message-container *ngIf=\"serverTimoutDetected\">\n  <button mat-button class=\"close-button\" color=\"accent\" aria-label=\"Close\" disableRipple\n          (click)=\"serverTimoutDetected = false\">\n    <mat-icon>close</mat-icon>\n  </button>\n  <div class=\"server-error-status\"><h2>Server Timeout Error.</h2></div>\n</div>\n\n<!--Actions available above the FHIR validator input textarea-->\n<div class=\"row-button-wrapper\">\n\n  <!--Select JSON/XML radio group-->\n  <mat-radio-group [(ngModel)]=\"resourceFormat\" [disabled]=isLoading *ngIf=\"validationInputFormat.format == 'xml and json'\" >\n    <mat-radio-button\n      value=\"json\"\n      [checked]=\"resourceFormat =='json'\"\n      (select)=\"resourceFormat = 'json'\">\n      JSON\n    </mat-radio-button>\n    <mat-radio-button\n      value=\"xml\"\n      [checked]=\"resourceFormat =='xml'\"\n      (select)=\"resourceFormat = 'xml'\">\n      XML\n    </mat-radio-button>\n  </mat-radio-group>\n\n  <span class=\"content-spacer\" *ngIf=\"validationInputFormat?.format == 'xml and json'\"></span>\n\n  <!--File upload widget-->\n  <input type=\"file\" class=\"file-input\" (click)=\"fileUpload.value=null\"\n         [accept]=\"validationInputFormat?.accepts?.toString()\"\n         (change)=\"onFileSelected($event)\" #fileUpload>\n\n  <span class=\"filename\" *ngIf=\"validationInputFormat.format == 'xml and json'\">{{fileName}}</span>\n\n  <button mat-raised-button [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\"\n          class=\"upload-btn\"\n          (click)=\"clearUI(); fileUpload.click();\" [disabled]=isLoading>\n    <mat-icon>upload</mat-icon>\n    Upload\n  </button>\n\n  <span class=\"filename\" *ngIf=\"!(validationInputFormat.format == 'xml and json')\">{{fileName}}</span>\n</div>\n\n<!-- FHIR validator text editor-->\n<div class=\"textarea-wrapper\">\n  <div class=\"line-numbers\" #numbers>\n    <div *ngFor=\"let i of getLineNumbers();\"><div class=\"numbers\">{{i}}</div></div>\n  </div>\n  <textarea\n    #validatorInput\n    rows=\"30\"\n    [(ngModel)]=\"fhirResource\"\n    (ngModelChange)=\"onResourceContentChanged.emit(fhirResource)\"\n    [ngStyle]=\"{'border-color': (!!validationErrorStr) ? 'red': null }\"\n    (paste)=\"onPasteFhirResource($event)\"\n    [disabled]=\"isLoading\"\n    (input)=\"lineNumbers()\"\n    (scroll)=\"numbers.scrollTop = validatorInput.scrollTop\"\n  >\n      </textarea>\n</div>\n\n<!--Actions available below the FHIR validator input textarea-->\n<div class=\"row-button-wrapper\" *ngIf=\"formatResourceBtnShown || clearValidatorBtnShown || submitBtnShown || validationErrorStr\">\n\n  <span *ngIf=\"submitBtnShown && (submitBtnAlignment=='left') && !isLoading\">\n    <button mat-raised-button [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\" class=\"button\"\n            (click)=\"validateFhirResource(fhirResource, resourceFormat)\">\n      <mat-icon>send</mat-icon>\n      Submit\n    </button>\n  </span>\n\n  <button *ngIf=\"formatResourceBtnShown && !isLoading\" [ngClass]=\"{'left-margin-spacer': submitBtnAlignment=='left'}\" mat-raised-button\n          [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\"\n          (click)=\"onFormatInput();\"\n          [disabled]=\"!fhirResource\">\n    <mat-icon>code</mat-icon>\n    Format Input\n  </button>\n\n  <span class=\"content-spacer\"></span>\n  <span *ngIf=\"validationFinished\" id=\"error-response\">\n    <span class=\"danger-color\" *ngIf=\"!!validationErrorStr && !isValidResource\">{{validationErrorStr}}</span>\n    <span class=\"success-color\" *ngIf=\"isValidResource\"> This is a valid FHIR resource.</span>\n  </span>\n\n  <span class=\"content-spacer\"></span>\n\n  <button *ngIf=\"clearValidatorBtnShown && !isLoading\"\n          mat-raised-button color=\"success\" class=\"button\"\n          (click)=\"onClear()\">\n    <mat-icon>clear</mat-icon>\n    Clear Validator\n  </button>\n\n  <span class=\"left-margin-spacer\" *ngIf=\"submitBtnShown && (submitBtnAlignment =='right') && !isLoading\">\n    <button mat-raised-button color=\"accent\" class=\"button\"\n            (click)=\"validateFhirResource(fhirResource, resourceFormat)\">\n      <mat-icon>send</mat-icon>\n      {{ submitBtnTitle}}\n    </button>\n  </span>\n</div>\n\n<div class=\"row-button-wrapper top-padding\" *ngIf=\"isLoading && cancelValidationBtnShown\">\n  <span class=\"content-spacer\"></span>\n  <button mat-raised-button color=\"warn\" (click)=\"onCancelValidation()\">\n    <mat-icon>cancel</mat-icon>\n    Cancel Validation\n  </button>\n</div>\n\n<!-- Actions available after validator has processed data-->\n\n<div *ngIf=\"apiResponse?.issue && !isLoading\">\n  <div class=\"top-padding\">\n\n    <div (click)=\"onFilterResults()\">\n      <mat-button-toggle-group name=\"severity level filter\" [formControl]=\"severityLevelsFormControl\"\n                               aria-label=\"severity level filter\" multiple class=\"full-width\">\n        <mat-button-toggle\n          id=\"format-toggle-buttons\"\n          *ngFor=\"let level of severityLevels\"\n          [value]=\"level\"\n          [disabled]=\"!isFilterEnabled(level)\">\n          <!-- In order to synchronise the state of the button with the state of the checkbox, we simply show or hide\n          selected or deselected checkbox.-->\n          <mat-checkbox\n            *ngIf=\"severityLevelsFormControl?.value.indexOf(level) != -1\"\n            color=\"primary\"\n            [checked]=true\n            [disabled]=\"!isFilterEnabled(level)\"\n            [disableRipple]=\"true\"\n          >\n          </mat-checkbox>\n          <mat-checkbox\n            *ngIf=\"severityLevelsFormControl?.value.indexOf(level) === -1\"\n            color=\"primary\"\n            [checked]=false\n            [disabled]=\"!isFilterEnabled(level)\"\n            [disableRipple]=\"true\"\n          >\n          </mat-checkbox>\n          {{level | titlecase }} ({{getCount(level)}})\n        </mat-button-toggle>\n      </mat-button-toggle-group>\n    </div>\n\n    <div class=\"top-padding box\" *ngIf=\"validationResultsExpanded\">\n      <button mat-raised-button color=primary *ngIf=\"!resultDetailsExpandBtnShown\" (click)=\"resultDetailsExpandBtnShown = true\">\n        <mat-icon>expand_more</mat-icon> Expand Validation Results\n      </button>\n      <button mat-raised-button color=primary *ngIf=\"resultDetailsExpandBtnShown\" (click)=\"resultDetailsExpandBtnShown = false\">\n        <mat-icon>expand_less</mat-icon> Collapse Validation Results\n      </button>\n      <span class=\"content-spacer\"></span>\n      <button mat-raised-button (click)=\"exportValidationResults()\" *ngIf=\"exportResultsButtonShown\"\n              [disabled]=\"!(dataSource?.data?.length>0)\">\n        <mat-icon>folder_zip</mat-icon>\n        {{exportValidationResultsBtnName}}\n      </button>\n    </div>\n\n    <div *ngIf=\"severityLevelsFormControl?.value?.length === 0\">\n      Please select severity level to see the result.\n    </div>\n\n    <div class=\"top-padding box\" *ngIf=\"(!validationResultsExpanded) && exportResultsButtonShown\">\n      <button mat-stroked-button (click)=\"exportValidationResults()\"\n              [disabled]=\"!(dataSource?.data?.length>0)\" class=\"left-margin-md\">\n        <mat-icon>folder_zip</mat-icon>\n        {{exportValidationResultsBtnName}}\n      </button>\n    </div>\n\n    <table\n      mat-table [dataSource]=\"dataSource\" multiTemplateDataRows\n      *ngIf=\"severityLevelsFormControl?.value?.length > 0 && resultDetailsExpandBtnShown\">\n\n      <!-- First column contains expand/collapse widget. The user can chose to expand/collapse all rows,\n       as well as expand/collapse individual rows. Note that the expand/collapse all can be toggled automatically\n       based the state of the individual expand/collapse rows. For example if all rows are expanded and \"expand all\"\n       is rendered, we automatically hide it end render \"collapse all\" -->\n      <ng-container matColumnDef=\"toggle\">\n        <th mat-header-cell *matHeaderCellDef (click)=\"toggle()\">\n          <mat-icon *ngIf=\"!allExpanded\" class=\"pointer\" matTooltip=\"Expand All\" aria-label=\"expand all\">\n            expand_more\n          </mat-icon>\n          <mat-icon *ngIf=\"allExpanded\" class=\"pointer\" matTooltip=\"Collapse All\" aria-label=\"collapse all\">\n            expand_less\n          </mat-icon>\n        </th>\n        <td mat-cell *matCellDef=\"let validationResultItem\" class=\"pointer\"\n            (click)=\"validationResultItem.expanded = !validationResultItem.expanded; checkExpandCollapseAllStatus()\">\n          <mat-icon *ngIf=\"!validationResultItem.expanded\" aria-label=\"expand\">\n            expand_more\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.expanded\" aria-label=\"collapse\">\n            expand_less\n          </mat-icon>\n        </td>\n      </ng-container>\n\n      <!-- Severity level icons -->\n      <ng-container matColumnDef=\"icon\">\n        <th mat-header-cell *matHeaderCellDef></th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Error'\"\n                    class=\"danger-color\">error\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Warning'\"\n                    class=\"warning-color\">warning\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Information'\"\n                    class=\"success-color\">info\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Note'\"\n                    class=\"md-primary-color\">edit_note\n          </mat-icon>\n        </td>\n      </ng-container>\n\n      <!-- Severity level string -->\n      <ng-container matColumnDef=\"severity\">\n        <th mat-header-cell *matHeaderCellDef>Severity</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          {{validationResultItem.severity}}\n        </td>\n      </ng-container>\n\n      <!-- Severity level string -->\n      <ng-container matColumnDef=\"fhirPath\">\n        <th mat-header-cell *matHeaderCellDef>FHIR path</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          {{validationResultItem?.expression?.[0]}}\n        </td>\n      </ng-container>\n\n      <!-- The location as returned by the server. Note that the resource returned by the  response could be\n      formatted differently then the request resource. What this means is the the line numbers in the response\n      resource many not match those in the request.-->\n      <ng-container matColumnDef=\"location\">\n        <th mat-header-cell *matHeaderCellDef id=\"location-column-header\"> Location</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\" (click)=\"onLocationSelected(validationResultItem)\">\n          <span class=\"location-data\"> {{validationResultItem.location}}</span>\n        </td>\n      </ng-container>\n\n      <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->\n      <ng-container matColumnDef=\"expandedDetail\">\n        <td mat-cell *matCellDef=\"let validationResultItem\" [attr.colspan]=\"displayedColumns?.length\">\n          <div class=\"validation-result-detail\"\n               [@detailExpand]=\"validationResultItem.expanded ? 'expanded' : 'collapsed'\">\n            <div class=\"validation-result-text-value\">\n              {{validationResultItem.diagnostics}}\n            </div>\n          </div>\n        </td>\n      </ng-container>\n\n      <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n      <tr mat-row *matRowDef=\"let validationResultItem; columns: displayedColumns;\"\n          class=\"table-row\"\n          [class.expanded-row]=\"validationResultItem.expanded\">\n      <tr mat-row *matRowDef=\"let row; columns: ['expandedDetail']\" class=\"text-value-row\"></tr>\n\n    </table>\n\n  </div>\n\n  <!-- Resource as returned from the validator. Note that the resource returned from the validator may be\n   formatted differently then the resource we sent to the validator. -->\n  <div class=\"top-padding\" *ngIf=\"resultDetailsExpandBtnShown && apiResponse?.formattedResource\">\n    <div class=\"line-numbers-response\" #numbers>\n      <div *ngFor=\"let item of apiResponse?.formattedResource?.split('\\n'); let i = index\"><div class=\"numbers-response\">{{i + 1}}</div></div>\n    </div>\n    <div class=\"validator-response\">\n      <span *ngFor=\"let item of apiResponse?.formattedResource?.split('\\n'); let i = index\">\n        <pre [ngClass]=\"getLineItemClass(item, i)\" class=\"line-item\" [id]=\"'mark'+ (i+1)\">{{item}}</pre>\n      </span>\n    </div>\n  </div>\n\n</div>\n", styles: ["textarea{display:inline-block;border-color:#ccc;font-size:13px;line-height:16px;width:95%;padding-left:36px;height:50vh;white-space:nowrap;resize:none}.textarea-wrapper{margin-top:10px}.line-numbers{display:inline-block;position:absolute;text-align:-webkit-center;font-family:monospace;width:36px;line-height:16px;padding-top:3px;height:50.2vh;overflow:hidden;background:rgba(0,0,0,.1);border-radius:3px}.box{display:flex}.line-numbers-response{display:inline-block;position:absolute;text-align:-webkit-center;font-family:monospace;width:36px;line-height:16px;overflow:hidden;background:#E8E8E8;border-radius:3px}.numbers{font-size:13px}.validator-response{font-size:13px;line-height:16px;margin-left:36px;width:96%;font-family:monospace;background-color:#f8f8f8;overflow-x:scroll}.mat-radio-button{margin-right:16px;margin-bottom:10px}.file-input{display:none}.close-icon{float:right;color:#5f6368}#spaced-content{display:flex;flex-flow:row wrap}pre{white-space:pre-wrap}td.mat-cell{font-size:13px;font-family:monospace}.location-data{cursor:pointer;color:#3f51b5}.spinner-container{position:absolute;height:100px;width:100px;top:40%;left:50%;margin-left:-50px;margin-top:-50px}td,th{white-space:normal;word-wrap:break-word}#location-column-header{min-width:200px}#severity-column-header{min-width:300px}.left-margin-spacer{margin-left:16px}#error-response{font-size:large;font-weight:700}#validator-title{padding-left:0}table{width:100%}tr.text-value-row{height:0}.validation-result-row td{border-bottom-width:0}.validation-result-detail{overflow:hidden;display:flex}.validation-result-text-value{padding:16px}.expanded-row{background-color:#fafaff}.table-row{font-weight:700}.mat-button-toggle-checked{color:#303f9f;background-color:#e8eaf6;border:1px solid #7986cb}.row-button-wrapper{display:flex;align-items:center}mat-button-toggle{font-weight:700}.mat-button-toggle-disabled{background-color:#f5f5f5;color:#252525;border:1px solid whitesmoke}.mat-column-toggle,.mat-column-icon{width:5%!important}.mat-column-severity{width:10%!important}.mat-column-fhirPath{width:70%!important}.mat-column-location{width:10%!important}.close-button{float:right;right:-8px}.server-error-message-container{border-style:solid;border-width:1px;margin-top:16px;margin-bottom:16px;border-color:#d32f2f}.server-error-status{color:#d32f2f;margin-left:1em;margin-top:1em}.server-error-message-text{margin-left:16px;margin-bottom:16px;font-family:monospace}.filename{font-family:monospace;margin:0 16px}#format-toggle-buttons{width:25%}.content-spacer{flex:1 1 auto}.full-width{width:100%}.warning-mark{background-color:#fff2cc}.error-mark{background-color:#fcc}.info-mark{background-color:#dcedc8}.note-mark{background-color:#e3f2fd}.success-color{color:#28a745}.danger-color{color:#dc3549}.warning-color{color:#ffc107}.top-padding{padding-top:16px}.right-margin-md{margin-right:16px}.left-margin-md{margin-left:16px}.line-item{margin:0;white-space:pre}.right-aligned{display:flex;flex-direction:column;align-items:flex-end}\n"], dependencies: [{ kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { kind: "component", type: i3.MatButton, selector: "    button[mat-button], button[mat-raised-button], button[mat-flat-button],    button[mat-stroked-button]  ", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { kind: "directive", type: i4.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i4.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "component", type: i5.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i6.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { kind: "directive", type: i6.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { kind: "directive", type: i6.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { kind: "directive", type: i6.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { kind: "directive", type: i6.MatCellDef, selector: "[matCellDef]" }, { kind: "directive", type: i6.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }, { kind: "directive", type: i6.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { kind: "directive", type: i6.MatCell, selector: "mat-cell, td[mat-cell]" }, { kind: "component", type: i6.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { kind: "component", type: i6.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { kind: "component", type: i7.MatProgressSpinner, selector: "mat-progress-spinner, mat-spinner", inputs: ["color", "mode", "value", "diameter", "strokeWidth"], exportAs: ["matProgressSpinner"] }, { kind: "directive", type: i8.MatRadioGroup, selector: "mat-radio-group", exportAs: ["matRadioGroup"] }, { kind: "component", type: i8.MatRadioButton, selector: "mat-radio-button", inputs: ["disableRipple", "tabIndex"], exportAs: ["matRadioButton"] }, { kind: "directive", type: i4.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i9.MatCardHeader, selector: "mat-card-header" }, { kind: "directive", type: i9.MatCardTitle, selector: "mat-card-title, [mat-card-title], [matCardTitle]" }, { kind: "directive", type: i10.MatButtonToggleGroup, selector: "mat-button-toggle-group", inputs: ["appearance", "name", "vertical", "value", "multiple", "disabled"], outputs: ["valueChange", "change"], exportAs: ["matButtonToggleGroup"] }, { kind: "component", type: i10.MatButtonToggle, selector: "mat-button-toggle", inputs: ["disableRipple", "aria-label", "aria-labelledby", "id", "name", "value", "tabIndex", "appearance", "checked", "disabled"], outputs: ["change"], exportAs: ["matButtonToggle"] }, { kind: "component", type: i11.MatCheckbox, selector: "mat-checkbox", inputs: ["disableRipple", "color", "tabIndex"], exportAs: ["matCheckbox"] }, { kind: "directive", type: i12.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { kind: "pipe", type: i2.TitleCasePipe, name: "titlecase" }], animations: [
        trigger('detailExpand', [
            state('collapsed', style({ height: '0px', minHeight: '0' })),
            state('expanded', style({ height: '*' })),
            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),
        ]),
    ] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.2", ngImport: i0, type: NgxFhirValidatorComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-ngx-fhir-validator', animations: [
                        trigger('detailExpand', [
                            state('collapsed', style({ height: '0px', minHeight: '0' })),
                            state('expanded', style({ height: '*' })),
                            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),
                        ]),
                    ], template: "<div class=\"spinner-container\" *ngIf=\"isLoading\">\n  <mat-spinner></mat-spinner>\n</div>\n\n<mat-card-header  *ngIf=\"validatorTitle\" id=\"validator-title\">\n  <mat-card-title>{{ validatorTitle }}</mat-card-title>\n</mat-card-header>\n\n\n<!-- The section below renders error messages returned by the validator.-->\n<div class=server-error-message-container *ngIf=\"serverErrorDetected\">\n  <button mat-button class=\"close-button\" color=\"accent\" aria-label=\"Close\" disableRipple\n          (click)=\"onCloseServerErrorMessage()\">\n    <mat-icon>close</mat-icon>\n  </button>\n  <div class=\"server-error-status\"><h2>Server Error Response Status: {{ serverErrorStatus }}</h2></div>\n  <div class=\"server-error-message-text\" *ngFor=\"let serverError of serverErrorList\"\n       [innerText]=\"serverError.diagnostics\"></div>\n</div>\n\n<!-- TODO remove this code when the API code is updated to return 408 on request timeout -->\n<div class=server-error-message-container *ngIf=\"serverTimoutDetected\">\n  <button mat-button class=\"close-button\" color=\"accent\" aria-label=\"Close\" disableRipple\n          (click)=\"serverTimoutDetected = false\">\n    <mat-icon>close</mat-icon>\n  </button>\n  <div class=\"server-error-status\"><h2>Server Timeout Error.</h2></div>\n</div>\n\n<!--Actions available above the FHIR validator input textarea-->\n<div class=\"row-button-wrapper\">\n\n  <!--Select JSON/XML radio group-->\n  <mat-radio-group [(ngModel)]=\"resourceFormat\" [disabled]=isLoading *ngIf=\"validationInputFormat.format == 'xml and json'\" >\n    <mat-radio-button\n      value=\"json\"\n      [checked]=\"resourceFormat =='json'\"\n      (select)=\"resourceFormat = 'json'\">\n      JSON\n    </mat-radio-button>\n    <mat-radio-button\n      value=\"xml\"\n      [checked]=\"resourceFormat =='xml'\"\n      (select)=\"resourceFormat = 'xml'\">\n      XML\n    </mat-radio-button>\n  </mat-radio-group>\n\n  <span class=\"content-spacer\" *ngIf=\"validationInputFormat?.format == 'xml and json'\"></span>\n\n  <!--File upload widget-->\n  <input type=\"file\" class=\"file-input\" (click)=\"fileUpload.value=null\"\n         [accept]=\"validationInputFormat?.accepts?.toString()\"\n         (change)=\"onFileSelected($event)\" #fileUpload>\n\n  <span class=\"filename\" *ngIf=\"validationInputFormat.format == 'xml and json'\">{{fileName}}</span>\n\n  <button mat-raised-button [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\"\n          class=\"upload-btn\"\n          (click)=\"clearUI(); fileUpload.click();\" [disabled]=isLoading>\n    <mat-icon>upload</mat-icon>\n    Upload\n  </button>\n\n  <span class=\"filename\" *ngIf=\"!(validationInputFormat.format == 'xml and json')\">{{fileName}}</span>\n</div>\n\n<!-- FHIR validator text editor-->\n<div class=\"textarea-wrapper\">\n  <div class=\"line-numbers\" #numbers>\n    <div *ngFor=\"let i of getLineNumbers();\"><div class=\"numbers\">{{i}}</div></div>\n  </div>\n  <textarea\n    #validatorInput\n    rows=\"30\"\n    [(ngModel)]=\"fhirResource\"\n    (ngModelChange)=\"onResourceContentChanged.emit(fhirResource)\"\n    [ngStyle]=\"{'border-color': (!!validationErrorStr) ? 'red': null }\"\n    (paste)=\"onPasteFhirResource($event)\"\n    [disabled]=\"isLoading\"\n    (input)=\"lineNumbers()\"\n    (scroll)=\"numbers.scrollTop = validatorInput.scrollTop\"\n  >\n      </textarea>\n</div>\n\n<!--Actions available below the FHIR validator input textarea-->\n<div class=\"row-button-wrapper\" *ngIf=\"formatResourceBtnShown || clearValidatorBtnShown || submitBtnShown || validationErrorStr\">\n\n  <span *ngIf=\"submitBtnShown && (submitBtnAlignment=='left') && !isLoading\">\n    <button mat-raised-button [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\" class=\"button\"\n            (click)=\"validateFhirResource(fhirResource, resourceFormat)\">\n      <mat-icon>send</mat-icon>\n      Submit\n    </button>\n  </span>\n\n  <button *ngIf=\"formatResourceBtnShown && !isLoading\" [ngClass]=\"{'left-margin-spacer': submitBtnAlignment=='left'}\" mat-raised-button\n          [style.background-color]=\"buttonBackgroundColor\" [style.color]=\"buttonTxtColor\"\n          (click)=\"onFormatInput();\"\n          [disabled]=\"!fhirResource\">\n    <mat-icon>code</mat-icon>\n    Format Input\n  </button>\n\n  <span class=\"content-spacer\"></span>\n  <span *ngIf=\"validationFinished\" id=\"error-response\">\n    <span class=\"danger-color\" *ngIf=\"!!validationErrorStr && !isValidResource\">{{validationErrorStr}}</span>\n    <span class=\"success-color\" *ngIf=\"isValidResource\"> This is a valid FHIR resource.</span>\n  </span>\n\n  <span class=\"content-spacer\"></span>\n\n  <button *ngIf=\"clearValidatorBtnShown && !isLoading\"\n          mat-raised-button color=\"success\" class=\"button\"\n          (click)=\"onClear()\">\n    <mat-icon>clear</mat-icon>\n    Clear Validator\n  </button>\n\n  <span class=\"left-margin-spacer\" *ngIf=\"submitBtnShown && (submitBtnAlignment =='right') && !isLoading\">\n    <button mat-raised-button color=\"accent\" class=\"button\"\n            (click)=\"validateFhirResource(fhirResource, resourceFormat)\">\n      <mat-icon>send</mat-icon>\n      {{ submitBtnTitle}}\n    </button>\n  </span>\n</div>\n\n<div class=\"row-button-wrapper top-padding\" *ngIf=\"isLoading && cancelValidationBtnShown\">\n  <span class=\"content-spacer\"></span>\n  <button mat-raised-button color=\"warn\" (click)=\"onCancelValidation()\">\n    <mat-icon>cancel</mat-icon>\n    Cancel Validation\n  </button>\n</div>\n\n<!-- Actions available after validator has processed data-->\n\n<div *ngIf=\"apiResponse?.issue && !isLoading\">\n  <div class=\"top-padding\">\n\n    <div (click)=\"onFilterResults()\">\n      <mat-button-toggle-group name=\"severity level filter\" [formControl]=\"severityLevelsFormControl\"\n                               aria-label=\"severity level filter\" multiple class=\"full-width\">\n        <mat-button-toggle\n          id=\"format-toggle-buttons\"\n          *ngFor=\"let level of severityLevels\"\n          [value]=\"level\"\n          [disabled]=\"!isFilterEnabled(level)\">\n          <!-- In order to synchronise the state of the button with the state of the checkbox, we simply show or hide\n          selected or deselected checkbox.-->\n          <mat-checkbox\n            *ngIf=\"severityLevelsFormControl?.value.indexOf(level) != -1\"\n            color=\"primary\"\n            [checked]=true\n            [disabled]=\"!isFilterEnabled(level)\"\n            [disableRipple]=\"true\"\n          >\n          </mat-checkbox>\n          <mat-checkbox\n            *ngIf=\"severityLevelsFormControl?.value.indexOf(level) === -1\"\n            color=\"primary\"\n            [checked]=false\n            [disabled]=\"!isFilterEnabled(level)\"\n            [disableRipple]=\"true\"\n          >\n          </mat-checkbox>\n          {{level | titlecase }} ({{getCount(level)}})\n        </mat-button-toggle>\n      </mat-button-toggle-group>\n    </div>\n\n    <div class=\"top-padding box\" *ngIf=\"validationResultsExpanded\">\n      <button mat-raised-button color=primary *ngIf=\"!resultDetailsExpandBtnShown\" (click)=\"resultDetailsExpandBtnShown = true\">\n        <mat-icon>expand_more</mat-icon> Expand Validation Results\n      </button>\n      <button mat-raised-button color=primary *ngIf=\"resultDetailsExpandBtnShown\" (click)=\"resultDetailsExpandBtnShown = false\">\n        <mat-icon>expand_less</mat-icon> Collapse Validation Results\n      </button>\n      <span class=\"content-spacer\"></span>\n      <button mat-raised-button (click)=\"exportValidationResults()\" *ngIf=\"exportResultsButtonShown\"\n              [disabled]=\"!(dataSource?.data?.length>0)\">\n        <mat-icon>folder_zip</mat-icon>\n        {{exportValidationResultsBtnName}}\n      </button>\n    </div>\n\n    <div *ngIf=\"severityLevelsFormControl?.value?.length === 0\">\n      Please select severity level to see the result.\n    </div>\n\n    <div class=\"top-padding box\" *ngIf=\"(!validationResultsExpanded) && exportResultsButtonShown\">\n      <button mat-stroked-button (click)=\"exportValidationResults()\"\n              [disabled]=\"!(dataSource?.data?.length>0)\" class=\"left-margin-md\">\n        <mat-icon>folder_zip</mat-icon>\n        {{exportValidationResultsBtnName}}\n      </button>\n    </div>\n\n    <table\n      mat-table [dataSource]=\"dataSource\" multiTemplateDataRows\n      *ngIf=\"severityLevelsFormControl?.value?.length > 0 && resultDetailsExpandBtnShown\">\n\n      <!-- First column contains expand/collapse widget. The user can chose to expand/collapse all rows,\n       as well as expand/collapse individual rows. Note that the expand/collapse all can be toggled automatically\n       based the state of the individual expand/collapse rows. For example if all rows are expanded and \"expand all\"\n       is rendered, we automatically hide it end render \"collapse all\" -->\n      <ng-container matColumnDef=\"toggle\">\n        <th mat-header-cell *matHeaderCellDef (click)=\"toggle()\">\n          <mat-icon *ngIf=\"!allExpanded\" class=\"pointer\" matTooltip=\"Expand All\" aria-label=\"expand all\">\n            expand_more\n          </mat-icon>\n          <mat-icon *ngIf=\"allExpanded\" class=\"pointer\" matTooltip=\"Collapse All\" aria-label=\"collapse all\">\n            expand_less\n          </mat-icon>\n        </th>\n        <td mat-cell *matCellDef=\"let validationResultItem\" class=\"pointer\"\n            (click)=\"validationResultItem.expanded = !validationResultItem.expanded; checkExpandCollapseAllStatus()\">\n          <mat-icon *ngIf=\"!validationResultItem.expanded\" aria-label=\"expand\">\n            expand_more\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.expanded\" aria-label=\"collapse\">\n            expand_less\n          </mat-icon>\n        </td>\n      </ng-container>\n\n      <!-- Severity level icons -->\n      <ng-container matColumnDef=\"icon\">\n        <th mat-header-cell *matHeaderCellDef></th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Error'\"\n                    class=\"danger-color\">error\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Warning'\"\n                    class=\"warning-color\">warning\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Information'\"\n                    class=\"success-color\">info\n          </mat-icon>\n          <mat-icon *ngIf=\"validationResultItem.severity === 'Note'\"\n                    class=\"md-primary-color\">edit_note\n          </mat-icon>\n        </td>\n      </ng-container>\n\n      <!-- Severity level string -->\n      <ng-container matColumnDef=\"severity\">\n        <th mat-header-cell *matHeaderCellDef>Severity</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          {{validationResultItem.severity}}\n        </td>\n      </ng-container>\n\n      <!-- Severity level string -->\n      <ng-container matColumnDef=\"fhirPath\">\n        <th mat-header-cell *matHeaderCellDef>FHIR path</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\">\n          {{validationResultItem?.expression?.[0]}}\n        </td>\n      </ng-container>\n\n      <!-- The location as returned by the server. Note that the resource returned by the  response could be\n      formatted differently then the request resource. What this means is the the line numbers in the response\n      resource many not match those in the request.-->\n      <ng-container matColumnDef=\"location\">\n        <th mat-header-cell *matHeaderCellDef id=\"location-column-header\"> Location</th>\n        <td mat-cell *matCellDef=\"let validationResultItem\" (click)=\"onLocationSelected(validationResultItem)\">\n          <span class=\"location-data\"> {{validationResultItem.location}}</span>\n        </td>\n      </ng-container>\n\n      <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->\n      <ng-container matColumnDef=\"expandedDetail\">\n        <td mat-cell *matCellDef=\"let validationResultItem\" [attr.colspan]=\"displayedColumns?.length\">\n          <div class=\"validation-result-detail\"\n               [@detailExpand]=\"validationResultItem.expanded ? 'expanded' : 'collapsed'\">\n            <div class=\"validation-result-text-value\">\n              {{validationResultItem.diagnostics}}\n            </div>\n          </div>\n        </td>\n      </ng-container>\n\n      <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n      <tr mat-row *matRowDef=\"let validationResultItem; columns: displayedColumns;\"\n          class=\"table-row\"\n          [class.expanded-row]=\"validationResultItem.expanded\">\n      <tr mat-row *matRowDef=\"let row; columns: ['expandedDetail']\" class=\"text-value-row\"></tr>\n\n    </table>\n\n  </div>\n\n  <!-- Resource as returned from the validator. Note that the resource returned from the validator may be\n   formatted differently then the resource we sent to the validator. -->\n  <div class=\"top-padding\" *ngIf=\"resultDetailsExpandBtnShown && apiResponse?.formattedResource\">\n    <div class=\"line-numbers-response\" #numbers>\n      <div *ngFor=\"let item of apiResponse?.formattedResource?.split('\\n'); let i = index\"><div class=\"numbers-response\">{{i + 1}}</div></div>\n    </div>\n    <div class=\"validator-response\">\n      <span *ngFor=\"let item of apiResponse?.formattedResource?.split('\\n'); let i = index\">\n        <pre [ngClass]=\"getLineItemClass(item, i)\" class=\"line-item\" [id]=\"'mark'+ (i+1)\">{{item}}</pre>\n      </span>\n    </div>\n  </div>\n\n</div>\n", styles: ["textarea{display:inline-block;border-color:#ccc;font-size:13px;line-height:16px;width:95%;padding-left:36px;height:50vh;white-space:nowrap;resize:none}.textarea-wrapper{margin-top:10px}.line-numbers{display:inline-block;position:absolute;text-align:-webkit-center;font-family:monospace;width:36px;line-height:16px;padding-top:3px;height:50.2vh;overflow:hidden;background:rgba(0,0,0,.1);border-radius:3px}.box{display:flex}.line-numbers-response{display:inline-block;position:absolute;text-align:-webkit-center;font-family:monospace;width:36px;line-height:16px;overflow:hidden;background:#E8E8E8;border-radius:3px}.numbers{font-size:13px}.validator-response{font-size:13px;line-height:16px;margin-left:36px;width:96%;font-family:monospace;background-color:#f8f8f8;overflow-x:scroll}.mat-radio-button{margin-right:16px;margin-bottom:10px}.file-input{display:none}.close-icon{float:right;color:#5f6368}#spaced-content{display:flex;flex-flow:row wrap}pre{white-space:pre-wrap}td.mat-cell{font-size:13px;font-family:monospace}.location-data{cursor:pointer;color:#3f51b5}.spinner-container{position:absolute;height:100px;width:100px;top:40%;left:50%;margin-left:-50px;margin-top:-50px}td,th{white-space:normal;word-wrap:break-word}#location-column-header{min-width:200px}#severity-column-header{min-width:300px}.left-margin-spacer{margin-left:16px}#error-response{font-size:large;font-weight:700}#validator-title{padding-left:0}table{width:100%}tr.text-value-row{height:0}.validation-result-row td{border-bottom-width:0}.validation-result-detail{overflow:hidden;display:flex}.validation-result-text-value{padding:16px}.expanded-row{background-color:#fafaff}.table-row{font-weight:700}.mat-button-toggle-checked{color:#303f9f;background-color:#e8eaf6;border:1px solid #7986cb}.row-button-wrapper{display:flex;align-items:center}mat-button-toggle{font-weight:700}.mat-button-toggle-disabled{background-color:#f5f5f5;color:#252525;border:1px solid whitesmoke}.mat-column-toggle,.mat-column-icon{width:5%!important}.mat-column-severity{width:10%!important}.mat-column-fhirPath{width:70%!important}.mat-column-location{width:10%!important}.close-button{float:right;right:-8px}.server-error-message-container{border-style:solid;border-width:1px;margin-top:16px;margin-bottom:16px;border-color:#d32f2f}.server-error-status{color:#d32f2f;margin-left:1em;margin-top:1em}.server-error-message-text{margin-left:16px;margin-bottom:16px;font-family:monospace}.filename{font-family:monospace;margin:0 16px}#format-toggle-buttons{width:25%}.content-spacer{flex:1 1 auto}.full-width{width:100%}.warning-mark{background-color:#fff2cc}.error-mark{background-color:#fcc}.info-mark{background-color:#dcedc8}.note-mark{background-color:#e3f2fd}.success-color{color:#28a745}.danger-color{color:#dc3549}.warning-color{color:#ffc107}.top-padding{padding-top:16px}.right-margin-md{margin-right:16px}.left-margin-md{margin-left:16px}.line-item{margin:0;white-space:pre}.right-aligned{display:flex;flex-direction:column;align-items:flex-end}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.FhirValidatorService }]; }, propDecorators: { validatorTitle: [{
                type: Input
            }], validationResultsExpanded: [{
                type: Input
            }], resultDetailsExpandBtnShown: [{
                type: Input
            }], formatResourceBtnShown: [{
                type: Input
            }], clearValidatorBtnShown: [{
                type: Input
            }], submitBtnShown: [{
                type: Input
            }], exportResultsButtonShown: [{
                type: Input
            }], submitBtnTitle: [{
                type: Input
            }], validationInputFormat: [{
                type: Input
            }], maxFileSize: [{
                type: Input
            }], submitBtnAlignment: [{
                type: Input
            }], cancelValidationBtnShown: [{
                type: Input
            }], buttonTxtColor: [{
                type: Input
            }], buttonBackgroundColor: [{
                type: Input
            }], exportValidationResultsBtnVisible: [{
                type: Input
            }], exportValidationResultsBtnName: [{
                type: Input
            }], onValidation: [{
                type: Output
            }], onApiError: [{
                type: Output
            }], onResourceContentChanged: [{
                type: Output
            }], onExportValidationResults: [{
                type: Output
            }], inputRef: [{
                type: ViewChild,
                args: ['validatorInput', { static: false, read: ElementRef }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWZoaXItdmFsaWRhdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1maGlyLXZhbGlkYXRvci9zcmMvbGliL2NvbXBvbmVudHMvbmd4LWZoaXItdmFsaWRhdG9yLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1maGlyLXZhbGlkYXRvci9zcmMvbGliL2NvbXBvbmVudHMvbmd4LWZoaXItdmFsaWRhdG9yLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBQ0wsTUFBTSxFQUNOLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUMsa0JBQWtCLEVBQUMsTUFBTSxrQ0FBa0MsQ0FBQztBQUNwRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUNuRCxPQUFPLEVBQUMsa0JBQWtCLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUkzRCxPQUFPLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBQyxNQUFNLHFCQUFxQixDQUFDOzs7Ozs7Ozs7Ozs7OztBQW1CL0UsTUFBTSxPQUFPLHlCQUF5QjtJQW1EcEMsWUFDVSxvQkFBMEM7UUFBMUMseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFzQjtRQW5EM0MsbUJBQWMsR0FBVyxFQUFFLENBQUM7UUFDNUIsOEJBQXlCLEdBQVksS0FBSyxDQUFDLENBQUMsMkNBQTJDO1FBQ3ZGLGdDQUEyQixHQUFZLElBQUksQ0FBQyxDQUFDLDBDQUEwQztRQUN2RiwyQkFBc0IsR0FBWSxLQUFLLENBQUMsQ0FBQyxnQ0FBZ0M7UUFDekUsMkJBQXNCLEdBQVksSUFBSSxDQUFDLENBQUMsZ0NBQWdDO1FBQ3hFLG1CQUFjLEdBQVks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b21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtWYWxpZGF0b3JDb25zdGFudHN9IGZyb20gXCIuLi9wcm92aWRlcnMvdmFsaWRhdG9yLWNvbnN0YW50c1wiO1xuaW1wb3J0IHsgVW50eXBlZEZvcm1Db250cm9sfSBmcm9tIFwiQGFuZ3VsYXIvZm9ybXNcIjtcbmltcG9ydCB7TWF0VGFibGVEYXRhU291cmNlfSBmcm9tIFwiQGFuZ3VsYXIvbWF0ZXJpYWwvdGFibGVcIjtcbmltcG9ydCB7RmhpclZhbGlkYXRvclNlcnZpY2V9IGZyb20gXCIuLi9zZXJ2aWNlcy9maGlyLXZhbGlkYXRvci5zZXJ2aWNlXCI7XG5pbXBvcnQge1Jlc3BvbnNlSXRlbX0gZnJvbSBcIi4uL21vZGFsL3Jlc3BvbnNlLWl0ZW1cIjtcbmltcG9ydCB7VmFsaWRhdGlvblJlc3VsdHN9IGZyb20gXCIuLi9tb2RhbC92YWxpZGF0aW9uLXJlc3VsdHNcIjtcbmltcG9ydCB7YW5pbWF0ZSwgc3RhdGUsIHN0eWxlLCB0cmFuc2l0aW9uLCB0cmlnZ2VyfSBmcm9tIFwiQGFuZ3VsYXIvYW5pbWF0aW9uc1wiO1xuaW1wb3J0IHtBcGlSZXNwb25zZX0gZnJvbSBcIi4uL21vZGFsL2FwaS1yZXNwb25zZVwiO1xuaW1wb3J0IHtWYWxpZGF0b3JJbnB1dH0gZnJvbSBcIi4uL21vZGFsL3ZhbGlkYXRvci1pbnB1dC1mb3JtYXRcIjtcblxuZXhwb3J0IHR5cGUgU3VibWl0QnV0dG9uQWxpZ25tZW50ID0gJ2xlZnQnIHwgJ3JpZ2h0JztcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpYi1uZ3gtZmhpci12YWxpZGF0b3InLFxuICB0ZW1wbGF0ZVVybDogJ25neC1maGlyLXZhbGlkYXRvci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWyduZ3gtZmhpci12YWxpZGF0b3IuY29tcG9uZW50LmNzcyddLFxuICBhbmltYXRpb25zOiBbXG4gICAgdHJpZ2dlcignZGV0YWlsRXhwYW5kJywgW1xuICAgICAgc3RhdGUoJ2NvbGxhcHNlZCcsIHN0eWxlKHtoZWlnaHQ6ICcwcHgnLCBtaW5IZWlnaHQ6ICcwJ30pKSxcbiAgICAgIHN0YXRlKCdleHBhbmRlZCcsIHN0eWxlKHtoZWlnaHQ6ICcqJ30pKSxcbiAgICAgIHRyYW5zaXRpb24oJ2V4cGFuZGVkIDw9PiBjb2xsYXBzZWQnLCBhbmltYXRlKCcyMjVtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSknKSksXG4gICAgXSksXG4gIF0sXG59KVxuXG5cbmV4cG9ydCBjbGFzcyBOZ3hGaGlyVmFsaWRhdG9yQ29tcG9uZW50IHtcbiAgQElucHV0KCkgdmFsaWRhdG9yVGl0bGU6IHN0cmluZyA9ICcnO1xuICBASW5wdXQoKSB2YWxpZGF0aW9uUmVzdWx0c0V4cGFuZGVkOiBib29sZWFuID0gZmFsc2U7IC8vIFZhbGlkYXRpb24gcmVzdWx0cyBkZXRhaWxzIGluaXRpYWwgc3RhdGVcbiAgQElucHV0KCkgcmVzdWx0RGV0YWlsc0V4cGFuZEJ0blNob3duOiBib29sZWFuID0gdHJ1ZTsgLy8gU2hvdy9oaWRlIEV4cGFuZCBWYWxpZGF0aW9uIFJlc3VsdHMgYnRuXG4gIEBJbnB1dCgpIGZvcm1hdFJlc291cmNlQnRuU2hvd246IGJvb2xlYW4gPSBmYWxzZTsgLy8gU2hvdy9oaWRlIEZvcm1hdCBSZXNvdXJjZSBidG5cbiAgQElucHV0KCkgY2xlYXJWYWxpZGF0b3JCdG5TaG93bjogYm9vbGVhbiA9IHRydWU7IC8vIFNob3cvaGlkZSBDbGVhciBWYWxpZGF0b3IgYnRuXG4gIEBJbnB1dCgpIHN1Ym1pdEJ0blNob3duOiBib29sZWFuID0gdHJ1ZTsgLy8gU2hvdy9oaWRlIFN1Ym1pdCBidG5cbiAgQElucHV0KCkgZXhwb3J0UmVzdWx0c0J1dHRvblNob3duID0gdHJ1ZTtcbiAgQElucHV0KCkgc3VibWl0QnRuVGl0bGU6IHN0cmluZyA9ICdTdWJtaXQnOyAvL1RoZSBzdWJtaXQgYnV0dG9uIHRpdGxlLiBcIlN1Ym1pdFwiIGlzIGdlbmVyaWMgbmFtZSBhbmQgb3RoZXIgYXBwcyBtYXkgd2FudCB0byBjaGFuZ2UgaXRcbiAgQElucHV0KCkgdmFsaWRhdGlvbklucHV0Rm9ybWF0OiBWYWxpZGF0b3JJbnB1dCA9IHtmb3JtYXQ6ICdqc29uJywgYWNjZXB0czogJy5qc29uJ307XG4gIEBJbnB1dCgpIG1heEZpbGVTaXplID0gMjUwMDAwIC8vIE1heCBhbGxvd2VkIGZpbGUgc2l6ZSBpcyAyNTBLQlxuICBASW5wdXQoKSBzdWJtaXRCdG5BbGlnbm1lbnQ6IFN1Ym1pdEJ1dHRvbkFsaWdubWVudCA9ICdyaWdodCc7IC8vIFRoZSBkZWZhdWx0IGxvY2F0aW9uIGZvciB0aGUgU3VibWl0IGJ0blxuICBASW5wdXQoKSBjYW5jZWxWYWxpZGF0aW9uQnRuU2hvd246IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXQoKSBidXR0b25UeHRDb2xvcjogc3RyaW5nICA9ICd3aGl0ZSc7XG4gIEBJbnB1dCgpIGJ1dHRvbkJhY2tncm91bmRDb2xvcj0nIzQ4NThCOCc7XG4gIEBJbnB1dCgpIGV4cG9ydFZhbGlkYXRpb25SZXN1bHRzQnRuVmlzaWJsZT0gZmFsc2U7XG4gIEBJbnB1dCgpIGV4cG9ydFZhbGlkYXRpb25SZXN1bHRzQnRuTmFtZTogc3RyaW5nID0gJ0V4cG9ydCBSZXN1bHRzICguemlwKSc7XG5cbiAgQE91dHB1dCgpIG9uVmFsaWRhdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXI8VmFsaWRhdGlvblJlc3VsdHM+KCk7XG4gIEBPdXRwdXQoKSBvbkFwaUVycm9yID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBvblJlc291cmNlQ29udGVudENoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIG9uRXhwb3J0VmFsaWRhdGlvblJlc3VsdHMgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuXG4gIEBWaWV3Q2hpbGQoJ3ZhbGlkYXRvcklucHV0Jyx7c3RhdGljOmZhbHNlLCByZWFkOiBFbGVtZW50UmVmfSkgaW5wdXRSZWY6IGFueTtcblxuICBhcGlSZXNwb25zZTogQXBpUmVzcG9uc2UgfCBudWxsO1xuICBmaGlyUmVzb3VyY2U6IHN0cmluZyA9ICcnLy8gVGhlIFJlc291cmNlLlxuICByZXNvdXJjZUZvcm1hdCA9ICdqc29uJzsgLy8gVGhlIHJlc291cmNlIGZvcm1hdCBjb3VsZCBiZSBKU09OIG9yIFhNTCwgd2l0aCBKU09OIGJlaW5nIHRoZSBkZWZhdWx0IGZvcm1hdC5cbiAgZmlsZU5hbWU6IHN0cmluZyA9ICcnOyAvLyBOYW1lIG9mIHRoZSBmaWxlIHVwbG9hZGVkIGJ5IHRoZSB1c2VyLiBXZSBuZWVkIHRoaXMgdG8gcmVuZGVyIHRoZSBmaWxlbmFtZSBpbiB0aGUgVUkuXG4gIHZhbGlkYXRpb25FcnJvclN0cjogc3RyaW5nID0gJyc7IC8vIFdlIHVzZSB0aGlzIHZhbHVlIHRvIHN0b3JlIHByZWxpbWluYXJ5IGVycm9yIG1lc3NhZ2VzIG9yIGEgZ2VuZXJpYyBlcnJvciBtZXNzYWdlLlxuICBoYXNSZXNwb25zZURhdGEgPSBmYWxzZTsgIC8vIEluZGljYXRlcyBpZiB0aGUgcmVzcG9uc2UgZ2VuZXJhdGVkIGFueSBtZXNzYWdlcy4gSWYgdHJ1ZSwgd2UgcmVuZGVyIHRoZSByZXBvcnRcbiAgcGFyc2VkRmhpclJlc291cmNlOiBzdHJpbmcgPSAnJzsgLy8gV2Ugc3RvcmUgdmFsdWUgb2YgdGhlIHZhbGlkYXRvciByZXN1bHQgaW4gb3JkZXIgdG8gcHJlc2VudCBpdCB0byB0aGUgdXNlci5cbiAgZGlzcGxheWVkQ29sdW1uczogc3RyaW5nW107XG4gIGlzTG9hZGluZyA9IGZhbHNlO1xuICBhbGxFeHBhbmRlZCA9IHRydWU7IC8vIFVzZWQgdG8gcmVuZGVyIGNvbGxhcHNlZC9leHBhbmRlZCBhbGwgaWNvbiBhcyB3ZWxsIGFzIGNhbGN1bGF0ZSBpZiBhbGwgcmVzdWx0cyBhcmUgZXhwYW5kZWQvY29sbGFwc2VkXG4gIHNldmVyaXR5TGV2ZWxzID0gVmFsaWRhdG9yQ29uc3RhbnRzLlNFVkVSSVRZX0xFVkVMUztcbiAgc2V2ZXJpdHlMZXZlbHNGb3JtQ29udHJvbDogVW50eXBlZEZvcm1Db250cm9sOyAvLyBBIHNpbXBsZSBmb3JtIGNvbnRyb2wgdXNlZCBmb3IgZmlsdGVyaW5nIHRoZSByZXN1bHRzLlxuICBkYXRhU291cmNlOiBNYXRUYWJsZURhdGFTb3VyY2U8YW55PjsvLyBEYXRhIHNvdXJjZSBmb3IgdGhlIHJlcG9ydCB0YWJsZS5cbiAgdmFsaWRhdGlvbkZpbmlzaGVkID0gZmFsc2U7XG4gIGlzVmFsaWRSZXNvdXJjZSA9IGZhbHNlOyAvLyBXZSB1c2UgdGhpcyB0byByZW5kZXIgdGhlIHN1Y2Nlc3MgbWVzc2FnZVxuICBzZXJ2ZXJFcnJvckRldGVjdGVkID0gZmFsc2U7IC8vIFRyYWNrcyBpZiB0aGUgc2VydmVyIGhhcyByZXNwb25kZWQgd2l0aCBhbiBlcnJvciAoNDA0LCA1MDApLiBVc2VkIHRvIHJlbmRlciB0aGUgZXJyb3IgaW4gVUkuXG4gIHNlcnZlckVycm9yTGlzdDogYW55IFtdID0gW107IC8vIFN0b3JlIHRoZSBkYXRhIGZyb20gdGhlIE9wZXJhdGlvbk91dGNvbWUgcmVzb3VyY2VcbiAgc2VydmVyRXJyb3JTdGF0dXM6IHN0cmluZyA9ICcnOyAvLyBXZSBzdG9yZSB0aGUgZXJyb3IgcmVzcG9uc2Ugc3RhdHVzIGhlcmUgKGkuZS4gNDA0LCA1MDApXG4gIGxpbmVzIDogbnVtYmVyID0gMTtcbiAgd2lkdGggOiBudW1iZXIgPSAwO1xuXG4gIC8vVE9ETyByZW1vdmUgdGhpcyBjb2RlIHdoZW4gdGhlIEFQSSByZXR1cm5zIGEgdGltZW91dCBlcnJvclxuICBzZXJ2ZXJUaW1vdXREZXRlY3RlZCA9IGZhbHNlO1xuICBTRVJWRVJfVElNRU9VVF9JTlRFUlZBTCA9IDI0MDAwMDsgLy9mb3VyIG1pbnV0ZXNcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGZoaXJWYWxpZGF0b3JTZXJ2aWNlOiBGaGlyVmFsaWRhdG9yU2VydmljZSxcbiAgKSB7XG4gICAgdGhpcy5kaXNwbGF5ZWRDb2x1bW5zID0gVmFsaWRhdG9yQ29uc3RhbnRzLkRJU1BMQVlFRF9DT0xVTU5TO1xuICAgIHRoaXMuc2V2ZXJpdHlMZXZlbHNGb3JtQ29udHJvbCA9IG5ldyBVbnR5cGVkRm9ybUNvbnRyb2wodGhpcy5zZXZlcml0eUxldmVscyk7XG4gICAgdGhpcy5kYXRhU291cmNlID0gbmV3IE1hdFRhYmxlRGF0YVNvdXJjZTxhbnlbXT4oKTtcbiAgICB0aGlzLmFwaVJlc3BvbnNlID0gbnVsbDtcbiAgfVxuXG4gIGZvcm1hdEZoaXJSZXNvdXJjZSgpe1xuICAgIGlmKHRoaXMuZmhpclJlc291cmNlKXtcbiAgICAgIGlmKHRoaXMucmVzb3VyY2VGb3JtYXQgPT09ICdqc29uJyAmJiB0aGlzLmZoaXJWYWxpZGF0b3JTZXJ2aWNlLmlzSnNvbih0aGlzLmZoaXJSZXNvdXJjZSkpe1xuICAgICAgICB0aGlzLmZoaXJSZXNvdXJjZSA9IHRoaXMuZmhpclZhbGlkYXRvclNlcnZpY2UuYmVhdXRpZnlKU09OKHRoaXMuZmhpclJlc291cmNlKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYodGhpcy5yZXNvdXJjZUZvcm1hdCA9PT0gJ3htbCcgJiYgdGhpcy5maGlyVmFsaWRhdG9yU2VydmljZS5pc1htbFN0cmluZyh0aGlzLmZoaXJSZXNvdXJjZSkpe1xuICAgICAgICB0aGlzLmZoaXJSZXNvdXJjZSA9IHRoaXMuZmhpclZhbGlkYXRvclNlcnZpY2UuYmVhdXRpZnlYTUwodGhpcy5maGlyUmVzb3VyY2UpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxpbmVOdW1iZXJzKClcbiAgfVxuXG4gIGxpbmVOdW1iZXJzKCkge1xuICAgIGNvbnN0IGxpbmVkU3RyaW5ncyA9IHRoaXMuZmhpclJlc291cmNlLnNwbGl0KC9bXFxuXFxyXS9nKTtcbiAgICB0aGlzLmxpbmVzID0gbGluZWRTdHJpbmdzLmxlbmd0aDtcbiAgICB0aGlzLndpZHRoID0gdGhpcy5pbnB1dFJlZi5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgIGNvbnN0IGNoYXJJbkxpbmVzID0gdGhpcy53aWR0aCAvIFZhbGlkYXRvckNvbnN0YW50cy5GT05UX1dJRFRIO1xuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVkU3RyaW5ncykge1xuICAgICAgaWYgKGxpbmUubGVuZ3RoID4gY2hhckluTGluZXMpIHtcbiAgICAgICAgdGhpcy5saW5lcyA9IHRoaXMubGluZXMgKyAobGluZS5sZW5ndGggLyBjaGFySW5MaW5lcylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRMaW5lTnVtYmVycygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7bGVuZ3RoOiB0aGlzLmxpbmVzfSwgKF8sIGkpID0+IChpICsgMSkudG9TdHJpbmcoKSk7XG4gIH1cblxuICAvLyBJdCBpcyBpbXBvcnRhbnQgdGhlIGZvcm1hdCBpcyB3b3JraW5nIHdpdGggXCJiZXN0IGVmZm9ydFwiXG4gIC8vIFRoYXQgaXMgaXQgbWF5IG9yIG1heSBub3QgZm9ybWF0IHRoZSB0ZXh0IHByb3Blcmx5IGFuZCByZXF1aXJlIGV4dGVuc2l2ZSB0ZXN0aW5nIHRvIHZhbGlkYXRlIGl0cyBvcGVyYXRpb24uXG4gIG9uRm9ybWF0SW5wdXQoKSB7XG4gICAgdGhpcy5mb3JtYXRGaGlyUmVzb3VyY2UoKVxuICAgIHRoaXMuZmhpclZhbGlkYXRvclNlcnZpY2Uuc2hvd1N1Y2Nlc3NNZXNzYWdlKFwiRm9ybWF0dGluZyBBdHRlbXB0ZWQuXCIpO1xuICB9XG5cbiAgY2xlYXJVSSgpe1xuICAgIHRoaXMuZmhpclJlc291cmNlPScnO1xuICAgIHRoaXMuZmlsZU5hbWU9JydcbiAgICB0aGlzLmNsZWFyVmFsaWRhdGlvbkVycm9ycygpO1xuICAgIHRoaXMub25SZXNvdXJjZUNvbnRlbnRDaGFuZ2VkLmVtaXQodGhpcy5maGlyUmVzb3VyY2UpO1xuICB9XG5cbiAgb25DbGVhcigpe1xuICAgIHRoaXMuY2xlYXJVSSgpO1xuICB9XG5cbiAgb25GaWxlU2VsZWN0ZWQoZXZlbnQ6IGFueSkge1xuXG4gICAgY29uc3QgZmlsZTogRmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcblxuICAgIGlmIChmaWxlKSB7XG4gICAgICBpZihmaWxlLnNpemUgPiB0aGlzLm1heEZpbGVTaXplKXtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZpbGUgdG9vIGJpZ1wiKVxuICAgICAgICB0aGlzLmZoaXJWYWxpZGF0b3JTZXJ2aWNlLnNob3dFcnJvck1lc3NhZ2UoXCJUaGlzIGZpbGUgZXhjZWVkcyBcIiArIHRoaXMubWF4RmlsZVNpemUgLyAgMTAwMCArIFwia2IgYW5kIGNhbm5vdCBiZSBwcm9jZXNzZWRcIik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gYXV0byB0b2dnbGUgdGhlIGZpbGUgdHlwZSByYWRpbyBidXR0b25zXG4gICAgICAgIGlmIChmaWxlLnR5cGUgPT09IFwidGV4dC94bWxcIikge1xuICAgICAgICAgIHRoaXMucmVzb3VyY2VGb3JtYXQgPSAneG1sJztcbiAgICAgICAgfSBlbHNlIGlmIChcImFwcGxpY2F0aW9uL2pzb25cIikge1xuICAgICAgICAgIHRoaXMucmVzb3VyY2VGb3JtYXQgPSAnanNvbic7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXQgdGhlIGZpbGVuYW1lIGluIHRoZSBVSVxuICAgICAgICB0aGlzLmZpbGVOYW1lID0gZmlsZS5uYW1lO1xuXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUsIFwiVVRGLThcIik7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5maGlyUmVzb3VyY2UgPSByZWFkZXIucmVzdWx0IGFzIHN0cmluZztcbiAgICAgICAgICB0aGlzLm9uUmVzb3VyY2VDb250ZW50Q2hhbmdlZC5lbWl0KHRoaXMuZmhpclJlc291cmNlKTtcbiAgICAgICAgICB0aGlzLmZvcm1hdEZoaXJSZXNvdXJjZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJlYWRlci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZmhpclZhbGlkYXRvclNlcnZpY2Uuc2hvd0Vycm9yTWVzc2FnZShcIlVuYWJsZSB0byBvcGVuIHRoZSBmaWxlLlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5maGlyVmFsaWRhdG9yU2VydmljZS5zaG93RXJyb3JNZXNzYWdlKFwiVW5hYmxlIHRvIG9wZW4gdGhlIGZpbGUuXCIpO1xuICAgIH1cbiAgfVxuXG4gIHZhbGlkYXRlRmhpclJlc291cmNlKGZoaXJSZXNvdXJjZT86IGFueSwgcmVzb3VyY2VGb3JtYXQ/OiBzdHJpbmcpIHtcbiAgICAvLyBTZXQgdGhlIHN0YWdlIGZvciB0aGUgdmFsaWRhdGlvbi4gUmVzZXQgdmFyaWFibGVzIHRvIGRlZmF1bHQgdmFsdWVzLlxuICAgIGlmKCFmaGlyUmVzb3VyY2Upe1xuICAgICAgZmhpclJlc291cmNlID0gdGhpcy5maGlyUmVzb3VyY2VcbiAgICB9XG4gICAgaWYoIXJlc291cmNlRm9ybWF0KXtcbiAgICAgIHJlc291cmNlRm9ybWF0ID0gdGhpcy5yZXNvdXJjZUZvcm1hdFxuICAgIH1cblxuICAgIGlmKCFmaGlyUmVzb3VyY2UgfHwgIShyZXNvdXJjZUZvcm1hdCA9PT0gJ2pzb24nIHx8IHJlc291cmNlRm9ybWF0ID09PSAneG1sJykpe1xuICAgICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgZGF0YSBwYXNzZWQgdG8gdGhlIHZhbGlkYXRvci5cIik7XG4gICAgfVxuICAgIHRoaXMuaXNWYWxpZFJlc291cmNlID0gdHJ1ZTtcbiAgICB0aGlzLmhhc1Jlc3BvbnNlRGF0YSA9IGZhbHNlO1xuICAgIHRoaXMuc2VydmVyRXJyb3JMaXN0ID0gW107XG4gICAgdGhpcy5zZXJ2ZXJFcnJvclN0YXR1cyA9ICcnO1xuICAgIHRoaXMuc2VydmVyRXJyb3JEZXRlY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2VydmVyVGltb3V0RGV0ZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNldmVyaXR5TGV2ZWxzRm9ybUNvbnRyb2wucGF0Y2hWYWx1ZSh0aGlzLnNldmVyaXR5TGV2ZWxzKTtcblxuICAgIHRoaXMudmFsaWRhdGlvbkVycm9yU3RyID0gdGhpcy5maGlyVmFsaWRhdG9yU2VydmljZS5nZXRVaVZhbGlkYXRpb25NZXNzYWdlcyhmaGlyUmVzb3VyY2UsIHJlc291cmNlRm9ybWF0KTtcbiAgICBpZih0aGlzLnZhbGlkYXRpb25FcnJvclN0cil7XG4gICAgICAvL3NlZSBpZiB3ZSBjYW4gZmluZCBhbnkgb2J2aW91cyBpc3N1ZXMgd2l0aCB0aGUgcmVzb3VyY2UgaGVyZVxuICAgICAgdGhpcy5pc1ZhbGlkUmVzb3VyY2UgPSBmYWxzZTtcbiAgICAgIHRoaXMudmFsaWRhdGlvbkZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMub25WYWxpZGF0aW9uLmVtaXQoe2hhc0Jhc2ljRXJyb3JzOiB0cnVlLCBpc1ZhbGlkOiBmYWxzZSwgcmVzb3VyY2U6IGZoaXJSZXNvdXJjZX0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIFRoZSBVSSB2YWxpZGF0aW9uIHBhc3NlZCBzdWNjZXNzZnVsbHksIGFuZCB3ZSBleGVjdXRlIHRoZSBiYWNrZW5kIHZhbGlkYXRpb24uXG4gICAgICB0aGlzLmV4ZWN1dGVBUElWYWxpZGF0aW9uKGZoaXJSZXNvdXJjZSwgcmVzb3VyY2VGb3JtYXQpO1xuICAgIH1cbiAgfVxuXG4gIG9uUGFzdGVGaGlyUmVzb3VyY2UoZXZlbnQ6IENsaXBib2FyZEV2ZW50KSB7XG4gICAgdGhpcy5maWxlTmFtZSA9ICcnO1xuICAgIGlmKCF0aGlzLmZoaXJSZXNvdXJjZSkge1xuICAgICAgdGhpcy5jbGVhclVJKCk7XG4gICAgfVxuICAgIGxldCB0ZXh0ID0gZXZlbnQuY2xpcGJvYXJkRGF0YT8uZ2V0RGF0YSgndGV4dCcpID8/ICcnO1xuICAgIGlmICh0aGlzLmZoaXJWYWxpZGF0b3JTZXJ2aWNlLmlzSnNvbih0ZXh0KSkge1xuICAgICAgdGhpcy5yZXNvdXJjZUZvcm1hdCA9ICdqc29uJztcbiAgICB9IGVsc2UgaWYgKHRoaXMuZmhpclZhbGlkYXRvclNlcnZpY2UuaXNYbWxTdHJpbmcodGV4dCkpIHtcbiAgICAgIHRoaXMucmVzb3VyY2VGb3JtYXQgPSAneG1sJztcbiAgICB9XG4gIH1cblxuICBnZXRMaW5lTnVtYmVyc0J5U2V2ZXJpdHkoYXBpUmVzcG9uc2U6IEFwaVJlc3BvbnNlIHwgbnVsbCwgc2V2ZXJpdHk6IHN0cmluZyk6IG51bWJlcltde1xuICAgIGlmKCFhcGlSZXNwb25zZSB8fCBhcGlSZXNwb25zZS5pc3N1ZT8ubGVuZ3RoID09PSAwKXtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIGFwaVJlc3BvbnNlLmlzc3VlXG4gICAgICAuZmlsdGVyKChlbGVtZW50OiBhbnkpID0+IGVsZW1lbnQuc2V2ZXJpdHkgPT0gc2V2ZXJpdHkpXG4gICAgICAubWFwKChlbGVtZW50OiBhbnkpID0+IHRoaXMuZ2V0TGluZU51bWJlckZyb21Mb2NhdGlvbihlbGVtZW50LmxvY2F0aW9uWzBdKSAtIDEpO1xuICB9O1xuXG4gIHNjcm9sbFRvRWxlbWVudChsb2NhdGlvbjogc3RyaW5nICk6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxvY2F0aW9uKTtcbiAgICBpZiAoZWxlbWVudCkgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSlcbiAgfVxuXG4gIGdldExpbmVOdW1iZXJGcm9tTG9jYXRpb24obG9jYXRpb25TdHI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgLy8gR2V0IHRoZSBsb2NhdGlvbiBmcm9tIHJlc3BvbnNlXG4gICAgcmV0dXJuIChsb2NhdGlvblN0cj8ubGVuZ3RoID4gMCkgPyBwYXJzZUludCAobG9jYXRpb25TdHIuc3BsaXQoXCIsXCIpWzBdLnJlcGxhY2UoIC9eXFxEKy9nLCAnJykpIDogMDtcbiAgfVxuXG4gIC8vIFdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIGxvY2F0aW9uIGZyb20gdGhlIGVycm9ycyBhbmQgd2FybmluZyByZXN1bHRzLCB3ZSB3YW50IHRvIHNjcm9sbCB0aGUgcGFnZSB0byB0aGF0IGxvY2F0aW9uLlxuICBvbkxvY2F0aW9uU2VsZWN0ZWQocmVzcG9uc2U6IGFueSk6IHZvaWQge1xuICAgIGxldCBsb2NhdGlvbklkID0gKCcjbWFyaycgKyB0aGlzLmdldExpbmVOdW1iZXJGcm9tTG9jYXRpb24ocmVzcG9uc2UubG9jYXRpb25bMF0pKS50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMuc2Nyb2xsVG9FbGVtZW50KGxvY2F0aW9uSWQpO1xuICB9XG5cbiAgLy8gU2VuZHMgZmhpciByZXNvdXJjZSB0byBiZSB2YWxpZGF0ZWQsIHJlbmRlcnMgcmVzcG9uc2VcblxuICBwcml2YXRlIGV4ZWN1dGVBUElWYWxpZGF0aW9uKGZoaXJSZXNvdXJjZTogYW55LCByZXNvdXJjZUZvcm1hdDogc3RyaW5nKSB7XG5cbiAgICAvLyBSZXNldCB2YWx1ZXMgdG8gZGVmYXVsdCBzdGF0ZSBwcmlvciB0byB2YWxpZGF0aW9uLlxuICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnBhcnNlZEZoaXJSZXNvdXJjZSA9ICcnO1xuICAgIHRoaXMudmFsaWRhdGlvbkZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5hcGlSZXNwb25zZSA9IG51bGw7XG5cbiAgICBpZih0aGlzLnJlc291cmNlRm9ybWF0ID09PSBcImpzb25cIil7XG4gICAgICBmaGlyUmVzb3VyY2UgPSBKU09OLnBhcnNlKGZoaXJSZXNvdXJjZSk7XG4gICAgfVxuICAgIGVsc2UgaWYodGhpcy5yZXNvdXJjZUZvcm1hdCA9PT0gXCJ4bWxcIil7XG4gICAgICBsZXQgZmhpclJlc291cmNlWE1MID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhmaGlyUmVzb3VyY2UsICd0ZXh0L3htbCcpO1xuICAgICAgZmhpclJlc291cmNlID0gZmhpclJlc291cmNlWE1MLmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUw7XG4gICAgfVxuXG4gICB0aGlzLmZoaXJWYWxpZGF0b3JTZXJ2aWNlLnZhbGlkYXRlRmhpclJlc291cmNlKGZoaXJSZXNvdXJjZSwgcmVzb3VyY2VGb3JtYXQpXG4gICAgICAuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgdGhpcy52YWxpZGF0aW9uRmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgIGxldCBpc3N1ZSA9IHJlc3BvbnNlLmlzc3VlO1xuICAgICAgICAgIGlmKGlzc3VlLmxlbmd0aCA9PT0gMSAmJiBpc3N1ZVswXS5zZXZlcml0eSA9PT0gXCJJbmZvcm1hdGlvblwiICYmIGlzc3VlWzBdPy5tZXNzYWdlLnRvTG93ZXJDYXNlKCkgPT09IFwiQUxMIE9LXCIudG9Mb3dlckNhc2UoKSl7XG4gICAgICAgICAgICB0aGlzLmlzVmFsaWRSZXNvdXJjZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9uVmFsaWRhdGlvbi5lbWl0KHtpc1ZhbGlkOiB0cnVlLCByZXNvdXJjZTogZmhpclJlc291cmNlfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkUmVzb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGlvbkVycm9yU3RyID0gXCJQbGVhc2Ugc2VlIHRoZSB2YWxpZGF0aW9uIGVycm9ycyBiZWxvdy5cIjtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsaWRhdG9yUmVzcG9uc2UocmVzcG9uc2UsIGZoaXJSZXNvdXJjZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU29tZSBzdHJpbmdzIHByb2R1Y2VkIGJ5IHRoZSB2YWxpZGF0b3IgYXJlIGxvbmcgYW5kIG1pc3Mgc3BhY2VzLiBUaGlzIGNvdWxkIGJyZWFrIHRoZSBVSSB2YWxpZGF0aW9uIHJlcG9ydC5cbiAgICAgICAgICAvLyBUaGVyZWZvcmUsIHdlIGluc2VydCBhIHNwYWNlIGFmdGVyIGVhY2ggY29tYSBmb3VuZCBpbiB0aGUgdmFsaWRhdGlvbiByZXNwb25zZSB0ZXh0LlxuICAgICAgICAgIGlzc3VlLmZvckVhY2goKGVsZW1lbnQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5kaWFnbm9zdGljcyA9IGVsZW1lbnQuZGlhZ25vc3RpY3MucmVwbGFjZSgvLCg/PVteXFxzXSkvZywgXCIsIFwiKVxuICAgICAgICAgIH0pXG5cblxuICAgICAgICAgIC8vIHNvcnQgYnkgbGluZSBudW1iZXJzXG4gICAgICAgICAgaXNzdWUgPSBpc3N1ZS5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZU51bWJlckZyb21Mb2NhdGlvbihhLmxvY2F0aW9uPy5bMF0pIC0gdGhpcy5nZXRMaW5lTnVtYmVyRnJvbUxvY2F0aW9uKGIubG9jYXRpb24/LlswXSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBtYXQgZWFjaCBpdGVtIG9mIHRoZSByZXNwb25zZSB0byBhbiBvYmplY3QgYW5kIG1ha2Ugc3VyZSB0aGF0IHRoZSByZXN1bHRzIGFyZSBpbiBleHBhbmRlZCBzdGF0ZSBpbiB0aGVcbiAgICAgICAgICAvLyBVSSB2YWxpZGF0aW9uIHJlcG9ydC5cbiAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZGF0YSA9IGlzc3VlLm1hcCgoZWxlbWVudDogYW55KSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0OiBSZXNwb25zZUl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBlbGVtZW50KTtcbiAgICAgICAgICAgIHJlc3VsdC5leHBhbmRlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gdGhpcy5nZXRGaWx0ZXJQcmVkaWNhdGUoKTtcbiAgICAgICAgICB0aGlzLmFwaVJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgdGhpcy5hcGlSZXNwb25zZSEuZm9ybWF0dGVkUmVzb3VyY2UgPSByZXNwb25zZT8uZXh0ZW5zaW9uPy5bMF0/LnZhbHVlU3RyaW5nO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogKGVycikgPT4ge1xuICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zZXJ2ZXJFcnJvckRldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnNlcnZlckVycm9yU3RhdHVzID0gZXJyLnN0YXR1cztcbiAgICAgICAgICBpZihlcnI/LmVycm9yPy5pc3N1ZSl7XG4gICAgICAgICAgICB0aGlzLnNlcnZlckVycm9yTGlzdCA9IGVyci5lcnJvci5pc3N1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5vbkFwaUVycm9yLmVtaXQoZXJyKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAvL1RPRE8gbWFrZSBzdXJlIHRvIHJlbW92ZSB0aGlzIGZ1bmN0aW9uIHdoZW4gdGhlIHNlcnZlciBzaWRlIHRpbWVvdXQgaXMgaW1wbGVtZW50ZWQuXG4gICAgc2V0VGltZW91dChcbiAgICAgICgpID0+IHtcbiAgICAgICAgaWYodGhpcy5pc0xvYWRpbmcpIHtcbiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuc2VydmVyVGltb3V0RGV0ZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzLlNFUlZFUl9USU1FT1VUX0lOVEVSVkFMXG4gICAgKTtcblxuICB9XG5cbiAgdG9nZ2xlKCkge1xuICAgIHRoaXMuYWxsRXhwYW5kZWQgPSAhdGhpcy5hbGxFeHBhbmRlZDtcbiAgICB0aGlzLmRhdGFTb3VyY2UuZGF0YS5mb3JFYWNoKChpdGVtOiBhbnkpID0+IGl0ZW0uZXhwYW5kZWQgPSB0aGlzLmFsbEV4cGFuZGVkKTtcbiAgfVxuXG4gIG9uRmlsdGVyUmVzdWx0cygpIHtcbiAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyID0gdGhpcy5zZXZlcml0eUxldmVsc0Zvcm1Db250cm9sLnZhbHVlLmpvaW4oJywnKTtcbiAgfVxuXG4gIGdldEZpbHRlclByZWRpY2F0ZSgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJvdzogYW55LCBmaWx0ZXJzOiBzdHJpbmcpIHtcbiAgICAgIGxldCBtYXRjaEZpbHRlcjogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgY29uc3QgZmlsdGVyQXJyYXkgPSBmaWx0ZXJzLnNwbGl0KCcsJyk7XG4gICAgICBmaWx0ZXJBcnJheS5mb3JFYWNoKChmaWx0ZXI6IHN0cmluZykgPT4ge1xuICAgICAgICAgIGlmKHJvdy5zZXZlcml0eS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyLnRvTG93ZXJDYXNlKCkpIT0gLTEpe1xuICAgICAgICAgICAgbWF0Y2hGaWx0ZXIgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgcmV0dXJuIG1hdGNoRmlsdGVyO1xuICAgIH07XG4gIH1cblxuICBvbkNhbmNlbFZhbGlkYXRpb24gKCl7XG4gICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGNoZWNrRXhwYW5kQ29sbGFwc2VBbGxTdGF0dXMoKSB7XG4gICAgLypcbiAgICAqIFdoZW4gYWxsIGVsZW1lbnRzIGFyZSBjb2xsYXBzZWQgd2Ugd2FudCB0byBjaGFuZ2UgdGhlIGV4cGFuc2lvbiBpY29uIHRvIHJlbmRlciBcImV4cGFuZCBhbGxcIlxuICAgICogV2hlbiBhbGwgZWxlbWVudHMgYXJlIGV4cGFuZGVkIHdlIHdhbnQgdG8gY2hhbmdlIHRoZSBleHBhbnNpb24gaWNvbiB0byBcImNvbGxhcHNlIGFsbFwiXG4gICAgKiBUaGlzIHdpbGwgc2F2ZSBleHRyYSB1bm5lY2Vzc2FyeSBjbGljayBmb3IgdGhlIHVzZXJcbiAgICAqL1xuICAgIGNvbnN0IGV4cGFuZGVkRWxlbWVudHNDb3VudCA9IHRoaXMuZGF0YVNvdXJjZS5kYXRhLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnRbJ2V4cGFuZGVkJ10pLmxlbmd0aDtcbiAgICBpZihleHBhbmRlZEVsZW1lbnRzQ291bnQgPT09IHRoaXMuZGF0YVNvdXJjZS5kYXRhLmxlbmd0aCl7XG4gICAgICB0aGlzLmFsbEV4cGFuZGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZihleHBhbmRlZEVsZW1lbnRzQ291bnQgPT09IDApe1xuICAgICAgdGhpcy5hbGxFeHBhbmRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlzRmlsdGVyRW5hYmxlZChzZXZlcml0eTogc3RyaW5nKSB7XG4gICAgcmV0dXJuICEhdGhpcy5kYXRhU291cmNlLmRhdGEuZmluZCgoZWxlbWVudDogYW55KSA9PiBlbGVtZW50LnNldmVyaXR5LnRvTG93ZXJDYXNlKCkgPT09IHNldmVyaXR5LnRvTG93ZXJDYXNlKCkpO1xuICB9XG5cbiAgZ2V0Q291bnQobGV2ZWw6IGFueSkge1xuICAgIHJldHVybiB0aGlzLmRhdGFTb3VyY2UuZGF0YVxuICAgICAgLmZpbHRlcigoZWxlbWVudDogYW55KSA9PiBlbGVtZW50LnNldmVyaXR5LnRvTG93ZXJDYXNlKCkgPT09IGxldmVsLnRvTG93ZXJDYXNlKCkpXG4gICAgICAubGVuZ3RoO1xuICB9XG5cbiAgb25DbG9zZVNlcnZlckVycm9yTWVzc2FnZSgpIHtcbiAgICB0aGlzLnNlcnZlckVycm9yRGV0ZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNlcnZlckVycm9yTGlzdCA9IFtdO1xuICAgIHRoaXMuc2VydmVyRXJyb3JTdGF0dXMgPSAnJztcbiAgfVxuXG4gIHByaXZhdGUgc2V0VmFsaWRhdG9yUmVzcG9uc2UoYXBpUmVzcG9uc2U6IGFueSwgcmVzb3VyY2U6IHN0cmluZykge1xuICAgIGNvbnN0IGVycm9yc0NvdW50ID0gYXBpUmVzcG9uc2UuaXNzdWUuZmlsdGVyKChlbGVtZW50OiBhbnkpID0+IGVsZW1lbnQuc2V2ZXJpdHkgPT0gJ2Vycm9yJyk/Lmxlbmd0aCA/PyAwO1xuICAgIGNvbnN0IHdhcm5pbmdzQ291bnQgPSBhcGlSZXNwb25zZS5pc3N1ZS5maWx0ZXIoKGVsZW1lbnQ6IGFueSkgPT4gZWxlbWVudC5zZXZlcml0eSA9PSAnd2FybmluZycpPy5sZW5ndGggPz8gMDtcbiAgICBjb25zdCBpbmZvQ291bnQgPSBhcGlSZXNwb25zZS5pc3N1ZS5maWx0ZXIoKGVsZW1lbnQ6IGFueSkgPT4gZWxlbWVudC5zZXZlcml0eSA9PSAnaW5mb3JtYXRpb24nKT8ubGVuZ3RoID8/IDA7XG4gICAgY29uc3Qgbm90ZXNDb3VudCA9IGFwaVJlc3BvbnNlLmlzc3VlLmZpbHRlcigoZWxlbWVudDogYW55KSA9PiBlbGVtZW50LnNldmVyaXR5ID09ICdub3RlJyk/Lmxlbmd0aCA/PyAwO1xuXG4gICAgbGV0IHZhbGlkYXRpb25SZXN1bHQ6IFZhbGlkYXRpb25SZXN1bHRzID0ge307XG4gICAgdmFsaWRhdGlvblJlc3VsdC5lcnJvcnNDb3VudCA9IGVycm9yc0NvdW50O1xuICAgIHZhbGlkYXRpb25SZXN1bHQud2FybmluZ3NDb3VudCA9IHdhcm5pbmdzQ291bnQ7XG4gICAgdmFsaWRhdGlvblJlc3VsdC5ub3Rlc0NvdW50ID0gbm90ZXNDb3VudDtcbiAgICB2YWxpZGF0aW9uUmVzdWx0LmluZm9Db3VudCA9IGluZm9Db3VudDtcblxuICAgIHZhbGlkYXRpb25SZXN1bHQuaXNWYWxpZCA9IGVycm9yc0NvdW50IDw9IDA7XG4gICAgdmFsaWRhdGlvblJlc3VsdC5yZXNvdXJjZSA9IHJlc291cmNlO1xuICAgIHRoaXMub25WYWxpZGF0aW9uLmVtaXQodmFsaWRhdGlvblJlc3VsdCk7XG4gIH1cblxuICBjbGVhclZhbGlkYXRpb25FcnJvcnMoKXtcbiAgICB0aGlzLnZhbGlkYXRpb25FcnJvclN0ciA9ICcnO1xuICAgIHRoaXMuaXNWYWxpZFJlc291cmNlID0gZmFsc2U7XG4gICAgdGhpcy5wYXJzZWRGaGlyUmVzb3VyY2UgPSAnJztcbiAgICB0aGlzLmhhc1Jlc3BvbnNlRGF0YSA9IGZhbHNlO1xuICAgIHRoaXMudmFsaWRhdGlvbkZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnNlcnZlckVycm9yRGV0ZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNlcnZlckVycm9yTGlzdCA9IFtdO1xuICAgIHRoaXMuc2VydmVyRXJyb3JTdGF0dXMgPSAnJztcbiAgICB0aGlzLnNlcnZlclRpbW91dERldGVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5hcGlSZXNwb25zZSA9IG51bGw7XG4gIH1cblxuICBnZXRMaW5lSXRlbUNsYXNzKGl0ZW06IHN0cmluZywgaTogbnVtYmVyKSB7XG5cbiAgICBpZih0aGlzLmdldExpbmVOdW1iZXJzQnlTZXZlcml0eSh0aGlzLmFwaVJlc3BvbnNlLCAnZXJyb3InKS5pbmRleE9mKGkpICE9IC0xKXtcbiAgICAgIHRoaXMuaGFzUmVzcG9uc2VEYXRhID0gdHJ1ZTtcbiAgICAgIHJldHVybiBcImVycm9yLW1hcmtcIjtcbiAgICB9XG4gICAgZWxzZSBpZih0aGlzLmdldExpbmVOdW1iZXJzQnlTZXZlcml0eSh0aGlzLmFwaVJlc3BvbnNlLCAnd2FybmluZycpLmluZGV4T2YoaSkgIT0gLTEpe1xuICAgICAgdGhpcy5oYXNSZXNwb25zZURhdGEgPSB0cnVlO1xuICAgICAgcmV0dXJuIFwid2FybmluZy1tYXJrXCI7XG4gICAgfVxuICAgIGVsc2UgaWYodGhpcy5nZXRMaW5lTnVtYmVyc0J5U2V2ZXJpdHkodGhpcy5hcGlSZXNwb25zZSwgJ2luZm9ybWF0aW9uJykuaW5kZXhPZihpKSAhPSAtMSl7XG4gICAgICB0aGlzLmhhc1Jlc3BvbnNlRGF0YSA9IHRydWU7XG4gICAgICByZXR1cm4gXCJpbmZvLW1hcmtcIjtcbiAgICB9XG4gICAgZWxzZSBpZih0aGlzLmdldExpbmVOdW1iZXJzQnlTZXZlcml0eSh0aGlzLmFwaVJlc3BvbnNlLCAnbm90ZScpLmluZGV4T2YoaSkgIT0gLTEpe1xuICAgICAgdGhpcy5oYXNSZXNwb25zZURhdGEgPSB0cnVlO1xuICAgICAgcmV0dXJuIFwibm90ZS1tYXJrXCI7XG4gICAgfVxuXG4gICAgZWxzZSByZXR1cm4nJztcbiAgfVxuXG5cbiAgZXhwb3J0VmFsaWRhdGlvblJlc3VsdHMoKSB7XG4gICAgLy8gQWRkIHRoZSBmb3JtYXR0ZWQgcmVzb3VyY2UgZm9ybSB0aGUgdmFsaWRhdG9yIHJlc3BvbnNlIHRvIGEganNvbiBmaWxlXG4gICAgLy8gVGhpcyB3YXkgdGhlIGxpbmUgbnVtYmVycyBmcm9tIHRoZSB2YWxpZGF0b3IgcmVwb3J0IHdpbGwgbWF0Y2ggdGhlIGpzb24gZmlsZSBudW1iZXJzXG4gICAgY29uc3QganNvblJlc291cmNlID0gdGhpcz8uYXBpUmVzcG9uc2U/LmZvcm1hdHRlZFJlc291cmNlIHx8ICcnO1xuICAgIC8vIENyZWF0ZSBhIHBkZiByZXBvcnRcbiAgICBjb25zdCByZXN1bHRzRGF0YSA9IHRoaXMuZGF0YVNvdXJjZS5kYXRhXG4gICAgICAubWFwKGVsZW1lbnQ9PiB7IHJldHVybiB7c2V2ZXJpdHk6IGVsZW1lbnQuc2V2ZXJpdHksIGRpYWdub3N0aWNzOiBlbGVtZW50LmRpYWdub3N0aWNzLCBsb2NhdGlvbjogZWxlbWVudC5sb2NhdGlvbiwgZmhpclBhdGg6IGVsZW1lbnQ/LmV4cHJlc3Npb24/LlswXX19KVxuICAgICAgLmZpbHRlcihpdGVtID0+IHRoaXMuc2V2ZXJpdHlMZXZlbHNGb3JtQ29udHJvbC52YWx1ZS5pbmRleE9mKGl0ZW0uc2V2ZXJpdHkpICE9IC0xKTtcbiAgICB0aGlzLm9uRXhwb3J0VmFsaWRhdGlvblJlc3VsdHMuZW1pdCh7anNvblJlc291cmNlOiBqc29uUmVzb3VyY2UsIHJlc3VsdHNEYXRhOiByZXN1bHRzRGF0YX0pO1xuICB9XG5cblxufVxuIiwiPGRpdiBjbGFzcz1cInNwaW5uZXItY29udGFpbmVyXCIgKm5nSWY9XCJpc0xvYWRpbmdcIj5cbiAgPG1hdC1zcGlubmVyPjwvbWF0LXNwaW5uZXI+XG48L2Rpdj5cblxuPG1hdC1jYXJkLWhlYWRlciAgKm5nSWY9XCJ2YWxpZGF0b3JUaXRsZVwiIGlkPVwidmFsaWRhdG9yLXRpdGxlXCI+XG4gIDxtYXQtY2FyZC10aXRsZT57eyB2YWxpZGF0b3JUaXRsZSB9fTwvbWF0LWNhcmQtdGl0bGU+XG48L21hdC1jYXJkLWhlYWRlcj5cblxuXG48IS0tIFRoZSBzZWN0aW9uIGJlbG93IHJlbmRlcnMgZXJyb3IgbWVzc2FnZXMgcmV0dXJuZWQgYnkgdGhlIHZhbGlkYXRvci4tLT5cbjxkaXYgY2xhc3M9c2VydmVyLWVycm9yLW1lc3NhZ2UtY29udGFpbmVyICpuZ0lmPVwic2VydmVyRXJyb3JEZXRlY3RlZFwiPlxuICA8YnV0dG9uIG1hdC1idXR0b24gY2xhc3M9XCJjbG9zZS1idXR0b25cIiBjb2xvcj1cImFjY2VudFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiIGRpc2FibGVSaXBwbGVcbiAgICAgICAgICAoY2xpY2spPVwib25DbG9zZVNlcnZlckVycm9yTWVzc2FnZSgpXCI+XG4gICAgPG1hdC1pY29uPmNsb3NlPC9tYXQtaWNvbj5cbiAgPC9idXR0b24+XG4gIDxkaXYgY2xhc3M9XCJzZXJ2ZXItZXJyb3Itc3RhdHVzXCI+PGgyPlNlcnZlciBFcnJvciBSZXNwb25zZSBTdGF0dXM6IHt7IHNlcnZlckVycm9yU3RhdHVzIH19PC9oMj48L2Rpdj5cbiAgPGRpdiBjbGFzcz1cInNlcnZlci1lcnJvci1tZXNzYWdlLXRleHRcIiAqbmdGb3I9XCJsZXQgc2VydmVyRXJyb3Igb2Ygc2VydmVyRXJyb3JMaXN0XCJcbiAgICAgICBbaW5uZXJUZXh0XT1cInNlcnZlckVycm9yLmRpYWdub3N0aWNzXCI+PC9kaXY+XG48L2Rpdj5cblxuPCEtLSBUT0RPIHJlbW92ZSB0aGlzIGNvZGUgd2hlbiB0aGUgQVBJIGNvZGUgaXMgdXBkYXRlZCB0byByZXR1cm4gNDA4IG9uIHJlcXVlc3QgdGltZW91dCAtLT5cbjxkaXYgY2xhc3M9c2VydmVyLWVycm9yLW1lc3NhZ2UtY29udGFpbmVyICpuZ0lmPVwic2VydmVyVGltb3V0RGV0ZWN0ZWRcIj5cbiAgPGJ1dHRvbiBtYXQtYnV0dG9uIGNsYXNzPVwiY2xvc2UtYnV0dG9uXCIgY29sb3I9XCJhY2NlbnRcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIiBkaXNhYmxlUmlwcGxlXG4gICAgICAgICAgKGNsaWNrKT1cInNlcnZlclRpbW91dERldGVjdGVkID0gZmFsc2VcIj5cbiAgICA8bWF0LWljb24+Y2xvc2U8L21hdC1pY29uPlxuICA8L2J1dHRvbj5cbiAgPGRpdiBjbGFzcz1cInNlcnZlci1lcnJvci1zdGF0dXNcIj48aDI+U2VydmVyIFRpbWVvdXQgRXJyb3IuPC9oMj48L2Rpdj5cbjwvZGl2PlxuXG48IS0tQWN0aW9ucyBhdmFpbGFibGUgYWJvdmUgdGhlIEZISVIgdmFsaWRhdG9yIGlucHV0IHRleHRhcmVhLS0+XG48ZGl2IGNsYXNzPVwicm93LWJ1dHRvbi13cmFwcGVyXCI+XG5cbiAgPCEtLVNlbGVjdCBKU09OL1hNTCByYWRpbyBncm91cC0tPlxuICA8bWF0LXJhZGlvLWdyb3VwIFsobmdNb2RlbCldPVwicmVzb3VyY2VGb3JtYXRcIiBbZGlzYWJsZWRdPWlzTG9hZGluZyAqbmdJZj1cInZhbGlkYXRpb25JbnB1dEZvcm1hdC5mb3JtYXQgPT0gJ3htbCBhbmQganNvbidcIiA+XG4gICAgPG1hdC1yYWRpby1idXR0b25cbiAgICAgIHZhbHVlPVwianNvblwiXG4gICAgICBbY2hlY2tlZF09XCJyZXNvdXJjZUZvcm1hdCA9PSdqc29uJ1wiXG4gICAgICAoc2VsZWN0KT1cInJlc291cmNlRm9ybWF0ID0gJ2pzb24nXCI+XG4gICAgICBKU09OXG4gICAgPC9tYXQtcmFkaW8tYnV0dG9uPlxuICAgIDxtYXQtcmFkaW8tYnV0dG9uXG4gICAgICB2YWx1ZT1cInhtbFwiXG4gICAgICBbY2hlY2tlZF09XCJyZXNvdXJjZUZvcm1hdCA9PSd4bWwnXCJcbiAgICAgIChzZWxlY3QpPVwicmVzb3VyY2VGb3JtYXQgPSAneG1sJ1wiPlxuICAgICAgWE1MXG4gICAgPC9tYXQtcmFkaW8tYnV0dG9uPlxuICA8L21hdC1yYWRpby1ncm91cD5cblxuICA8c3BhbiBjbGFzcz1cImNvbnRlbnQtc3BhY2VyXCIgKm5nSWY9XCJ2YWxpZGF0aW9uSW5wdXRGb3JtYXQ/LmZvcm1hdCA9PSAneG1sIGFuZCBqc29uJ1wiPjwvc3Bhbj5cblxuICA8IS0tRmlsZSB1cGxvYWQgd2lkZ2V0LS0+XG4gIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGNsYXNzPVwiZmlsZS1pbnB1dFwiIChjbGljayk9XCJmaWxlVXBsb2FkLnZhbHVlPW51bGxcIlxuICAgICAgICAgW2FjY2VwdF09XCJ2YWxpZGF0aW9uSW5wdXRGb3JtYXQ/LmFjY2VwdHM/LnRvU3RyaW5nKClcIlxuICAgICAgICAgKGNoYW5nZSk9XCJvbkZpbGVTZWxlY3RlZCgkZXZlbnQpXCIgI2ZpbGVVcGxvYWQ+XG5cbiAgPHNwYW4gY2xhc3M9XCJmaWxlbmFtZVwiICpuZ0lmPVwidmFsaWRhdGlvbklucHV0Rm9ybWF0LmZvcm1hdCA9PSAneG1sIGFuZCBqc29uJ1wiPnt7ZmlsZU5hbWV9fTwvc3Bhbj5cblxuICA8YnV0dG9uIG1hdC1yYWlzZWQtYnV0dG9uIFtzdHlsZS5iYWNrZ3JvdW5kLWNvbG9yXT1cImJ1dHRvbkJhY2tncm91bmRDb2xvclwiIFtzdHlsZS5jb2xvcl09XCJidXR0b25UeHRDb2xvclwiXG4gICAgICAgICAgY2xhc3M9XCJ1cGxvYWQtYnRuXCJcbiAgICAgICAgICAoY2xpY2spPVwiY2xlYXJVSSgpOyBmaWxlVXBsb2FkLmNsaWNrKCk7XCIgW2Rpc2FibGVkXT1pc0xvYWRpbmc+XG4gICAgPG1hdC1pY29uPnVwbG9hZDwvbWF0LWljb24+XG4gICAgVXBsb2FkXG4gIDwvYnV0dG9uPlxuXG4gIDxzcGFuIGNsYXNzPVwiZmlsZW5hbWVcIiAqbmdJZj1cIiEodmFsaWRhdGlvbklucHV0Rm9ybWF0LmZvcm1hdCA9PSAneG1sIGFuZCBqc29uJylcIj57e2ZpbGVOYW1lfX08L3NwYW4+XG48L2Rpdj5cblxuPCEtLSBGSElSIHZhbGlkYXRvciB0ZXh0IGVkaXRvci0tPlxuPGRpdiBjbGFzcz1cInRleHRhcmVhLXdyYXBwZXJcIj5cbiAgPGRpdiBjbGFzcz1cImxpbmUtbnVtYmVyc1wiICNudW1iZXJzPlxuICAgIDxkaXYgKm5nRm9yPVwibGV0IGkgb2YgZ2V0TGluZU51bWJlcnMoKTtcIj48ZGl2IGNsYXNzPVwibnVtYmVyc1wiPnt7aX19PC9kaXY+PC9kaXY+XG4gIDwvZGl2PlxuICA8dGV4dGFyZWFcbiAgICAjdmFsaWRhdG9ySW5wdXRcbiAgICByb3dzPVwiMzBcIlxuICAgIFsobmdNb2RlbCldPVwiZmhpclJlc291cmNlXCJcbiAgICAobmdNb2RlbENoYW5nZSk9XCJvblJlc291cmNlQ29udGVudENoYW5nZWQuZW1pdChmaGlyUmVzb3VyY2UpXCJcbiAgICBbbmdTdHlsZV09XCJ7J2JvcmRlci1jb2xvcic6ICghIXZhbGlkYXRpb25FcnJvclN0cikgPyAncmVkJzogbnVsbCB9XCJcbiAgICAocGFzdGUpPVwib25QYXN0ZUZoaXJSZXNvdXJjZSgkZXZlbnQpXCJcbiAgICBbZGlzYWJsZWRdPVwiaXNMb2FkaW5nXCJcbiAgICAoaW5wdXQpPVwibGluZU51bWJlcnMoKVwiXG4gICAgKHNjcm9sbCk9XCJudW1iZXJzLnNjcm9sbFRvcCA9IHZhbGlkYXRvcklucHV0LnNjcm9sbFRvcFwiXG4gID5cbiAgICAgIDwvdGV4dGFyZWE+XG48L2Rpdj5cblxuPCEtLUFjdGlvbnMgYXZhaWxhYmxlIGJlbG93IHRoZSBGSElSIHZhbGlkYXRvciBpbnB1dCB0ZXh0YXJlYS0tPlxuPGRpdiBjbGFzcz1cInJvdy1idXR0b24td3JhcHBlclwiICpuZ0lmPVwiZm9ybWF0UmVzb3VyY2VCdG5TaG93biB8fCBjbGVhclZhbGlkYXRvckJ0blNob3duIHx8IHN1Ym1pdEJ0blNob3duIHx8IHZhbGlkYXRpb25FcnJvclN0clwiPlxuXG4gIDxzcGFuICpuZ0lmPVwic3VibWl0QnRuU2hvd24gJiYgKHN1Ym1pdEJ0bkFsaWdubWVudD09J2xlZnQnKSAmJiAhaXNMb2FkaW5nXCI+XG4gICAgPGJ1dHRvbiBtYXQtcmFpc2VkLWJ1dHRvbiBbc3R5bGUuYmFja2dyb3VuZC1jb2xvcl09XCJidXR0b25CYWNrZ3JvdW5kQ29sb3JcIiBbc3R5bGUuY29sb3JdPVwiYnV0dG9uVHh0Q29sb3JcIiBjbGFzcz1cImJ1dHRvblwiXG4gICAgICAgICAgICAoY2xpY2spPVwidmFsaWRhdGVGaGlyUmVzb3VyY2UoZmhpclJlc291cmNlLCByZXNvdXJjZUZvcm1hdClcIj5cbiAgICAgIDxtYXQtaWNvbj5zZW5kPC9tYXQtaWNvbj5cbiAgICAgIFN1Ym1pdFxuICAgIDwvYnV0dG9uPlxuICA8L3NwYW4+XG5cbiAgPGJ1dHRvbiAqbmdJZj1cImZvcm1hdFJlc291cmNlQnRuU2hvd24gJiYgIWlzTG9hZGluZ1wiIFtuZ0NsYXNzXT1cInsnbGVmdC1tYXJnaW4tc3BhY2VyJzogc3VibWl0QnRuQWxpZ25tZW50PT0nbGVmdCd9XCIgbWF0LXJhaXNlZC1idXR0b25cbiAgICAgICAgICBbc3R5bGUuYmFja2dyb3VuZC1jb2xvcl09XCJidXR0b25CYWNrZ3JvdW5kQ29sb3JcIiBbc3R5bGUuY29sb3JdPVwiYnV0dG9uVHh0Q29sb3JcIlxuICAgICAgICAgIChjbGljayk9XCJvbkZvcm1hdElucHV0KCk7XCJcbiAgICAgICAgICBbZGlzYWJsZWRdPVwiIWZoaXJSZXNvdXJjZVwiPlxuICAgIDxtYXQtaWNvbj5jb2RlPC9tYXQtaWNvbj5cbiAgICBGb3JtYXQgSW5wdXRcbiAgPC9idXR0b24+XG5cbiAgPHNwYW4gY2xhc3M9XCJjb250ZW50LXNwYWNlclwiPjwvc3Bhbj5cbiAgPHNwYW4gKm5nSWY9XCJ2YWxpZGF0aW9uRmluaXNoZWRcIiBpZD1cImVycm9yLXJlc3BvbnNlXCI+XG4gICAgPHNwYW4gY2xhc3M9XCJkYW5nZXItY29sb3JcIiAqbmdJZj1cIiEhdmFsaWRhdGlvbkVycm9yU3RyICYmICFpc1ZhbGlkUmVzb3VyY2VcIj57e3ZhbGlkYXRpb25FcnJvclN0cn19PC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPVwic3VjY2Vzcy1jb2xvclwiICpuZ0lmPVwiaXNWYWxpZFJlc291cmNlXCI+IFRoaXMgaXMgYSB2YWxpZCBGSElSIHJlc291cmNlLjwvc3Bhbj5cbiAgPC9zcGFuPlxuXG4gIDxzcGFuIGNsYXNzPVwiY29udGVudC1zcGFjZXJcIj48L3NwYW4+XG5cbiAgPGJ1dHRvbiAqbmdJZj1cImNsZWFyVmFsaWRhdG9yQnRuU2hvd24gJiYgIWlzTG9hZGluZ1wiXG4gICAgICAgICAgbWF0LXJhaXNlZC1idXR0b24gY29sb3I9XCJzdWNjZXNzXCIgY2xhc3M9XCJidXR0b25cIlxuICAgICAgICAgIChjbGljayk9XCJvbkNsZWFyKClcIj5cbiAgICA8bWF0LWljb24+Y2xlYXI8L21hdC1pY29uPlxuICAgIENsZWFyIFZhbGlkYXRvclxuICA8L2J1dHRvbj5cblxuICA8c3BhbiBjbGFzcz1cImxlZnQtbWFyZ2luLXNwYWNlclwiICpuZ0lmPVwic3VibWl0QnRuU2hvd24gJiYgKHN1Ym1pdEJ0bkFsaWdubWVudCA9PSdyaWdodCcpICYmICFpc0xvYWRpbmdcIj5cbiAgICA8YnV0dG9uIG1hdC1yYWlzZWQtYnV0dG9uIGNvbG9yPVwiYWNjZW50XCIgY2xhc3M9XCJidXR0b25cIlxuICAgICAgICAgICAgKGNsaWNrKT1cInZhbGlkYXRlRmhpclJlc291cmNlKGZoaXJSZXNvdXJjZSwgcmVzb3VyY2VGb3JtYXQpXCI+XG4gICAgICA8bWF0LWljb24+c2VuZDwvbWF0LWljb24+XG4gICAgICB7eyBzdWJtaXRCdG5UaXRsZX19XG4gICAgPC9idXR0b24+XG4gIDwvc3Bhbj5cbjwvZGl2PlxuXG48ZGl2IGNsYXNzPVwicm93LWJ1dHRvbi13cmFwcGVyIHRvcC1wYWRkaW5nXCIgKm5nSWY9XCJpc0xvYWRpbmcgJiYgY2FuY2VsVmFsaWRhdGlvbkJ0blNob3duXCI+XG4gIDxzcGFuIGNsYXNzPVwiY29udGVudC1zcGFjZXJcIj48L3NwYW4+XG4gIDxidXR0b24gbWF0LXJhaXNlZC1idXR0b24gY29sb3I9XCJ3YXJuXCIgKGNsaWNrKT1cIm9uQ2FuY2VsVmFsaWRhdGlvbigpXCI+XG4gICAgPG1hdC1pY29uPmNhbmNlbDwvbWF0LWljb24+XG4gICAgQ2FuY2VsIFZhbGlkYXRpb25cbiAgPC9idXR0b24+XG48L2Rpdj5cblxuPCEtLSBBY3Rpb25zIGF2YWlsYWJsZSBhZnRlciB2YWxpZGF0b3IgaGFzIHByb2Nlc3NlZCBkYXRhLS0+XG5cbjxkaXYgKm5nSWY9XCJhcGlSZXNwb25zZT8uaXNzdWUgJiYgIWlzTG9hZGluZ1wiPlxuICA8ZGl2IGNsYXNzPVwidG9wLXBhZGRpbmdcIj5cblxuICAgIDxkaXYgKGNsaWNrKT1cIm9uRmlsdGVyUmVzdWx0cygpXCI+XG4gICAgICA8bWF0LWJ1dHRvbi10b2dnbGUtZ3JvdXAgbmFtZT1cInNldmVyaXR5IGxldmVsIGZpbHRlclwiIFtmb3JtQ29udHJvbF09XCJzZXZlcml0eUxldmVsc0Zvcm1Db250cm9sXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwic2V2ZXJpdHkgbGV2ZWwgZmlsdGVyXCIgbXVsdGlwbGUgY2xhc3M9XCJmdWxsLXdpZHRoXCI+XG4gICAgICAgIDxtYXQtYnV0dG9uLXRvZ2dsZVxuICAgICAgICAgIGlkPVwiZm9ybWF0LXRvZ2dsZS1idXR0b25zXCJcbiAgICAgICAgICAqbmdGb3I9XCJsZXQgbGV2ZWwgb2Ygc2V2ZXJpdHlMZXZlbHNcIlxuICAgICAgICAgIFt2YWx1ZV09XCJsZXZlbFwiXG4gICAgICAgICAgW2Rpc2FibGVkXT1cIiFpc0ZpbHRlckVuYWJsZWQobGV2ZWwpXCI+XG4gICAgICAgICAgPCEtLSBJbiBvcmRlciB0byBzeW5jaHJvbmlzZSB0aGUgc3RhdGUgb2YgdGhlIGJ1dHRvbiB3aXRoIHRoZSBzdGF0ZSBvZiB0aGUgY2hlY2tib3gsIHdlIHNpbXBseSBzaG93IG9yIGhpZGVcbiAgICAgICAgICBzZWxlY3RlZCBvciBkZXNlbGVjdGVkIGNoZWNrYm94Li0tPlxuICAgICAgICAgIDxtYXQtY2hlY2tib3hcbiAgICAgICAgICAgICpuZ0lmPVwic2V2ZXJpdHlMZXZlbHNGb3JtQ29udHJvbD8udmFsdWUuaW5kZXhPZihsZXZlbCkgIT0gLTFcIlxuICAgICAgICAgICAgY29sb3I9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIFtjaGVja2VkXT10cnVlXG4gICAgICAgICAgICBbZGlzYWJsZWRdPVwiIWlzRmlsdGVyRW5hYmxlZChsZXZlbClcIlxuICAgICAgICAgICAgW2Rpc2FibGVSaXBwbGVdPVwidHJ1ZVwiXG4gICAgICAgICAgPlxuICAgICAgICAgIDwvbWF0LWNoZWNrYm94PlxuICAgICAgICAgIDxtYXQtY2hlY2tib3hcbiAgICAgICAgICAgICpuZ0lmPVwic2V2ZXJpdHlMZXZlbHNGb3JtQ29udHJvbD8udmFsdWUuaW5kZXhPZihsZXZlbCkgPT09IC0xXCJcbiAgICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgICBbY2hlY2tlZF09ZmFsc2VcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCIhaXNGaWx0ZXJFbmFibGVkKGxldmVsKVwiXG4gICAgICAgICAgICBbZGlzYWJsZVJpcHBsZV09XCJ0cnVlXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgPC9tYXQtY2hlY2tib3g+XG4gICAgICAgICAge3tsZXZlbCB8IHRpdGxlY2FzZSB9fSAoe3tnZXRDb3VudChsZXZlbCl9fSlcbiAgICAgICAgPC9tYXQtYnV0dG9uLXRvZ2dsZT5cbiAgICAgIDwvbWF0LWJ1dHRvbi10b2dnbGUtZ3JvdXA+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwidG9wLXBhZGRpbmcgYm94XCIgKm5nSWY9XCJ2YWxpZGF0aW9uUmVzdWx0c0V4cGFuZGVkXCI+XG4gICAgICA8YnV0dG9uIG1hdC1yYWlzZWQtYnV0dG9uIGNvbG9yPXByaW1hcnkgKm5nSWY9XCIhcmVzdWx0RGV0YWlsc0V4cGFuZEJ0blNob3duXCIgKGNsaWNrKT1cInJlc3VsdERldGFpbHNFeHBhbmRCdG5TaG93biA9IHRydWVcIj5cbiAgICAgICAgPG1hdC1pY29uPmV4cGFuZF9tb3JlPC9tYXQtaWNvbj4gRXhwYW5kIFZhbGlkYXRpb24gUmVzdWx0c1xuICAgICAgPC9idXR0b24+XG4gICAgICA8YnV0dG9uIG1hdC1yYWlzZWQtYnV0dG9uIGNvbG9yPXByaW1hcnkgKm5nSWY9XCJyZXN1bHREZXRhaWxzRXhwYW5kQnRuU2hvd25cIiAoY2xpY2spPVwicmVzdWx0RGV0YWlsc0V4cGFuZEJ0blNob3duID0gZmFsc2VcIj5cbiAgICAgICAgPG1hdC1pY29uPmV4cGFuZF9sZXNzPC9tYXQtaWNvbj4gQ29sbGFwc2UgVmFsaWRhdGlvbiBSZXN1bHRzXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiY29udGVudC1zcGFjZXJcIj48L3NwYW4+XG4gICAgICA8YnV0dG9uIG1hdC1yYWlzZWQtYnV0dG9uIChjbGljayk9XCJleHBvcnRWYWxpZGF0aW9uUmVzdWx0cygpXCIgKm5nSWY9XCJleHBvcnRSZXN1bHRzQnV0dG9uU2hvd25cIlxuICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiIShkYXRhU291cmNlPy5kYXRhPy5sZW5ndGg+MClcIj5cbiAgICAgICAgPG1hdC1pY29uPmZvbGRlcl96aXA8L21hdC1pY29uPlxuICAgICAgICB7e2V4cG9ydFZhbGlkYXRpb25SZXN1bHRzQnRuTmFtZX19XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgKm5nSWY9XCJzZXZlcml0eUxldmVsc0Zvcm1Db250cm9sPy52YWx1ZT8ubGVuZ3RoID09PSAwXCI+XG4gICAgICBQbGVhc2Ugc2VsZWN0IHNldmVyaXR5IGxldmVsIHRvIHNlZSB0aGUgcmVzdWx0LlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cInRvcC1wYWRkaW5nIGJveFwiICpuZ0lmPVwiKCF2YWxpZGF0aW9uUmVzdWx0c0V4cGFuZGVkKSAmJiBleHBvcnRSZXN1bHRzQnV0dG9uU2hvd25cIj5cbiAgICAgIDxidXR0b24gbWF0LXN0cm9rZWQtYnV0dG9uIChjbGljayk9XCJleHBvcnRWYWxpZGF0aW9uUmVzdWx0cygpXCJcbiAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cIiEoZGF0YVNvdXJjZT8uZGF0YT8ubGVuZ3RoPjApXCIgY2xhc3M9XCJsZWZ0LW1hcmdpbi1tZFwiPlxuICAgICAgICA8bWF0LWljb24+Zm9sZGVyX3ppcDwvbWF0LWljb24+XG4gICAgICAgIHt7ZXhwb3J0VmFsaWRhdGlvblJlc3VsdHNCdG5OYW1lfX1cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuXG4gICAgPHRhYmxlXG4gICAgICBtYXQtdGFibGUgW2RhdGFTb3VyY2VdPVwiZGF0YVNvdXJjZVwiIG11bHRpVGVtcGxhdGVEYXRhUm93c1xuICAgICAgKm5nSWY9XCJzZXZlcml0eUxldmVsc0Zvcm1Db250cm9sPy52YWx1ZT8ubGVuZ3RoID4gMCAmJiByZXN1bHREZXRhaWxzRXhwYW5kQnRuU2hvd25cIj5cblxuICAgICAgPCEtLSBGaXJzdCBjb2x1bW4gY29udGFpbnMgZXhwYW5kL2NvbGxhcHNlIHdpZGdldC4gVGhlIHVzZXIgY2FuIGNob3NlIHRvIGV4cGFuZC9jb2xsYXBzZSBhbGwgcm93cyxcbiAgICAgICBhcyB3ZWxsIGFzIGV4cGFuZC9jb2xsYXBzZSBpbmRpdmlkdWFsIHJvd3MuIE5vdGUgdGhhdCB0aGUgZXhwYW5kL2NvbGxhcHNlIGFsbCBjYW4gYmUgdG9nZ2xlZCBhdXRvbWF0aWNhbGx5XG4gICAgICAgYmFzZWQgdGhlIHN0YXRlIG9mIHRoZSBpbmRpdmlkdWFsIGV4cGFuZC9jb2xsYXBzZSByb3dzLiBGb3IgZXhhbXBsZSBpZiBhbGwgcm93cyBhcmUgZXhwYW5kZWQgYW5kIFwiZXhwYW5kIGFsbFwiXG4gICAgICAgaXMgcmVuZGVyZWQsIHdlIGF1dG9tYXRpY2FsbHkgaGlkZSBpdCBlbmQgcmVuZGVyIFwiY29sbGFwc2UgYWxsXCIgLS0+XG4gICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cInRvZ2dsZVwiPlxuICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmIChjbGljayk9XCJ0b2dnbGUoKVwiPlxuICAgICAgICAgIDxtYXQtaWNvbiAqbmdJZj1cIiFhbGxFeHBhbmRlZFwiIGNsYXNzPVwicG9pbnRlclwiIG1hdFRvb2x0aXA9XCJFeHBhbmQgQWxsXCIgYXJpYS1sYWJlbD1cImV4cGFuZCBhbGxcIj5cbiAgICAgICAgICAgIGV4cGFuZF9tb3JlXG4gICAgICAgICAgPC9tYXQtaWNvbj5cbiAgICAgICAgICA8bWF0LWljb24gKm5nSWY9XCJhbGxFeHBhbmRlZFwiIGNsYXNzPVwicG9pbnRlclwiIG1hdFRvb2x0aXA9XCJDb2xsYXBzZSBBbGxcIiBhcmlhLWxhYmVsPVwiY29sbGFwc2UgYWxsXCI+XG4gICAgICAgICAgICBleHBhbmRfbGVzc1xuICAgICAgICAgIDwvbWF0LWljb24+XG4gICAgICAgIDwvdGg+XG4gICAgICAgIDx0ZCBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCB2YWxpZGF0aW9uUmVzdWx0SXRlbVwiIGNsYXNzPVwicG9pbnRlclwiXG4gICAgICAgICAgICAoY2xpY2spPVwidmFsaWRhdGlvblJlc3VsdEl0ZW0uZXhwYW5kZWQgPSAhdmFsaWRhdGlvblJlc3VsdEl0ZW0uZXhwYW5kZWQ7IGNoZWNrRXhwYW5kQ29sbGFwc2VBbGxTdGF0dXMoKVwiPlxuICAgICAgICAgIDxtYXQtaWNvbiAqbmdJZj1cIiF2YWxpZGF0aW9uUmVzdWx0SXRlbS5leHBhbmRlZFwiIGFyaWEtbGFiZWw9XCJleHBhbmRcIj5cbiAgICAgICAgICAgIGV4cGFuZF9tb3JlXG4gICAgICAgICAgPC9tYXQtaWNvbj5cbiAgICAgICAgICA8bWF0LWljb24gKm5nSWY9XCJ2YWxpZGF0aW9uUmVzdWx0SXRlbS5leHBhbmRlZFwiIGFyaWEtbGFiZWw9XCJjb2xsYXBzZVwiPlxuICAgICAgICAgICAgZXhwYW5kX2xlc3NcbiAgICAgICAgICA8L21hdC1pY29uPlxuICAgICAgICA8L3RkPlxuICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgIDwhLS0gU2V2ZXJpdHkgbGV2ZWwgaWNvbnMgLS0+XG4gICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cImljb25cIj5cbiAgICAgICAgPHRoIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZj48L3RoPlxuICAgICAgICA8dGQgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgdmFsaWRhdGlvblJlc3VsdEl0ZW1cIj5cbiAgICAgICAgICA8bWF0LWljb24gKm5nSWY9XCJ2YWxpZGF0aW9uUmVzdWx0SXRlbS5zZXZlcml0eSA9PT0gJ0Vycm9yJ1wiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGFuZ2VyLWNvbG9yXCI+ZXJyb3JcbiAgICAgICAgICA8L21hdC1pY29uPlxuICAgICAgICAgIDxtYXQtaWNvbiAqbmdJZj1cInZhbGlkYXRpb25SZXN1bHRJdGVtLnNldmVyaXR5ID09PSAnV2FybmluZydcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cIndhcm5pbmctY29sb3JcIj53YXJuaW5nXG4gICAgICAgICAgPC9tYXQtaWNvbj5cbiAgICAgICAgICA8bWF0LWljb24gKm5nSWY9XCJ2YWxpZGF0aW9uUmVzdWx0SXRlbS5zZXZlcml0eSA9PT0gJ0luZm9ybWF0aW9uJ1wiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3VjY2Vzcy1jb2xvclwiPmluZm9cbiAgICAgICAgICA8L21hdC1pY29uPlxuICAgICAgICAgIDxtYXQtaWNvbiAqbmdJZj1cInZhbGlkYXRpb25SZXN1bHRJdGVtLnNldmVyaXR5ID09PSAnTm90ZSdcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cIm1kLXByaW1hcnktY29sb3JcIj5lZGl0X25vdGVcbiAgICAgICAgICA8L21hdC1pY29uPlxuICAgICAgICA8L3RkPlxuICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgIDwhLS0gU2V2ZXJpdHkgbGV2ZWwgc3RyaW5nIC0tPlxuICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJzZXZlcml0eVwiPlxuICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPlNldmVyaXR5PC90aD5cbiAgICAgICAgPHRkIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHZhbGlkYXRpb25SZXN1bHRJdGVtXCI+XG4gICAgICAgICAge3t2YWxpZGF0aW9uUmVzdWx0SXRlbS5zZXZlcml0eX19XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgPCEtLSBTZXZlcml0eSBsZXZlbCBzdHJpbmcgLS0+XG4gICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cImZoaXJQYXRoXCI+XG4gICAgICAgIDx0aCBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+RkhJUiBwYXRoPC90aD5cbiAgICAgICAgPHRkIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHZhbGlkYXRpb25SZXN1bHRJdGVtXCI+XG4gICAgICAgICAge3t2YWxpZGF0aW9uUmVzdWx0SXRlbT8uZXhwcmVzc2lvbj8uWzBdfX1cbiAgICAgICAgPC90ZD5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICA8IS0tIFRoZSBsb2NhdGlvbiBhcyByZXR1cm5lZCBieSB0aGUgc2VydmVyLiBOb3RlIHRoYXQgdGhlIHJlc291cmNlIHJldHVybmVkIGJ5IHRoZSAgcmVzcG9uc2UgY291bGQgYmVcbiAgICAgIGZvcm1hdHRlZCBkaWZmZXJlbnRseSB0aGVuIHRoZSByZXF1ZXN0IHJlc291cmNlLiBXaGF0IHRoaXMgbWVhbnMgaXMgdGhlIHRoZSBsaW5lIG51bWJlcnMgaW4gdGhlIHJlc3BvbnNlXG4gICAgICByZXNvdXJjZSBtYW55IG5vdCBtYXRjaCB0aG9zZSBpbiB0aGUgcmVxdWVzdC4tLT5cbiAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwibG9jYXRpb25cIj5cbiAgICAgICAgPHRoIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZiBpZD1cImxvY2F0aW9uLWNvbHVtbi1oZWFkZXJcIj4gTG9jYXRpb248L3RoPlxuICAgICAgICA8dGQgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgdmFsaWRhdGlvblJlc3VsdEl0ZW1cIiAoY2xpY2spPVwib25Mb2NhdGlvblNlbGVjdGVkKHZhbGlkYXRpb25SZXN1bHRJdGVtKVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibG9jYXRpb24tZGF0YVwiPiB7e3ZhbGlkYXRpb25SZXN1bHRJdGVtLmxvY2F0aW9ufX08L3NwYW4+XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgPCEtLSBFeHBhbmRlZCBDb250ZW50IENvbHVtbiAtIFRoZSBkZXRhaWwgcm93IGlzIG1hZGUgdXAgb2YgdGhpcyBvbmUgY29sdW1uIHRoYXQgc3BhbnMgYWNyb3NzIGFsbCBjb2x1bW5zIC0tPlxuICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJleHBhbmRlZERldGFpbFwiPlxuICAgICAgICA8dGQgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgdmFsaWRhdGlvblJlc3VsdEl0ZW1cIiBbYXR0ci5jb2xzcGFuXT1cImRpc3BsYXllZENvbHVtbnM/Lmxlbmd0aFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2YWxpZGF0aW9uLXJlc3VsdC1kZXRhaWxcIlxuICAgICAgICAgICAgICAgW0BkZXRhaWxFeHBhbmRdPVwidmFsaWRhdGlvblJlc3VsdEl0ZW0uZXhwYW5kZWQgPyAnZXhwYW5kZWQnIDogJ2NvbGxhcHNlZCdcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2YWxpZGF0aW9uLXJlc3VsdC10ZXh0LXZhbHVlXCI+XG4gICAgICAgICAgICAgIHt7dmFsaWRhdGlvblJlc3VsdEl0ZW0uZGlhZ25vc3RpY3N9fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgPHRyIG1hdC1oZWFkZXItcm93ICptYXRIZWFkZXJSb3dEZWY9XCJkaXNwbGF5ZWRDb2x1bW5zXCI+PC90cj5cbiAgICAgIDx0ciBtYXQtcm93ICptYXRSb3dEZWY9XCJsZXQgdmFsaWRhdGlvblJlc3VsdEl0ZW07IGNvbHVtbnM6IGRpc3BsYXllZENvbHVtbnM7XCJcbiAgICAgICAgICBjbGFzcz1cInRhYmxlLXJvd1wiXG4gICAgICAgICAgW2NsYXNzLmV4cGFuZGVkLXJvd109XCJ2YWxpZGF0aW9uUmVzdWx0SXRlbS5leHBhbmRlZFwiPlxuICAgICAgPHRyIG1hdC1yb3cgKm1hdFJvd0RlZj1cImxldCByb3c7IGNvbHVtbnM6IFsnZXhwYW5kZWREZXRhaWwnXVwiIGNsYXNzPVwidGV4dC12YWx1ZS1yb3dcIj48L3RyPlxuXG4gICAgPC90YWJsZT5cblxuICA8L2Rpdj5cblxuICA8IS0tIFJlc291cmNlIGFzIHJldHVybmVkIGZyb20gdGhlIHZhbGlkYXRvci4gTm90ZSB0aGF0IHRoZSByZXNvdXJjZSByZXR1cm5lZCBmcm9tIHRoZSB2YWxpZGF0b3IgbWF5IGJlXG4gICBmb3JtYXR0ZWQgZGlmZmVyZW50bHkgdGhlbiB0aGUgcmVzb3VyY2Ugd2Ugc2VudCB0byB0aGUgdmFsaWRhdG9yLiAtLT5cbiAgPGRpdiBjbGFzcz1cInRvcC1wYWRkaW5nXCIgKm5nSWY9XCJyZXN1bHREZXRhaWxzRXhwYW5kQnRuU2hvd24gJiYgYXBpUmVzcG9uc2U/LmZvcm1hdHRlZFJlc291cmNlXCI+XG4gICAgPGRpdiBjbGFzcz1cImxpbmUtbnVtYmVycy1yZXNwb25zZVwiICNudW1iZXJzPlxuICAgICAgPGRpdiAqbmdGb3I9XCJsZXQgaXRlbSBvZiBhcGlSZXNwb25zZT8uZm9ybWF0dGVkUmVzb3VyY2U/LnNwbGl0KCdcXG4nKTsgbGV0IGkgPSBpbmRleFwiPjxkaXYgY2xhc3M9XCJudW1iZXJzLXJlc3BvbnNlXCI+e3tpICsgMX19PC9kaXY+PC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInZhbGlkYXRvci1yZXNwb25zZVwiPlxuICAgICAgPHNwYW4gKm5nRm9yPVwibGV0IGl0ZW0gb2YgYXBpUmVzcG9uc2U/LmZvcm1hdHRlZFJlc291cmNlPy5zcGxpdCgnXFxuJyk7IGxldCBpID0gaW5kZXhcIj5cbiAgICAgICAgPHByZSBbbmdDbGFzc109XCJnZXRMaW5lSXRlbUNsYXNzKGl0ZW0sIGkpXCIgY2xhc3M9XCJsaW5lLWl0ZW1cIiBbaWRdPVwiJ21hcmsnKyAoaSsxKVwiPnt7aXRlbX19PC9wcmU+XG4gICAgICA8L3NwYW4+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG48L2Rpdj5cbiJdfQ==